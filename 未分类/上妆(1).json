{"last_node_id":140,"last_link_id":247,"nodes":[{"id":52,"type":"Sampler Selector (Image Saver)","pos":[996.013456354622,1046.5240012173228],"size":{"0":270,"1":60},"flags":{},"order":0,"mode":0,"outputs":[{"name":"sampler_name","type":"COMBO","links":[79],"shape":3,"slot_index":0,"label":"sampler_name"}],"properties":{"Node name for S&R":"Sampler Selector"},"widgets_values":["euler_ancestral"],"color":"#280007","bgcolor":"#3c081b","serialize_values":[null]},{"id":53,"type":"Scheduler Selector (Image Saver)","pos":[1276.013456354621,1046.5240012173228],"size":{"0":230,"1":60},"flags":{},"order":1,"mode":0,"outputs":[{"name":"scheduler","type":"COMBO","links":[80],"shape":3,"slot_index":0,"label":"scheduler"}],"properties":{"Node name for S&R":"Scheduler Selector"},"widgets_values":["karras"],"color":"#280007","bgcolor":"#3c081b","serialize_values":[null]},{"id":21,"type":"FaceDetailer","pos":[375.04017819580076,881.8948987304689],"size":{"0":490,"1":1040},"flags":{},"order":18,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":56,"label":"image"},{"name":"model","type":"MODEL","link":228,"label":"model"},{"name":"clip","type":"CLIP","link":232,"label":"clip"},{"name":"vae","type":"VAE","link":26,"label":"vae"},{"name":"positive","type":"CONDITIONING","link":239,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":240,"label":"negative"},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":186,"label":"bbox_detector"},{"name":"sam_model_opt","type":"SAM_MODEL","link":184,"label":"sam_model_opt"},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null,"label":"segm_detector_opt"},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"detailer_hook"},{"name":"sampler_name","type":"COMBO","link":79,"widget":{"name":"sampler_name"},"label":"sampler_name"},{"name":"scheduler","type":"COMBO","link":80,"widget":{"name":"scheduler"},"label":"scheduler"},{"name":"steps","type":"INT","link":111,"widget":{"name":"steps"},"label":"steps"},{"name":"cfg","type":"FLOAT","link":112,"widget":{"name":"cfg"},"label":"cfg"},{"name":"seed","type":"INT","link":160,"widget":{"name":"seed"},"label":"seed"},{"name":"cycle","type":"INT","link":162,"widget":{"name":"cycle"},"label":"cycle"}],"outputs":[{"name":"image","type":"IMAGE","links":[224,230],"shape":3,"slot_index":0,"label":"image"},{"name":"cropped_refined","type":"IMAGE","links":[],"shape":6,"slot_index":1,"label":"cropped_refined"},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":[],"shape":6,"slot_index":2,"label":"cropped_enhanced_alpha"},{"name":"mask","type":"MASK","links":[],"shape":3,"slot_index":3,"label":"mask"},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":null,"shape":3,"label":"detailer_pipe"},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"cnet_images"}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[512,true,768,1052570527455683,"fixed",14,4,"euler_ancestral","normal",0.3,5,true,true,0.5,10,3,"center-1",0,0.93,6,0.7,"False",10,"",1,false],"color":"#86103b","bgcolor":"#9a244f","serialize_values":[null,null,null,null,null,null,null,"euler_ancestral","normal",null,null,null,null,null,null,null,null,null,null,null,null,null,null,"",null,null]},{"id":65,"type":"Int Literal (Image Saver)","pos":[50,1260],"size":{"0":320,"1":60},"flags":{},"order":2,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[111],"shape":3,"slot_index":0,"label":"INT"}],"title":"Face Detail Steps","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[2],"color":"#86103b","bgcolor":"#9a244f","serialize_values":[null]},{"id":66,"type":"Cfg Literal (Image Saver)","pos":[50,1370],"size":{"0":320,"1":60},"flags":{},"order":3,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[112],"shape":3,"slot_index":0,"label":"FLOAT"}],"title":"Face Detail cfg","properties":{"Node name for S&R":"Cfg Literal"},"widgets_values":[4],"color":"#86103b","bgcolor":"#9a244f","serialize_values":[null]},{"id":134,"type":"PreviewImage","pos":[1540,1180],"size":{"0":620,"1":610},"flags":{},"order":19,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":224,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":135,"type":"CLIPTextEncode","pos":[2180,910],"size":{"0":350,"1":220},"flags":{},"order":16,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":235,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[240],"shape":3,"slot_index":0,"label":"CONDITIONING"}],"title":"Negative Prompt","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#6f0000","bgcolor":"#831100","serialize_values":[""]},{"id":105,"type":"Reroute","pos":[1400.2867701953094,2152.9031466203187],"size":[75,26],"flags":{},"order":21,"mode":0,"inputs":[{"name":"","type":"*","link":247,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[168],"slot_index":0,"label":""}],"title":"Save","properties":{"showOutputText":false,"horizontal":false,"showTitle":true},"color":"#122a00","bgcolor":"#263e0f"},{"id":100,"type":"DF_Integer","pos":[2205.8313349218774,1233.7730782324227],"size":{"0":315,"1":58},"flags":{},"order":4,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[162],"shape":3,"slot_index":0,"label":"INT"}],"title":"Makeup Layers","properties":{"Node name for S&R":"Integer"},"widgets_values":[5],"color":"#86103b","bgcolor":"#9a244f","serialize_values":[null]},{"id":98,"type":"Seed Generator (Image Saver)","pos":[2205.8313349218774,1333.7730782324227],"size":{"0":315,"1":82},"flags":{},"order":5,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[160],"shape":3,"slot_index":0,"label":"INT"}],"title":"Face Detail Seed","properties":{"Node name for S&R":"Seed Generator"},"widgets_values":[3252,"fixed"],"color":"#86103b","bgcolor":"#9a244f","serialize_values":[null,null]},{"id":137,"type":"Note","pos":[2210,1470],"size":{"0":310,"1":400},"flags":{},"order":6,"mode":0,"properties":{"text":""},"widgets_values":["Makeup Layers refers to the number of times the detailer layers your makeup.  Four is a good starting point.\n\nKeep in mind that the more layers you use, the more the face will drift from true.\n\nChange the seed for slightly different makeup styling.\n\n"],"color":"#a51949","bgcolor":"#b92d5d","serialize_values":[null]},{"id":138,"type":"Note","pos":[50,1490],"size":{"0":310,"1":400},"flags":{},"order":7,"mode":0,"properties":{"text":""},"widgets_values":["The secret of this workflow is that we're using very low step and cfg setting, but we're repeating it multiple times.  This allows us to layer on makeup without the face drifting too far from the original.  There will always be some drift, however.\n\n"],"color":"#a51949","bgcolor":"#b92d5d","serialize_values":[null]},{"id":112,"type":"Note","pos":[2620,900],"size":{"0":650,"1":330},"flags":{},"order":8,"mode":0,"title":"The Little Things","properties":{"text":""},"widgets_values":["I sometimes get an out of memory error when I change checkpoints.  Hitting Queue again fixes the issue and starts the process.\n\nWorks best on female faces, it's apparently a built in bias in the models.\n\nComplex backgrounds can confuse The Machine.\n\nFreckles get powdered over. It seems The Machine likes a heavy foundation."],"color":"#a10600","bgcolor":"#b51a00","serialize_values":[null]},{"id":113,"type":"Note","pos":[2620,1310],"size":{"0":430,"1":340},"flags":{},"order":9,"mode":0,"title":"Release Notes","properties":{"text":""},"widgets_values":["At the Makeup Counter\n\n-v1.0 - December 4, 2023\n  Initial Relase"],"color":"#000a43","bgcolor":"#001e57","serialize_values":[null]},{"id":139,"type":"Note","pos":[1540,420],"size":{"0":1090,"1":410},"flags":{},"order":10,"mode":0,"title":"About","properties":{"text":""},"widgets_values":["This is just a doodle I through together today that sprang out of a much more complex project I was working on.  I just found myself suddenly inspired when I realized how easy this would be to do.\n\nIf you've not updated your ComfyUI lately, you may need to Update All from the Manager.  In order to work the FaceDetailer needs to have Cycles available.  \n\nAs this is only a doodle, it's not 100% accurate and you may find yourself needing to tweak your makeup descriptions or applying more layers.  However, it's still fun to play with.\n\nI hope you enjoy playing with it as much as I've enjoyed tossing it together.\n\n--Clark Glenn Davis, aka Verevolf\n\nOh, the demo images I used were all licensed from Adobe."],"color":"#000a43","bgcolor":"#001e57","serialize_values":[null]},{"id":140,"type":"Note","pos":[980,1870],"size":{"0":320,"1":180},"flags":{},"order":11,"mode":0,"properties":{"text":""},"widgets_values":["Connect these two nodes when you are ready to save your final image, then just hit Queue again."],"color":"#122a00","bgcolor":"#263e0f","serialize_values":[null]},{"id":23,"type":"SAMLoader","pos":[45.04017819580079,1121.8948987304689],"size":{"0":320,"1":82},"flags":{"pinned":false},"order":12,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[184],"shape":3,"slot_index":0,"label":"SAM_MODEL"}],"title":"SAMLoader (Face)","properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","Prefer GPU"],"color":"#86103b","bgcolor":"#9a244f","serialize_values":[null,null]},{"id":22,"type":"UltralyticsDetectorProvider","pos":[45,992],"size":{"0":320,"1":80},"flags":{"collapsed":false},"order":13,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[186],"shape":3,"slot_index":0,"label":"BBOX_DETECTOR"},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[],"shape":3,"slot_index":1,"label":"SEGM_DETECTOR"}],"title":"UltralyticsDetectorProvider (Face)","properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"],"color":"#86103b","bgcolor":"#9a244f","serialize_values":[null]},{"id":12,"type":"CheckpointLoaderSimple","pos":[996.013456354622,906.5240012173234],"size":{"0":510,"1":100},"flags":{},"order":14,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[228],"shape":3,"slot_index":0,"label":"MODEL"},{"name":"CLIP","type":"CLIP","links":[232,235,237],"shape":3,"slot_index":1,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[26],"shape":3,"slot_index":2,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["Realistic Vision V6.0 B1 \u771f\u5b9e\u89c6\u89c9 RealisticV(V6.0 B1)"],"color":"#280007","bgcolor":"#3c081b","serialize_values":["2882_4423_5179@fe7578cb5e.safetensors"]},{"id":1,"type":"LoadImage","pos":[900,1180],"size":{"0":620,"1":600},"flags":{},"order":15,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[56],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"Load Your Photo","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["https://bfs.esheep.com/bfs/aikobo-bfs/app/comfy/e8ac8b61bdc1b8bace196be5b3817e356e0d75a2.png@1536w_1536h_0e","image"],"color":"#5b6200","bgcolor":"#6f7608","serialize_values":[null,null]},{"id":59,"type":"SaveImage","pos":[1579,1885],"size":{"0":600,"1":590},"flags":{},"order":22,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":168,"label":"images"}],"properties":{},"widgets_values":["MakeupMaster/madeup"],"color":"#222","bgcolor":"#000","serialize_values":["MakeupMaster/madeup"]},{"id":104,"type":"Reroute","pos":[1270.2867701953116,2152.9031466203187],"size":[75,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":230,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[247],"slot_index":0,"label":""}],"title":"Final","properties":{"showOutputText":false,"horizontal":false,"showTitle":true},"color":"#122a00","bgcolor":"#263e0f"},{"id":136,"type":"CLIPTextEncode","pos":[1540,900],"size":{"0":620,"1":220},"flags":{},"order":17,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":237,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[239],"shape":3,"slot_index":0,"label":"CONDITIONING"}],"title":"Describe your makeup","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["vibrant red lipstick, black eyeliner"],"color":"#3b6614","bgcolor":"#4f7a28","serialize_values":["vibrant red lipstick, black eyeliner"]}],"links":[[26,12,2,21,3,"VAE"],[56,1,0,21,0,"IMAGE"],[79,52,0,21,10,"COMBO"],[80,53,0,21,11,"COMBO"],[111,65,0,21,12,"INT"],[112,66,0,21,13,"FLOAT"],[160,98,0,21,14,"INT"],[162,100,0,21,15,"INT"],[168,105,0,59,0,"IMAGE"],[184,23,0,21,7,"SAM_MODEL"],[186,22,0,21,6,"BBOX_DETECTOR"],[224,21,0,134,0,"IMAGE"],[228,12,0,21,1,"MODEL"],[230,21,0,104,0,"*"],[232,12,1,21,2,"CLIP"],[235,12,1,135,0,"CLIP"],[237,12,1,136,0,"CLIP"],[239,136,0,21,4,"CONDITIONING"],[240,135,0,21,5,"CONDITIONING"],[247,104,0,105,0,"*"]],"groups":[{"title":"Makeup Applicator","bounding":[2177,1149,364,735],"color":"#d95d8a","font_size":24,"locked":false},{"title":"Initial Choices","bounding":[984,834,534,291],"color":"#d95d8a","font_size":24,"locked":false},{"title":"Save Final","bounding":[1264,2096,216,121],"color":"#9dc978","font_size":24,"locked":false},{"title":"The Makeup Counter","bounding":[33,801,845,1136],"color":"#d95d8a","font_size":24,"locked":false}],"config":{},"extra":{},"version":0.4}