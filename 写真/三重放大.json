{"last_node_id":85,"last_link_id":177,"nodes":[{"id":50,"type":"ImageUpscaleWithModel","pos":{"0":1920,"1":560,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":241.79998779296875,"1":46},"flags":{},"order":20,"mode":0,"inputs":[{"name":"upscale_model","type":"UPSCALE_MODEL","link":100,"label":"放大模型"},{"name":"image","type":"IMAGE","link":105,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[101],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageUpscaleWithModel"}},{"id":51,"type":"UpscaleModelLoader","pos":{"0":1880,"1":450,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":58},"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[100],"shape":3,"label":"放大模型"}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["4x_NMKD-Siax_200k.pth"]},{"id":52,"type":"ImageScaleBy","pos":{"0":1890,"1":670,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":82},"flags":{},"order":22,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":101,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[99],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",0.38]},{"id":3,"type":"PreviewImage","pos":{"0":864,"1":952,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":730.7172241210938,"1":793.0120239257812},"flags":{},"order":13,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":115,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":24,"type":"PreviewImage","pos":{"0":1673,"1":953,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":805.4698486328125,"1":794.4293823242188},"flags":{},"order":21,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":116,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":56,"type":"PreviewImage","pos":{"0":2517,"1":956,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":602.8773803710938,"1":794.2877197265625},"flags":{},"order":28,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":120,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":38,"type":"UpscaleModelLoader","pos":{"0":1110,"1":440,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[64],"shape":3,"label":"放大模型"}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["4x-UltraSharp.pth"]},{"id":55,"type":"VAEDecode","pos":{"0":2567,"1":543,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":210,"1":46},"flags":{},"order":25,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":108,"label":"Latent"},{"name":"vae","type":"VAE","link":111,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[130],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":64,"type":"Image Levels Adjustment","pos":{"0":2592,"1":639,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":106},"flags":{},"order":26,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":130,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[131],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"Image Levels Adjustment"},"widgets_values":[10,127.5,255]},{"id":4,"type":"easy stylesSelector","pos":{"0":-750,"1":260,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":425,"1":500},"flags":{},"order":2,"mode":4,"inputs":[{"name":"positive","type":"STRING","link":null,"widget":{"name":"positive"},"label":"正面提示词（可选）"},{"name":"negative","type":"STRING","link":null,"widget":{"name":"negative"},"label":"负面提示词（可选）"}],"outputs":[{"name":"positive","type":"STRING","links":[7],"slot_index":0,"shape":3,"label":"正面提示词"},{"name":"negative","type":"STRING","links":[],"slot_index":1,"shape":3,"label":"负面提示词"}],"properties":{"Node name for S&R":"easy stylesSelector","values":["Fooocus Enhance","sai-analog film","Fooocus Negative"]},"widgets_values":["fooocus_styles","","","Fooocus Enhance,sai-analog film,Fooocus Negative"]},{"id":58,"type":"Image Levels Adjustment","pos":{"0":746,"1":792,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":106},"flags":{},"order":14,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":117,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[118],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"Image Levels Adjustment"},"widgets_values":[12,127.5,255]},{"id":49,"type":"VAEEncode","pos":{"0":1920,"1":800,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":210,"1":46},"flags":{},"order":23,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":99,"label":"图像"},{"name":"vae","type":"VAE","link":114,"label":"VAE"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[102],"slot_index":0,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":73,"type":"VAEEncode","pos":{"0":1148,"1":816,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":210,"1":46},"flags":{},"order":17,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":143,"label":"图像"},{"name":"vae","type":"VAE","link":144,"label":"VAE"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[145],"slot_index":0,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":37,"type":"ImageUpscaleWithModel","pos":{"0":1147,"1":555,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":241.79998779296875,"1":46},"flags":{},"order":15,"mode":0,"inputs":[{"name":"upscale_model","type":"UPSCALE_MODEL","link":64,"label":"放大模型"},{"name":"image","type":"IMAGE","link":118,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[65],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageUpscaleWithModel"}},{"id":39,"type":"ImageScaleBy","pos":{"0":1064,"1":632,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":82},"flags":{},"order":16,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":65,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[143],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",0.38]},{"id":48,"type":"VAEDecode","pos":{"0":501,"1":805,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":210,"1":46},"flags":{},"order":12,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":92,"label":"Latent"},{"name":"vae","type":"VAE","link":93,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[115,117],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":62,"type":"SAMLoader","pos":{"0":3594,"1":-364,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":82},"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[128],"shape":3,"label":"SAM模型"}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_h_4b8939.pth","Prefer GPU"]},{"id":61,"type":"UltralyticsDetectorProvider","pos":{"0":3610,"1":-185,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":78},"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[127],"slot_index":0,"shape":3,"label":"BBox检测"},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null,"shape":3,"label":"SEGM检测"}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":60,"type":"FaceDetailer","pos":{"0":3487,"1":-30,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":519,"1":905},"flags":{},"order":29,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":165,"label":"图像"},{"name":"model","type":"MODEL","link":122,"label":"模型"},{"name":"clip","type":"CLIP","link":123,"label":"CLIP"},{"name":"vae","type":"VAE","link":124,"label":"VAE"},{"name":"positive","type":"CONDITIONING","link":125,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":126,"label":"负面条件"},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":127,"label":"BBox检测"},{"name":"sam_model_opt","type":"SAM_MODEL","link":128,"label":"SAM模型"},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null,"label":"Segm检测"},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"细化约束"},{"name":"scheduler_func_opt","type":"SCHEDULER_FUNC","link":null}],"outputs":[{"name":"image","type":"IMAGE","links":[129],"slot_index":0,"shape":3,"label":"图像"},{"name":"cropped_refined","type":"IMAGE","links":null,"shape":6,"label":"细化图像"},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":null,"shape":6,"label":"细化部分"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"遮罩"},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":null,"shape":3,"label":"细化节点束"},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"ControlNet图像"}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[512,true,1024,702660920631837,"randomize",20,8,"dpmpp_2m","karras",0.5,5,true,true,0.5,10,3,"center-1",0,0.93,0,0.7,"False",10,"",1,false,20,true]},{"id":59,"type":"ImageSharpen","pos":{"0":2953,"1":636,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":106},"flags":{},"order":27,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":131,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[120,165],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"ImageSharpen"},"widgets_values":[1,0.45,0.45]},{"id":47,"type":"EmptyLatentImage","pos":{"0":147,"1":710,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":106},"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"LATENT","type":"LATENT","links":[91],"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,768,1]},{"id":41,"type":"KSamplerAdvanced","pos":{"0":1480,"1":460,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":334},"flags":{},"order":18,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":98,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":96,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":97,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":145,"label":"Latent"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[103],"slot_index":0,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",0,"fixed",35,0.8,"euler_cfg_pp","sgm_uniform",21,35,"disable"]},{"id":53,"type":"KSamplerAdvanced","pos":{"0":2235,"1":465,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":334},"flags":{},"order":24,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":110,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":106,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":107,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":102,"label":"Latent"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[108],"slot_index":0,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",0,"fixed",50,0.8,"euler_cfg_pp","sgm_uniform",36,50,"disable"]},{"id":54,"type":"VAEDecode","pos":{"0":1533,"1":845,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":210,"1":46},"flags":{},"order":19,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":103,"label":"Latent"},{"name":"vae","type":"VAE","link":104,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[105,116],"slot_index":0,"shape":3,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":63,"type":"PreviewImage","pos":{"0":3182,"1":961,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":747.0493774414062,"1":788.1380615234375},"flags":{},"order":30,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":129,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"}},{"id":42,"type":"CheckpointLoaderSimple","pos":{"0":173,"1":45,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":98},"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","type":"MODEL","links":[86],"slot_index":0,"shape":3,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[84],"slot_index":1,"shape":3,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[93,104,111,114,124,144],"slot_index":2,"shape":3,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["写实\\SD1.5-真人-麦橘写实_v7.safetensors"]},{"id":43,"type":"BNK_CLIPTextEncodeAdvanced","pos":{"0":127,"1":354,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":403.9329833984375,"1":107},"flags":{},"order":9,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":85,"label":"CLIP"},{"name":"text","type":"STRING","link":87,"widget":{"name":"text"},"label":"文本"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[96,106,125,176],"slot_index":0,"shape":3,"label":"条件"}],"properties":{"Node name for S&R":"BNK_CLIPTextEncodeAdvanced"},"widgets_values":["","none","A1111",true]},{"id":44,"type":"LoraLoader","pos":{"0":167,"1":175,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":126},"flags":{},"order":8,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":86,"label":"模型"},{"name":"clip","type":"CLIP","link":84,"label":"CLIP"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[98,110,113,122],"slot_index":0,"shape":3,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[85,112,123],"slot_index":1,"shape":3,"label":"CLIP"}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["真人\\SD1.5-Lion-幻纱梦境（影楼）_V1.safetensors",0.8,0.8]},{"id":5,"type":"StringFunction|pysssss","pos":{"0":-303,"1":373,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":432.62188720703125,"1":429.78558349609375},"flags":{},"order":7,"mode":0,"inputs":[{"name":"text_b","type":"STRING","link":7,"widget":{"name":"text_b"},"label":"文本_B"}],"outputs":[{"name":"STRING","type":"STRING","links":[87],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"StringFunction|pysssss"},"widgets_values":["append","yes","A girl at the bottom of the sea, surrounded by flowers","","",true,true,true]},{"id":45,"type":"BNK_CLIPTextEncodeAdvanced","pos":{"0":146,"1":512,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":398.13299560546875,"1":149},"flags":{},"order":10,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":112,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[97,107,126,177],"slot_index":0,"shape":3,"label":"条件"}],"properties":{"Node name for S&R":"BNK_CLIPTextEncodeAdvanced"},"widgets_values":["sketches, (worst quality:2), (low quality:2), (normal quality:2), lowers, normal quality, ((monochrome)), ((grayscale)), facing away, looking away,text, error ,extra digit, fewer digits, cropped,jpeg artifacts,signature, watermark, username,blurry,skin spots, acnes, skin blemishes, bad anatomy,fat,bad feet,cropped,poorly drawn hands,poorly drawn face,mutation,deformed,tilted head, bad anatomy,bad hands,extra fingers,fewer digits,extra limbs,extra arms,extra legs,malformed limbs,fused fingers,too many fingers,long neck,cross-eyed,mutated hands,bad body,bad proportions,gross proportions,text,error,missing fingers,missing arms,missing legs,extra digit, extra arms, extra leg, extra foot,missing fingers","none","A1111",true]},{"id":46,"type":"KSamplerAdvanced","pos":{"0":667,"1":438,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":315,"1":334},"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":113,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":176,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":177,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":91,"label":"Latent"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[92],"slot_index":0,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",571984612563979,"randomize",20,0.8,"euler_cfg_pp","sgm_uniform",0,20,"disable"]}],"links":[[7,4,0,5,0,"STRING"],[64,38,0,37,0,"UPSCALE_MODEL"],[65,37,0,39,0,"IMAGE"],[84,42,1,44,1,"CLIP"],[85,44,1,43,0,"CLIP"],[86,42,0,44,0,"MODEL"],[87,5,0,43,1,"STRING"],[91,47,0,46,3,"LATENT"],[92,46,0,48,0,"LATENT"],[93,42,2,48,1,"VAE"],[96,43,0,41,1,"CONDITIONING"],[97,45,0,41,2,"CONDITIONING"],[98,44,0,41,0,"MODEL"],[99,52,0,49,0,"IMAGE"],[100,51,0,50,0,"UPSCALE_MODEL"],[101,50,0,52,0,"IMAGE"],[102,49,0,53,3,"LATENT"],[103,41,0,54,0,"LATENT"],[104,42,2,54,1,"VAE"],[105,54,0,50,1,"IMAGE"],[106,43,0,53,1,"CONDITIONING"],[107,45,0,53,2,"CONDITIONING"],[108,53,0,55,0,"LATENT"],[110,44,0,53,0,"MODEL"],[111,42,2,55,1,"VAE"],[112,44,1,45,0,"CLIP"],[113,44,0,46,0,"MODEL"],[114,42,2,49,1,"VAE"],[115,48,0,3,0,"IMAGE"],[116,54,0,24,0,"IMAGE"],[117,48,0,58,0,"IMAGE"],[118,58,0,37,1,"IMAGE"],[120,59,0,56,0,"IMAGE"],[122,44,0,60,1,"MODEL"],[123,44,1,60,2,"CLIP"],[124,42,2,60,3,"VAE"],[125,43,0,60,4,"CONDITIONING"],[126,45,0,60,5,"CONDITIONING"],[127,61,0,60,6,"BBOX_DETECTOR"],[128,62,0,60,7,"SAM_MODEL"],[129,60,0,63,0,"IMAGE"],[130,55,0,64,0,"IMAGE"],[131,64,0,59,0,"IMAGE"],[143,39,0,73,0,"IMAGE"],[144,42,2,73,1,"VAE"],[145,73,0,41,3,"LATENT"],[165,59,0,60,0,"IMAGE"],[176,43,0,46,1,"CONDITIONING"],[177,45,0,46,2,"CONDITIONING"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.6303940863128914,"offset":[249.53391518382227,85.17511728848689]},"workspace_info":{"id":"cNnqwMIyYFs7fNK7bPSEu","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}