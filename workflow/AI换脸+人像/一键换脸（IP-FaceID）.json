{"last_node_id":36,"last_link_id":53,"nodes":[{"id":3,"type":"CLIPVisionLoader","pos":[1,138],"size":{"0":315,"1":58},"flags":{},"order":0,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[2],"shape":3,"label":"CLIP_VISION"}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["clip_h.pth"],"shape":1,"serialize_values":[null]},{"id":4,"type":"IPAdapterInsightFaceLoader","pos":[0,250],"size":{"0":315,"1":58},"flags":{"collapsed":false},"order":1,"mode":0,"outputs":[{"name":"INSIGHTFACE","type":"INSIGHTFACE","links":[3],"shape":3,"label":"INSIGHTFACE"}],"properties":{"Node name for S&R":"IPAdapterInsightFaceLoader"},"widgets_values":["CUDA"],"shape":1,"serialize_values":[null]},{"id":8,"type":"SetLatentNoiseMask","pos":[237,949],"size":{"0":210,"1":46},"flags":{},"order":22,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":12,"label":"samples","slot_index":0},{"name":"mask","type":"MASK","link":23,"label":"mask"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[13],"shape":3,"label":"LATENT","slot_index":0}],"properties":{"Node name for S&R":"SetLatentNoiseMask"},"shape":1},{"id":7,"type":"VAEEncode","pos":[-1,949],"size":{"0":210,"1":46},"flags":{},"order":20,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":32,"label":"pixels","slot_index":0},{"name":"vae","type":"VAE","link":14,"label":"vae","slot_index":1}],"outputs":[{"name":"LATENT","type":"LATENT","links":[12],"shape":3,"label":"LATENT"}],"properties":{"Node name for S&R":"VAEEncode"},"shape":1},{"id":17,"type":"Load RetinaFace","pos":[-340,200],"size":{"0":210,"1":26},"flags":{},"order":2,"mode":0,"outputs":[{"name":"MODEL","type":"RETINAFACE","links":[27],"shape":3,"label":"MODEL"}],"properties":{"Node name for S&R":"Load RetinaFace"},"shape":1},{"id":16,"type":"Crop Face","pos":[-340,30],"size":{"0":315,"1":122},"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","type":"RETINAFACE","link":27,"label":"model","slot_index":0},{"name":"image","type":"IMAGE","link":25,"label":"image"}],"outputs":[{"name":"face_image","type":"IMAGE","links":[26],"shape":3,"label":"face_image","slot_index":0},{"name":"preview","type":"IMAGE","links":null,"shape":3,"label":"preview"},{"name":"bbox","type":"BBOX","links":null,"shape":3,"label":"bbox"}],"properties":{"Node name for S&R":"Crop Face"},"widgets_values":[0.8,32],"shape":1,"serialize_values":[null,null]},{"id":12,"type":"GroundingDinoSAMSegment (segment anything)","pos":[0,1050],"size":{"0":352.79998779296875,"1":122},"flags":{},"order":13,"mode":0,"inputs":[{"name":"sam_model","type":"SAM_MODEL","link":19,"label":"sam_model","slot_index":0},{"name":"grounding_dino_model","type":"GROUNDING_DINO_MODEL","link":21,"label":"grounding_dino_model","slot_index":1},{"name":"image","type":"IMAGE","link":20,"label":"image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":[23,33],"shape":3,"label":"MASK","slot_index":1}],"properties":{"Node name for S&R":"GroundingDinoSAMSegment (segment anything)"},"widgets_values":["face",0.3],"shape":1,"serialize_values":[null,null]},{"id":21,"type":"MaskToImage","pos":[388.7872712947119,1118.8999421931494],"size":{"0":210,"1":26},"flags":{},"order":16,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":33,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[34],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":23,"type":"ControlNetLoader","pos":[0,1490],"size":{"0":315,"1":58},"flags":{},"order":3,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[35],"shape":3,"label":"CONTROL_NET","slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["control_v11p_sd15_openpose.pth"],"serialize_values":[null]},{"id":22,"type":"PreviewImage","pos":[390,1200],"size":{"0":210,"1":246},"flags":{},"order":21,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":34,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":24,"type":"ControlNetApply","pos":[390,1500],"size":{"0":211.60000610351562,"1":98},"flags":{},"order":19,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":38,"label":"conditioning","slot_index":0},{"name":"control_net","type":"CONTROL_NET","link":35,"label":"control_net"},{"name":"image","type":"IMAGE","link":36,"label":"image"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[39],"shape":3,"label":"CONDITIONING","slot_index":0}],"properties":{"Node name for S&R":"ControlNetApply"},"widgets_values":[1],"serialize_values":[null]},{"id":26,"type":"PreviewImage","pos":[390,1650],"size":{"0":210,"1":246},"flags":{},"order":17,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":40,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":25,"type":"DWPreprocessor","pos":[0,1600],"size":{"0":315,"1":198},"flags":{},"order":14,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":37,"label":"image","slot_index":0}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[36,40],"shape":3,"label":"IMAGE","slot_index":0},{"name":"POSE_KEYPOINT","type":"POSE_KEYPOINT","links":null,"shape":3,"label":"POSE_KEYPOINT"}],"properties":{"Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_l.onnx","dw-ll_ucoco_384.onnx"],"serialize_values":[null,null,null,null,null,null]},{"id":14,"type":"GroundingDinoModelLoader (segment anything)","pos":[0,1360],"size":{"0":361.20001220703125,"1":58},"flags":{},"order":4,"mode":0,"outputs":[{"name":"GROUNDING_DINO_MODEL","type":"GROUNDING_DINO_MODEL","links":[21],"shape":3,"label":"GROUNDING_DINO_MODEL"}],"properties":{"Node name for S&R":"GroundingDinoModelLoader (segment anything)"},"widgets_values":["GroundingDINO_SwinT_OGC (694MB)"],"shape":1,"serialize_values":[null]},{"id":13,"type":"SAMModelLoader (segment anything)","pos":[0,1230],"size":{"0":315,"1":82},"flags":{},"order":5,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[19],"shape":3,"label":"SAM_MODEL"}],"properties":"Node name for S&R': 'SAMModelLoader (segment anything)","widgets_values":["sam_hq_vit_l (1.25GB)"],"shape":1,"serialize_values":[null]},{"id":19,"type":"WD14Tagger|pysssss","pos":[-340,430],"size":{"0":315,"1":130},"flags":{},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":49,"label":"image","slot_index":0}],"outputs":[{"name":"STRING","type":"STRING","links":[29],"shape":6,"label":"STRING","slot_index":0}],"properties":{"Node name for S&R":"WD14Tagger|pysssss"},"widgets_values":["wd-v1-4-moat-tagger-v2",0.35,0.85,""],"shape":1,"serialize_values":[null,null,null,null]},{"id":5,"type":"KSampler (Efficient)","pos":[450,430],"size":{"0":325,"1":562},"flags":{},"order":23,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":10,"label":"model"},{"name":"positive","type":"CONDITIONING","link":39,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":6,"label":"negative"},{"name":"latent_image","type":"LATENT","link":13,"label":"latent_image","slot_index":3},{"name":"optional_vae","type":"VAE","link":8,"label":"optional_vae"},{"name":"script","type":"SCRIPT","link":null,"label":"script"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[42],"shape":3,"label":"MODEL","slot_index":0},{"name":"CONDITIONING+","type":"CONDITIONING","links":[43],"shape":3,"label":"CONDITIONING+","slot_index":1},{"name":"CONDITIONING-","type":"CONDITIONING","links":[44],"shape":3,"label":"CONDITIONING-","slot_index":2},{"name":"LATENT","type":"LATENT","links":null,"shape":3,"label":"LATENT"},{"name":"VAE","type":"VAE","links":[45],"shape":3,"label":"VAE","slot_index":4},{"name":"IMAGE","type":"IMAGE","links":[28,41],"shape":3,"label":"IMAGE","slot_index":5}],"properties":{"Node name for S&R":"KSampler (Efficient)"},"widgets_values":[485632173441618,null,30,7,"dpmpp_sde","karras",1,"auto","true"],"bgcolor":"#3f5159","shape":1,"serialize_values":[null,null,null,null,null,null,null,null,null]},{"id":18,"type":"PreviewImage","pos":[1200,430],"size":{"0":210,"1":246},"flags":{},"order":24,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":28,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"},"shape":1},{"id":28,"type":"PreviewImage","pos":[1440,430],"size":{"0":210,"1":246},"flags":{},"order":26,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":46,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"},"shape":1},{"id":29,"type":"Upscale Model Loader","pos":[830,1100],"size":{"0":315,"1":78},"flags":{},"order":6,"mode":0,"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[47],"shape":3,"label":"UPSCALE_MODEL"},{"name":"MODEL_NAME_TEXT","type":"STRING","links":null,"shape":3,"label":"MODEL_NAME_TEXT"}],"properties":{"Node name for S&R":"Upscale Model Loader"},"widgets_values":["RealESRGAN_x4plus.pth"],"shape":1,"serialize_values":[null]},{"id":1,"type":"IPAdapterFaceID","pos":[370,30],"size":{"0":315,"1":326},"flags":{},"order":18,"mode":0,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":1,"label":"ipadapter","slot_index":0},{"name":"clip_vision","type":"CLIP_VISION","link":2,"label":"clip_vision","slot_index":1},{"name":"insightface","type":"INSIGHTFACE","link":3,"label":"insightface","slot_index":2},{"name":"image","type":"IMAGE","link":26,"label":"image","slot_index":3},{"name":"model","type":"MODEL","link":9,"label":"model","slot_index":4},{"name":"attn_mask","type":"MASK","link":null,"label":"attn_mask"},{"name":"image_negative","type":"IMAGE","link":"null","label":"image_negative"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[10],"shape":3,"label":"MODEL","slot_index":0}],"properties":{"Node name for S&R":"IPAdapterFaceID"},"widgets_values":[1,"1","linear","concat",0,1,"V only"],"shape":1,"serialize_values":[null,null,null,null,null,null,null,null]},{"id":2,"type":"IPAdapterModelLoader","pos":[0,30],"size":{"0":332.307861328125,"1":61.852760314941406},"flags":{},"order":7,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[1],"shape":3,"label":"IPADAPTER"}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-faceid-plusv2_sd15.bin"],"shape":1,"serialize_values":[null]},{"id":27,"type":"UltimateSDUpscale","pos":[830,430],"size":{"0":315,"1":614},"flags":{},"order":25,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":41,"label":"image"},{"name":"model","type":"MODEL","link":42,"label":"model"},{"name":"positive","type":"CONDITIONING","link":43,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":44,"label":"negative"},{"name":"vae","type":"VAE","link":45,"label":"vae"},{"name":"upscale_model","type":"UPSCALE_MODEL","link":47,"label":"upscale_model","slot_index":5}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[46,48],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"UltimateSDUpscale"},"widgets_values":[2,316366293746901,"randomize",20,8,"dpmpp_sde","karras",0.2,"Linear",512,512,8,32,"None",1,64,8,16,true,false],"shape":1,"serialize_values":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]},{"id":30,"type":"SaveImage","pos":[1205,735],"size":[315,270],"flags":{},"order":27,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":48,"label":"images"}],"properties":{},"widgets_values":["ComfyUI"],"serialize_values":["ComfyUI"]},{"id":6,"type":"Efficient Loader","pos":[0,430],"size":{"0":400,"1":462},"flags":{},"order":15,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":52,"label":"lora_stack","slot_index":0},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":null,"label":"cnet_stack"},{"name":"positive","type":"STRING","link":29,"widget":{"name":"positive"},"label":"positive"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[9],"shape":3,"label":"MODEL","slot_index":0},{"name":"CONDITIONING+","type":"CONDITIONING","links":[38],"shape":3,"label":"CONDITIONING+","slot_index":1},{"name":"CONDITIONING-","type":"CONDITIONING","links":[6],"shape":3,"label":"CONDITIONING-","slot_index":2},{"name":"LATENT","type":"LATENT","links":[],"shape":3,"label":"LATENT","slot_index":3},{"name":"VAE","type":"VAE","links":[8,14],"shape":3,"label":"VAE","slot_index":4},{"name":"CLIP","type":"CLIP","links":null,"shape":3,"label":"CLIP"},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":null,"shape":3,"label":"DEPENDENCIES"}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["\u58a8\u5e7d\u4eba\u9020\u4eba(v1080-none)","vae-ft-mse-840000-ema-pruned@735e4c3a44.safetensors",-1,"None",1,1,"CLIP_POSITIVE","embedding:EasyNegativeV2, ","none","A1111",512,512,1],"bgcolor":"#553333","shape":1,"serialize_values":["833_4584_5364@d196f0825b.safetensors",null,null,null,null,null,"CLIP_POSITIVE","embedding:EasyNegativeV2, ",null,null,null,null,null]},{"id":15,"type":"LoadImage","pos":[-699,28],"size":{"0":315,"1":314},"flags":{},"order":8,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[25,49],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["https://bfs.esheep.com/bfs/aikobo-bfs/app/comfy/4f8eaf14dbf37bc86fbe3984bdcbf2977f499260.jpg","image"],"shape":1,"serialize_values":[null,null]},{"id":9,"type":"LoadImage","pos":[-700,430],"size":[320,314],"flags":{},"order":9,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[20,32,37],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["https://bfs.esheep.com/bfs/aikobo-bfs/app/comfy/317e4f146314399562e7a672a9ea90a20c7f34f7.jpg","image"],"shape":1,"serialize_values":[null,null]},{"id":33,"type":"CR LoRA Stack","pos":[-340,610],"size":[315,342],"flags":{},"order":10,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null,"label":"lora_stack"}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[52],"shape":3,"label":"LORA_STACK"},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["On","Concept Sliders:age\u5e74\u9f84(v1)",2,1,"Off","None",1,1,"Off","None",1,1],"shape":1,"serialize_values":[null,"3304_4982_5842@8c1c096f7c.pt",null,null,null,null,null,null,null,null,null,null]}],"links":[[1,2,0,1,0,"IPADAPTER"],[2,3,0,1,1,"CLIP_VISION"],[3,4,0,1,2,"INSIGHTFACE"],[6,6,2,5,2,"CONDITIONING"],[8,6,4,5,4,"VAE"],[9,6,0,1,4,"MODEL"],[10,1,0,5,0,"MODEL"],[12,7,0,8,0,"LATENT"],[13,8,0,5,3,"LATENT"],[14,6,4,7,1,"VAE"],[19,13,0,12,0,"SAM_MODEL"],[20,9,0,12,2,"IMAGE"],[21,14,0,12,1,"GROUNDING_DINO_MODEL"],[23,12,1,8,1,"MASK"],[25,15,0,16,1,"IMAGE"],[26,16,0,1,3,"IMAGE"],[27,17,0,16,0,"RETINAFACE"],[28,5,5,18,0,"IMAGE"],[29,19,0,6,2,"STRING"],[32,9,0,7,0,"IMAGE"],[33,12,1,21,0,"MASK"],[34,21,0,22,0,"IMAGE"],[35,23,0,24,1,"CONTROL_NET"],[36,25,0,24,2,"IMAGE"],[37,9,0,25,0,"IMAGE"],[38,6,1,24,0,"CONDITIONING"],[39,24,0,5,1,"CONDITIONING"],[40,25,0,26,0,"IMAGE"],[41,5,5,27,0,"IMAGE"],[42,5,0,27,1,"MODEL"],[43,5,1,27,2,"CONDITIONING"],[44,5,2,27,3,"CONDITIONING"],[45,5,4,27,4,"VAE"],[46,27,0,28,0,"IMAGE"],[47,29,0,27,5,"UPSCALE_MODEL"],[48,27,0,30,0,"IMAGE"],[49,15,0,19,0,"IMAGE"],[52,33,0,6,0,"LORA_STACK"]],"groups":[],"config":{},"extra":{},"version":0.4}