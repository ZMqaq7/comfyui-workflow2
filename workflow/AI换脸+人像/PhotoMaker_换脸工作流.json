{"last_node_id":61,"last_link_id":71,"nodes":[{"id":49,"type":"LoRALoader","pos":[555.0371402359016,229.41476858139043],"size":{"0":410.2291564941406,"1":91.69529724121094},"flags":{},"order":15,"mode":4,"inputs":[{"name":"pipe","type":"MODEL","link":59,"label":"pipe"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"shape":3,"label":"MODEL","slot_index":0}],"properties":{"Node name for S&R":"LoRALoader"},"widgets_values":["sd_xl_offset_example-lora_1.0.safetensors",0.5],"color":"#571a1a","bgcolor":"#6b2e2e","serialize_values":[null,null]},{"id":30,"type":"LoRALoader","pos":[574,91],"size":{"0":394.47357177734375,"1":90.14712524414062},"flags":{},"order":12,"mode":4,"inputs":[{"name":"pipe","type":"MODEL","link":67,"label":"pipe"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[59],"shape":3,"label":"MODEL","slot_index":0}],"properties":{"Node name for S&R":"LoRALoader"},"widgets_values":["xl_more_art-full_v1.safetensors",0.5],"color":"#571a1a","bgcolor":"#6b2e2e","serialize_values":[null,null]},{"id":39,"type":"SDXLPromptStyler","pos":[792.389230984754,1165.802187807668],"size":{"0":347.7062683105469,"1":123.29820251464844},"flags":{},"order":13,"mode":2,"inputs":[{"name":"text_positive","type":"STRING","link":52,"widget":{"name":"text_positive"},"slot_index":0,"label":"正面提示词"},{"name":"text_negative","type":"STRING","link":53,"widget":{"name":"text_negative"},"label":"负面提示词","slot_index":1}],"outputs":[{"name":"text_positive","type":"STRING","links":[46],"shape":3,"label":"正面提示词","slot_index":0},{"name":"text_negative","type":"STRING","links":[49],"shape":3,"label":"负面提示词","slot_index":1}],"properties":{"Node name for S&R":"SDXLPromptStyler"},"widgets_values":["man","","sai-photographic",false],"color":"#1a4357","bgcolor":"#2e576b","serialize_values":["man","",null,null]},{"id":41,"type":"StringFunction|pysssss","pos":[743.389230984754,1351.8021878076677],"size":{"0":542.1480712890625,"1":318.7370910644531},"flags":{},"order":16,"mode":2,"inputs":[{"name":"text_a","type":"STRING","link":46,"widget":{"name":"text_a"},"label":"文本_A"},{"name":"text_b","type":"STRING","link":47,"widget":{"name":"text_b"},"label":"文本_B"},{"name":"text_c","type":"STRING","link":48,"widget":{"name":"text_c"},"label":"文本_C"}],"outputs":[{"name":"STRING","type":"STRING","links":[],"shape":3,"label":"字符串","slot_index":0}],"properties":{"Node name for S&R":"StringFunction|pysssss"},"widgets_values":["append","yes","","",""],"color":"#232","bgcolor":"#353","serialize_values":[null,null,"","",""]},{"id":50,"type":"Note","pos":[36,416],"size":{"0":914.436767578125,"1":172.00640869140625},"flags":{},"order":0,"mode":0,"properties":{"text":""},"widgets_values":["1.pm_model_path:路径默（TencentARC/PhotoMaker）的话会存放在你C盘Users名称对应的.cache\\huggingface\\hub下。如果你不想存放在C盘需要将hub下的models--TencentARC--PhotoMaker目录整体迁移到其他盘符的任意位置\n\n2.LoRALoader:目前只匹配PhotoMaker自带的Lora，其他Lora加载器亲测下来不支持。如果有小伙伴有方法加载麻烦告知，彼此学习。"],"color":"#57431a","bgcolor":"#6b572e","serialize_values":[null]},{"id":43,"type":"StringFunction|pysssss","pos":[481.3892309847544,1783.8021878076688],"size":{"0":771.8496704101562,"1":274.17724609375},"flags":{},"order":17,"mode":2,"inputs":[{"name":"text_a","type":"STRING","link":49,"widget":{"name":"text_a"},"label":"文本_A"},{"name":"text_b","type":"STRING","link":50,"widget":{"name":"text_b"},"label":"文本_B"},{"name":"text_c","type":"STRING","link":51,"widget":{"name":"text_c"},"label":"文本_C"}],"outputs":[{"name":"STRING","type":"STRING","links":[],"shape":3,"label":"字符串","slot_index":0}],"properties":{"Node name for S&R":"StringFunction|pysssss"},"widgets_values":["append","yes","","",""],"color":"#322","bgcolor":"#533","serialize_values":[null,null,"","",""]},{"id":57,"type":"Note","pos":[1852.168971337776,141.1750872712839],"size":{"0":832.0488891601562,"1":506.0893249511719},"flags":{},"order":1,"mode":0,"properties":{"text":""},"widgets_values":["1.Ref Image Preprocessing:\n (1)如果是加载1张图片，ref_images_path就设置为空\n (2)mode就选择direct_input，直接输入\n (3)如果是多张图片,ref_images_path就指定一个存放多张图片的路径，人物保持1个人物形象可以多姿态，主要提取面部特征（多张人脸识别效果更加）\n (4)多张照片目录设定时，mode选择path_input\n\n2.NEW PhotoMaker Generation:\n  (1)pipe就是模型\n  (2)pil_image:链接图像点\n  (3)positive,negative：正反向提示词（这里可以通过合并字符串操作添加SDXL的风格提示词）\n  (4)batch_size(图片张数，最多4张。实测推荐1-2张，拉满4张，4090也会报显存)\n  (5)style_strength_ratio:风格强度比（这个值自行调整看效果）\n  (6)steps:步数，就是采样步数。默认是50，实测38-50期间都可以\n  (7)guidance_scale:指导尺度，个人理解为CFG值。也可能理解不是很准确，自行测试\n  (8)width,height：宽高\n\n总结：推荐指定path目录添加一个人物的多个照片，方便采取人脸信息。path输入的情况下选择path_input,单张照片的情况下选择direct_input"],"color":"#57431a","bgcolor":"#6b572e","serialize_values":[null]},{"id":3,"type":"LoadImage","pos":[1068.168971337777,116.17508727128387],"size":{"0":386.2686462402344,"1":542.5654296875},"flags":{},"order":2,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[4],"shape":3,"slot_index":0,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["https://bfs.esheep.com/bfs/aikobo-bfs/app/comfy/05013169d39f21e8218ce7a92990cb723382544c.png","image"],"color":"#1a5757","bgcolor":"#2e6b6b","serialize_values":[null,null]},{"id":4,"type":"Ref_Image_Preprocessing","pos":[1491,138],"size":{"0":343.7675476074219,"1":88.86250305175781},"flags":{},"order":10,"mode":0,"inputs":[{"name":"ref_image","type":"IMAGE","link":4,"label":"ref_image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[5],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"Ref_Image_Preprocessing"},"widgets_values":["C:\\Users\\jingr_4fy5bmv\\Downloads\\images\\savannablade","direct_Input"],"color":"#1a5757","bgcolor":"#2e6b6b","serialize_values":[null,null]},{"id":26,"type":"BaseModel_Loader_local","pos":[21.03714023590088,100.4147685813903],"size":{"0":526.967041015625,"1":94.42967987060547},"flags":{},"order":3,"mode":0,"outputs":[{"name":"pipe","type":"MODEL","links":[34,67],"shape":3,"slot_index":0,"label":"pipe"}],"properties":{"Node name for S&R":"BaseModel_Loader_local"},"widgets_values":["RealVisXL V3.0 Turbo(V3.0)"],"color":"#571a1a","bgcolor":"#6b2e2e","serialize_values":["3297_4975_5834@cfab6aec06.safetensors"]},{"id":27,"type":"PhotoMakerAdapter_Loader_local","pos":[46,259],"size":{"0":320,"1":82},"flags":{},"order":11,"mode":0,"inputs":[{"name":"pipe","type":"MODEL","link":34,"label":"pipe"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[70],"shape":3,"slot_index":0,"label":"MODEL"}],"properties":{"Node name for S&R":"PhotoMakerAdapter_Loader_local"},"widgets_values":["TencentARC/PhotoMaker","photomaker-v1.bin"],"color":"#571a1a","bgcolor":"#6b2e2e","serialize_values":[null,null]},{"id":2,"type":"Prompt_Styler","pos":[34,1161],"size":{"0":675.0797729492188,"1":290.4739990234375},"flags":{},"order":4,"mode":2,"outputs":[{"name":"positive_prompt","type":"STRING","links":[52],"shape":3,"slot_index":0,"label":"positive_prompt"},{"name":"negative_prompt","type":"STRING","links":[53],"shape":3,"slot_index":1,"label":"negative_prompt"}],"properties":{"Node name for S&R":"Prompt_Styler"},"widgets_values":["a woman img, fashion statement,half-body,red undershirt，Stylish Jacket，Center breast, (showing cleavage:1.2)","asymmetry, worst quality, low quality, illustration, 3d, 2d, painting, cartoons, sketch), open mouth","Photographic (Default)"],"color":"#1a4357","bgcolor":"#2e576b","serialize_values":["a woman img, fashion statement,half-body,red undershirt，Stylish Jacket，Center breast, (showing cleavage:1.2)","asymmetry, worst quality, low quality, illustration, 3d, 2d, painting, cartoons, sketch), open mouth",null]},{"id":58,"type":"Note","pos":[4,734],"size":{"0":598.1255493164062,"1":294.92578125},"flags":{},"order":5,"mode":0,"properties":{"text":""},"widgets_values":["重点：！！！(一定要看)\n\n1.Prompt_Styler:提示词中一定要包含img这个词，是腾讯训练模型是故意要求的。而且img这个单词在提示词中只能出现1次，超过1次则会报错。并且必须是小写。大写不生效！\n\n2.下载到本地使用时将忽略的节点打开。删除当前的Prompt_Styler，链接Prompt Group中的Prompt_Styler\n\n3.另外PhotoMaker模型对于人物的生成对比IPAdapterFaceId和Facewap等插件而言人物更像，特别是人物的脸型识别方面有明显增强。但是遗憾的是对亚洲人物的面部识别偏弱（就是不像）。对欧美人物的识别是非常相像的。吐槽点：腾讯你好歹是国内企业，对亚洲人物的识别和模型训练方面需要做功课呀~~~"],"color":"#57431a","bgcolor":"#6b572e","serialize_values":[null]},{"id":59,"type":"Note","pos":[1350,854],"size":{"0":389.7630615234375,"1":182.53370666503906},"flags":{},"order":6,"mode":0,"properties":{"text":""},"widgets_values":["如果您觉得注释和PhotoMaker基础工作流还不错可以添加我个人抖音账号\n\n\n抖音账号:jingruixiaox\n"],"color":"#57431a","bgcolor":"#6b572e","serialize_values":[null]},{"id":61,"type":"SaveImage","pos":[1828,775],"size":{"0":812.7403564453125,"1":973.935302734375},"flags":{},"order":18,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":71,"label":"图像"}],"properties":{},"widgets_values":["ComfyUI"],"serialize_values":["ComfyUI"]},{"id":1,"type":"NEW_PhotoMaker_Generation","pos":[1471.1689713377766,343.17508727128484],"size":{"0":320,"1":290},"flags":{},"order":14,"mode":0,"inputs":[{"name":"pipe","type":"MODEL","link":70,"label":"pipe"},{"name":"pil_image","type":"IMAGE","link":5,"slot_index":1,"label":"pil_image"},{"name":"positive","type":"STRING","link":68,"widget":{"name":"positive"},"label":"positive"},{"name":"negative","type":"STRING","link":69,"widget":{"name":"negative"},"label":"negative"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[71],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"NEW_PhotoMaker_Generation"},"widgets_values":["","",1,20,50,4.1000000000000005,1024,1024,206082687071836,"randomize"],"serialize_values":["","",null,null,null,null,null,null,null,null]},{"id":60,"type":"Prompt_Styler","pos":[610,743],"size":{"0":710.37158203125,"1":300.4248352050781},"flags":{},"order":7,"mode":0,"outputs":[{"name":"positive_prompt","type":"STRING","links":[68],"shape":3,"slot_index":0,"label":"positive_prompt"},{"name":"negative_prompt","type":"STRING","links":[69],"shape":3,"slot_index":1,"label":"negative_prompt"}],"properties":{"Node name for S&R":"Prompt_Styler"},"widgets_values":["a woman img, fashion statement,half-body,red undershirt，Stylish Jacket，Center breast, (showing cleavage:1.2)","asymmetry, worst quality, low quality, illustration, 3d, 2d, painting, cartoons, sketch), open mouth","Photographic (Default)"],"color":"#1a4357","bgcolor":"#2e576b","serialize_values":["a woman img, fashion statement,half-body,red undershirt，Stylish Jacket，Center breast, (showing cleavage:1.2)","asymmetry, worst quality, low quality, illustration, 3d, 2d, painting, cartoons, sketch), open mouth",null]},{"id":42,"type":"SDXLPromptStylerbyLighting","pos":[54.23136474543518,1442.4933637796546],"size":{"0":349.4066467285156,"1":199.43893432617188},"flags":{},"order":2,"mode":0,"outputs":[{"name":"positive_prompt_text_g","type":"STRING","links":[48],"shape":3,"label":"positive_prompt_text_g","slot_index":0},{"name":"negative_prompt_text_g","type":"STRING","links":[51],"shape":3,"label":"negative_prompt_text_g","slot_index":1}],"properties":{"Node name for S&R":"SDXLPromptStylerbyLighting"},"widgets_values":["","","Ambient","No"],"color":"#1a4357","bgcolor":"#2e576b"},{"id":40,"type":"SDXLPromptStylerbyCamera","pos":[52.231364745435194,1181.4933637796537],"size":{"0":357.00006103515625,"1":194},"flags":{},"order":1,"mode":0,"outputs":[{"name":"positive_prompt_text_g","type":"STRING","links":[47],"shape":3,"label":"positive_prompt_text_g","slot_index":0},{"name":"negative_prompt_text_g","type":"STRING","links":[50],"shape":3,"label":"negative_prompt_text_g","slot_index":1}],"properties":{"Node name for S&R":"SDXLPromptStylerbyCamera"},"widgets_values":["","","Nikon Coolpix P950","No"],"color":"#1a4357","bgcolor":"#2e576b"}],"links":[[4,3,0,4,0,"IMAGE"],[5,4,0,1,1,"IMAGE"],[34,26,0,27,0,"MODEL"],[46,39,0,41,0,"STRING"],[47,40,0,41,1,"STRING"],[48,42,0,41,2,"STRING"],[49,39,1,43,0,"STRING"],[50,40,1,43,1,"STRING"],[51,42,1,43,2,"STRING"],[52,2,0,39,0,"STRING"],[53,2,1,39,1,"STRING"],[59,30,0,49,0,"MODEL"],[67,26,0,30,0,"MODEL"],[68,60,0,1,2,"STRING"],[69,60,1,1,3,"STRING"],[70,27,0,1,0,"MODEL"],[71,1,0,61,0,"IMAGE"]],"groups":[{"title":"PhotoMaker-Model Group","bounding":[8,6,1027,684],"color":"#a64a4a","font_size":24,"locked":false},{"title":"Prompt Group","bounding":[24,1087,1272,981],"color":"#3f789e","font_size":24,"locked":false},{"title":"PhotoMaker Ksamper Group","bounding":[1049,10,1653,679],"color":"#88A","font_size":24,"locked":false},{"title":"Privew Image Group","bounding":[1335,701,1373,1056],"color":"#a1309b","font_size":24,"locked":false}],"config":{},"extra":{},"version":0.4}