{"last_node_id":94,"last_link_id":287,"nodes":[{"id":8,"type":"VAEDecode","pos":[2133.2648705285646,231.81463372589116],"size":[210,46],"flags":{},"order":31,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":7,"label":"samples"},{"name":"vae","type":"VAE","link":8,"label":"vae"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[197],"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"VAEDecode"},"locked":true},{"id":61,"type":"CLIPVisionEncode","pos":[351,632],"size":[274.4526672363281,48.977169036865234],"flags":{},"order":21,"mode":0,"inputs":[{"name":"clip_vision","type":"CLIP_VISION","link":198,"slot_index":0,"label":"clip_vision"},{"name":"image","type":"IMAGE","link":286,"label":"image"}],"outputs":[{"name":"CLIP_VISION_OUTPUT","type":"CLIP_VISION_OUTPUT","links":[200],"shape":3,"slot_index":0,"label":"CLIP_VISION_OUTPUT"}],"properties":{"Node name for S&R":"CLIPVisionEncode"},"locked":true},{"id":57,"type":"ApplyInstantID","pos":[1063.3089822607421,239.137619394989],"size":[260,266],"flags":{},"order":26,"mode":0,"inputs":[{"name":"instantid","type":"INSTANTID","link":189,"label":"instantid"},{"name":"insightface","type":"FACEANALYSIS","link":190,"label":"insightface"},{"name":"image_features","type":"IMAGE","link":256,"label":"image_features"},{"name":"model","type":"MODEL","link":182,"label":"model"},{"name":"positive","type":"CONDITIONING","link":266,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":187,"label":"negative"},{"name":"attn_mask","type":"MASK","link":null,"label":"attn_mask"},{"name":"image_kps","type":"IMAGE","link":null,"label":"image_kps"},{"name":"mask","type":"MASK","link":null,"label":"mask"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[245],"shape":3,"slot_index":0,"label":"MODEL"},{"name":"POSITIVE","type":"CONDITIONING","links":[184],"shape":3,"slot_index":1,"label":"POSITIVE"},{"name":"NEGATIVE","type":"CONDITIONING","links":[185],"shape":3,"slot_index":2,"label":"NEGATIVE"}],"properties":{"Node name for S&R":"ApplyInstantID"},"widgets_values":[1,0,1],"locked":true},{"id":11,"type":"InstantIDModelLoader","pos":[1057.3089822607421,20.137619394989013],"size":[238.72393798828125,58],"flags":{},"order":0,"mode":0,"outputs":[{"name":"INSTANTID","type":"INSTANTID","links":[189],"shape":3,"slot_index":0,"label":"INSTANTID"}],"properties":{"Node name for S&R":"InstantIDModelLoader"},"widgets_values":["ip-adapter.bin"],"locked":true},{"id":38,"type":"InstantIDFaceAnalysis","pos":[1064.3089822607421,131.13761939498897],"size":[227.09793090820312,58],"flags":{},"order":1,"mode":0,"outputs":[{"name":"FACEANALYSIS","type":"FACEANALYSIS","links":[190,193],"shape":3,"slot_index":0,"label":"FACEANALYSIS"}],"properties":{"Node name for S&R":"InstantIDFaceAnalysis"},"widgets_values":["CPU"],"locked":true},{"id":84,"type":"JWImageResizeByLongerSide","pos":[290,180],"size":[330,80],"flags":{},"order":15,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":255,"label":"image"},{"name":"size","type":"INT","link":254,"widget":{"name":"size"},"label":"size"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[256],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"JWImageResizeByLongerSide"},"widgets_values":[800,"bicubic"],"locked":true},{"id":83,"type":"JWInteger","pos":[350,60],"size":[210,60],"flags":{},"order":2,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[254],"shape":3,"label":"INT","slot_index":0}],"title":"定义原图尺寸","properties":{"Node name for S&R":"JWInteger"},"widgets_values":[800],"locked":true},{"id":85,"type":"GetImageSize_","pos":[758.7600474353026,784.4064968710326],"size":[210,46],"flags":{},"order":19,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":284,"label":"image"}],"outputs":[{"name":"width","type":"INT","links":[258],"shape":3,"label":"width","slot_index":0},{"name":"height","type":"INT","links":[259],"shape":3,"label":"height","slot_index":1}],"properties":{"Node name for S&R":"GetImageSize_"},"locked":true},{"id":58,"type":"FaceKeypointsPreprocessor","pos":[1061.3859344091798,688.7016170756532],"size":[248.05416870117188,46],"flags":{},"order":20,"mode":0,"inputs":[{"name":"faceanalysis","type":"FACEANALYSIS","link":193,"label":"faceanalysis"},{"name":"image","type":"IMAGE","link":285,"label":"image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[192],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"FaceKeypointsPreprocessor"},"locked":true},{"id":16,"type":"ControlNetLoader","pos":[1071.3859344091798,568.7016170756532],"size":[250.07241821289062,58],"flags":{},"order":3,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[53],"shape":3,"label":"CONTROL_NET"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["control_instant_id_sdxl.safetensors"],"locked":true,"serialize_values":[null]},{"id":74,"type":"VAEEncode","pos":[748.7600474353026,664.406496871033],"size":[210,46],"flags":{},"order":18,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":283,"label":"pixels"},{"name":"vae","type":"VAE","link":231,"label":"vae"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[],"shape":3,"slot_index":0,"label":"LATENT"}],"properties":{"Node name for S&R":"VAEEncode"},"locked":true},{"id":23,"type":"ControlNetApplyAdvanced","pos":[1390.2648705285644,363.8146337258912],"size":[315,166],"flags":{},"order":28,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":184,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":185,"label":"negative"},{"name":"control_net","type":"CONTROL_NET","link":53,"label":"control_net"},{"name":"image","type":"IMAGE","link":192,"label":"image"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[95],"shape":3,"slot_index":0,"label":"positive"},{"name":"negative","type":"CONDITIONING","links":[102],"shape":3,"slot_index":1,"label":"negative"}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[1,0,1],"locked":true,"serialize_values":[null,null,null]},{"id":62,"type":"unCLIPConditioning","pos":[718.7600474353026,504.40649687103286],"size":[262,102],"flags":{},"order":24,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":239,"slot_index":0,"label":"conditioning"},{"name":"clip_vision_output","type":"CLIP_VISION_OUTPUT","link":200,"label":"clip_vision_output"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[266],"shape":3,"slot_index":0,"label":"CONDITIONING"}],"properties":{"Node name for S&R":"unCLIPConditioning"},"widgets_values":[1,0],"locked":true,"serialize_values":[null,null]},{"id":80,"type":"RescaleClassifierFreeGuidanceTest","pos":[1399.2648705285644,611.8146337258912],"size":[315,58],"flags":{},"order":27,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":245,"label":"model"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[267],"shape":3,"slot_index":0,"label":"MODEL"}],"properties":{"Node name for S&R":"RescaleClassifierFreeGuidanceTest"},"widgets_values":[0.7],"locked":true,"serialize_values":[null]},{"id":40,"type":"CLIPTextEncode","pos":[348,303],"size":[286.3603515625,112.35245513916016],"flags":{},"order":13,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":123,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[187],"shape":3,"slot_index":0,"label":"CONDITIONING"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["low quality, blurry, malformed, distorted, nude, frame"],"color":"#332922","bgcolor":"#593930","locked":true,"serialize_values":["low quality, blurry, malformed, distorted, nude, frame"]},{"id":77,"type":"EmptyLatentImage","pos":[689.7600474353026,891.4064968710326],"size":[320,110],"flags":{},"order":23,"mode":0,"inputs":[{"name":"width","type":"INT","link":258,"widget":{"name":"width"},"label":"width"},{"name":"height","type":"INT","link":259,"widget":{"name":"height"},"label":"height"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[270],"shape":3,"slot_index":0,"label":"LATENT"}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[1016,1016,1],"locked":true,"serialize_values":[null,null,null]},{"id":75,"type":"CLIPTextEncode","pos":[342,466],"size":[286.3603515625,112.35245513916016],"flags":{},"order":14,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":235,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[239],"shape":3,"slot_index":0,"label":"CONDITIONING"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["(looking at viewer:1.3), photorealistic,"],"color":"#232","bgcolor":"#353","locked":true,"serialize_values":["(looking at viewer:1.3), photorealistic,"]},{"id":81,"type":"JWInteger","pos":[30,1200],"size":[210,60],"flags":{},"order":4,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[249,272],"shape":3,"label":"INT","slot_index":0}],"title":"定义原图尺寸","properties":{"Node name for S&R":"JWInteger"},"widgets_values":[1280],"locked":true},{"id":64,"type":"CLIPVisionLoader","pos":[0,620],"size":[315,58],"flags":{},"order":5,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[198],"shape":3,"label":"CLIP_VISION"}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["clip_vision_g.safetensors"],"locked":true,"serialize_values":[null]},{"id":4,"type":"CheckpointLoaderSimple","pos":[0,440],"size":[315,98],"flags":{},"order":6,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[182],"slot_index":0,"label":"MODEL"},{"name":"CLIP","type":"CLIP","links":[123,235],"slot_index":1,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[8,231],"slot_index":2,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["dreamshaperXL_turboDpmppSDE.safetensors"],"locked":true,"serialize_values":[null]},{"id":82,"type":"JWImageResizeByLongerSide","pos":[280,760],"size":[330,80],"flags":{},"order":16,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":250,"label":"image"},{"name":"size","type":"INT","link":249,"widget":{"name":"size"},"label":"size"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[283,284,285,286],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"JWImageResizeByLongerSide"},"widgets_values":[800,"bicubic"],"locked":true},{"id":78,"type":"Reroute","pos":[860,1050],"size":[75,26],"flags":{"pinned":true},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":270,"label":""}],"outputs":[{"name":"","type":"LATENT","links":[261],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":88,"type":"InsightFaceLoader","pos":[1050,1100],"size":[290,60],"flags":{},"order":7,"mode":0,"outputs":[{"name":"INSIGHTFACE","type":"INSIGHTFACE","links":[265],"shape":3,"slot_index":0,"label":"INSIGHTFACE"}],"properties":{"Node name for S&R":"InsightFaceLoader"},"widgets_values":["CPU"],"color":"#223","bgcolor":"#335","locked":true,"serialize_values":[null]},{"id":93,"type":"JWImageResizeByLongerSide","pos":[1050,1210],"size":[300,80],"flags":{},"order":22,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":277,"label":"image"},{"name":"size","type":"INT","link":272,"widget":{"name":"size"},"label":"size"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[273],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"JWImageResizeByLongerSide"},"widgets_values":[800,"bicubic"],"color":"#223","bgcolor":"#335","locked":true},{"id":87,"type":"CLIPVisionLoader","pos":[1050,990],"size":[290,60],"flags":{},"order":8,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[264],"shape":3,"slot_index":0,"label":"CLIP_VISION"}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["clip_vision_vit_h.safetensors"],"color":"#223","bgcolor":"#335","locked":true,"serialize_values":[null]},{"id":86,"type":"IPAdapterModelLoader","pos":[1050,870],"size":[290,60],"flags":{},"order":9,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[263],"shape":3,"slot_index":0,"label":"IPADAPTER"}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-plus_sdxl_vit-h.safetensors"],"color":"#223","bgcolor":"#335","locked":true,"serialize_values":[null]},{"id":89,"type":"IPAdapterApplyFaceID","pos":[1400,870],"size":[340,410],"flags":{},"order":29,"mode":0,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":263,"label":"ipadapter"},{"name":"clip_vision","type":"CLIP_VISION","link":264,"label":"clip_vision"},{"name":"insightface","type":"INSIGHTFACE","link":265,"label":"insightface"},{"name":"image","type":"IMAGE","link":273,"label":"image"},{"name":"model","type":"MODEL","link":267,"label":"model"},{"name":"attn_mask","type":"MASK","link":null,"label":"attn_mask"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[268],"shape":3,"slot_index":0,"label":"MODEL"}],"properties":{"Node name for S&R":"IPAdapterApplyFaceID"},"widgets_values":[0.9,0,"original",0,1,false,1,false],"color":"#223","bgcolor":"#335","locked":true,"serialize_values":[null,null,null,null,null,null,null,null]},{"id":3,"type":"KSampler","pos":[1772.2648705285644,227.81463372589116],"size":[320,470],"flags":{},"order":30,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":268,"label":"model"},{"name":"positive","type":"CONDITIONING","link":95,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":102,"label":"negative"},{"name":"latent_image","type":"LATENT","link":261,"label":"latent_image"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[7],"slot_index":0,"label":"LATENT"}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[762593763491437,"randomize",12,1.4000000000000001,"ddim","normal",1],"locked":true,"serialize_values":[null,null,null,null,null,null,null]},{"id":90,"type":"LoadImage","pos":[350,890],"size":[260,400],"flags":{},"order":10,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"独立IPA参考图（可以不用）","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["00380-3515475520 (1) (8).jpeg","image"],"color":"#223","locked":true,"serialize_values":[null,null]},{"id":94,"type":"Reroute","pos":[860,1110],"size":[75,26],"flags":{"pinned":false},"order":17,"mode":0,"inputs":[{"name":"","type":"*","link":287,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[277],"slot_index":0,"label":""}],"title":"头部位置参考图或者ipa参考图","properties":{"showOutputText":false,"horizontal":false}},{"id":13,"type":"LoadImage","pos":[10,50],"size":[260,320],"flags":{},"order":11,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[255],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"脸部参考图","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["234234 (1).jpeg","image"],"locked":true,"serialize_values":[null,null]},{"id":42,"type":"LoadImage","pos":[20,790],"size":[220.82643127441406,327.5079345703125],"flags":{},"order":12,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[250,287],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"头部位置参考图","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["00380-3515475520 (5).jpeg","image"],"locked":true,"serialize_values":[null,null]},{"id":60,"type":"SaveImage","pos":[2129.2648705285646,321.8146337258912],"size":[320,440],"flags":{},"order":32,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":197,"label":"images"}],"properties":{},"widgets_values":["InstantID_pose"],"locked":true,"serialize_values":["InstantID_pose"]}],"links":[[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[53,16,0,23,2,"CONTROL_NET"],[95,23,0,3,1,"CONDITIONING"],[102,23,1,3,2,"CONDITIONING"],[123,4,1,40,0,"CLIP"],[182,4,0,57,3,"MODEL"],[184,57,1,23,0,"CONDITIONING"],[185,57,2,23,1,"CONDITIONING"],[187,40,0,57,5,"CONDITIONING"],[189,11,0,57,0,"INSTANTID"],[190,38,0,57,1,"FACEANALYSIS"],[192,58,0,23,3,"IMAGE"],[193,38,0,58,0,"FACEANALYSIS"],[197,8,0,60,0,"IMAGE"],[198,64,0,61,0,"CLIP_VISION"],[200,61,0,62,1,"CLIP_VISION_OUTPUT"],[231,4,2,74,1,"VAE"],[235,4,1,75,0,"CLIP"],[239,75,0,62,0,"CONDITIONING"],[245,57,0,80,0,"MODEL"],[249,81,0,82,1,"INT"],[250,42,0,82,0,"IMAGE"],[254,83,0,84,1,"INT"],[255,13,0,84,0,"IMAGE"],[256,84,0,57,2,"IMAGE"],[258,85,0,77,0,"INT"],[259,85,1,77,1,"INT"],[261,78,0,3,3,"LATENT"],[263,86,0,89,0,"IPADAPTER"],[264,87,0,89,1,"CLIP_VISION"],[265,88,0,89,2,"INSIGHTFACE"],[266,62,0,57,4,"CONDITIONING"],[267,80,0,89,4,"MODEL"],[268,89,0,3,0,"MODEL"],[270,77,0,78,0,"*"],[272,81,0,93,1,"INT"],[273,93,0,89,3,"IMAGE"],[277,94,0,93,0,"IMAGE"],[283,82,0,74,0,"IMAGE"],[284,82,0,85,0,"IMAGE"],[285,82,0,58,1,"IMAGE"],[286,82,0,61,1,"IMAGE"],[287,42,0,94,0,"*"]],"groups":[{"title":"Group","bounding":[1379,153,1090,618],"color":"#3f789e","font_size":24,"locked":false},{"title":"Inputs","bounding":[-12,-36,657,1341],"color":"#3f789e","font_size":24,"locked":false},{"title":"Choose latent image or blank","bounding":[668,415,350,751],"color":"#a1309b","font_size":24,"locked":false},{"title":"Apply InstantID","bounding":[1036,-44,324,818],"color":"#8A8","font_size":24,"locked":false},{"title":"IPAdapter","bounding":[1035,792,730,510],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{},"version":0.4}