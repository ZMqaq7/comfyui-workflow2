{"last_node_id":197,"last_link_id":419,"nodes":[{"id":24,"type":"SegsToCombinedMask","pos":[1680.109385212402,6.517725006408796],"size":{"0":210,"1":26},"flags":{},"order":32,"mode":0,"inputs":[{"name":"segs","type":"SEGS","link":44,"label":"segs"}],"outputs":[{"name":"MASK","type":"MASK","links":[35],"shape":3,"label":"MASK","slot_index":0}],"properties":{"Node name for S&R":"SegsToCombinedMask"}},{"id":16,"type":"IPAdapterModelLoader","pos":[1326.109385212402,-341.4822749935912],"size":{"0":315,"1":58},"flags":{},"order":0,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[25],"shape":3,"label":"IPADAPTER"}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-faceid-plusv2_sd15.bin"],"serialize_values":[null]},{"id":17,"type":"CLIPVisionLoader","pos":[1326.109385212402,-219.48227499359123],"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[26],"shape":3,"label":"CLIP_VISION"}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["ip_adaptor_sd15_pytorch_model.bin"],"serialize_values":[null]},{"id":18,"type":"InsightFaceLoader","pos":[1330.109385212402,-106.4822749935912],"size":{"0":315,"1":58},"flags":{},"order":2,"mode":0,"outputs":[{"name":"INSIGHTFACE","type":"INSIGHTFACE","links":[27],"shape":3,"label":"INSIGHTFACE"}],"properties":{"Node name for S&R":"InsightFaceLoader"},"widgets_values":["CPU"],"serialize_values":[null]},{"id":23,"type":"Reroute","pos":[1199,28],"size":[75,26],"flags":{},"order":20,"mode":0,"inputs":[{"name":"","type":"*","link":32,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[42],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":31,"type":"Reroute","pos":[1234,310],"size":[75,26],"flags":{},"order":19,"mode":0,"inputs":[{"name":"","type":"*","link":52,"label":""}],"outputs":[{"name":"","type":"BBOX_DETECTOR","links":[53],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":22,"type":"UltralyticsDetectorProvider","pos":[920,6],"size":{"0":315,"1":78},"flags":{},"order":3,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[43,52],"shape":3,"label":"BBOX_DETECTOR","slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[],"shape":3,"label":"SEGM_DETECTOR"}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"],"serialize_values":[null]},{"id":19,"type":"LoadImage","pos":[924.9540487744139,-356.1507497631836],"size":{"0":315,"1":314},"flags":{},"order":4,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[28,32],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["https://bfs.esheep.com/bfs/aikobo-bfs/app/comfy/b5881c40e4ded2f7609ba4fec4a60f6467898756.png","image"],"serialize_values":[null,null]},{"id":65,"type":"ControlNetApplyAdvanced","pos":[1754.9458001796863,568.3705892167968],"size":{"0":344.1064758300781,"1":166},"flags":{},"order":69,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":177,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":141,"label":"negative"},{"name":"control_net","type":"CONTROL_NET","link":188,"label":"control_net","slot_index":2},{"name":"image","type":"IMAGE","link":176,"label":"image","slot_index":3}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[189],"shape":3,"label":"positive","slot_index":0},{"name":"negative","type":"CONDITIONING","links":[190],"shape":3,"label":"negative","slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.55,0,0.75],"serialize_values":[null,null,null]},{"id":66,"type":"ControlNetLoaderAdvanced","pos":[1754.9458001796863,788.3705892167968],"size":{"0":338.766357421875,"1":58},"flags":{},"order":5,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null,"label":"timestep_keyframe"}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[188],"shape":3,"label":"CONTROL_NET"}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_sd15_inpaint_depth_hand_fp16.safetensors"],"serialize_values":[null]},{"id":87,"type":"ControlNetApplyAdvanced","pos":[2141.9458001796856,568.3705892167968],"size":{"0":334.27203369140625,"1":166},"flags":{},"order":73,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":189,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":190,"label":"negative"},{"name":"control_net","type":"CONTROL_NET","link":195,"label":"control_net","slot_index":2},{"name":"image","type":"IMAGE","link":194,"label":"image","slot_index":3}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[],"shape":3,"label":"positive","slot_index":0},{"name":"negative","type":"CONDITIONING","links":[],"shape":3,"label":"negative","slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.75,0,0.75],"serialize_values":[null,null,null]},{"id":88,"type":"ControlNetLoaderAdvanced","pos":[2140.9458001796856,789.3705892167968],"size":{"0":338.766357421875,"1":58},"flags":{},"order":6,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null,"label":"timestep_keyframe"}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[195],"shape":3,"label":"CONTROL_NET"}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11f1p_sd15_depth.pth"],"serialize_values":[null]},{"id":97,"type":"PreviewImage","pos":[2140.9458001796856,906.3705892167968],"size":{"0":342.9409484863281,"1":277.4531555175781},"flags":{},"order":70,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":200,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":68,"type":"ImpactKSamplerAdvancedBasicPipe","pos":[2562.9458001796856,502.3705892167968],"size":{"0":315,"1":314},"flags":{},"order":74,"mode":0,"inputs":[{"name":"basic_pipe","type":"BASIC_PIPE","link":193,"label":"basic_pipe"},{"name":"latent_image","type":"LATENT","link":187,"label":"latent_image"},{"name":"noise_seed","type":"INT","link":235,"widget":{"name":"noise_seed"},"label":"noise_seed"},{"name":"steps","type":"INT","link":350,"widget":{"name":"steps"},"label":"steps"}],"outputs":[{"name":"BASIC_PIPE","type":"BASIC_PIPE","links":[],"shape":3,"label":"BASIC_PIPE","slot_index":0},{"name":"LATENT","type":"LATENT","links":[154],"shape":3,"label":"LATENT","slot_index":1},{"name":"VAE","type":"VAE","links":[155],"shape":3,"label":"VAE","slot_index":2}],"properties":{"Node name for S&R":"ImpactKSamplerAdvancedBasicPipe"},"widgets_values":[true,1011861466474009,"randomize",30,8,"dpmpp_2m_sde","karras",0,10000,false],"serialize_values":[null,null,null,null,null,null,null,null,null,null]},{"id":104,"type":"MaskToImage","pos":[1735.9458001796863,1165.3705892167968],"size":{"0":353.62005615234375,"1":28.09408187866211},"flags":{},"order":72,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":211,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[212],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":105,"type":"PreviewImage","pos":[2142.9458001796856,1235.3705892167968],"size":{"0":334.27203369140625,"1":261.9070739746094},"flags":{},"order":75,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":212,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":84,"type":"VAEEncodeForInpaint","pos":[2577.9458001796856,901.3705892167968],"size":{"0":299.8499755859375,"1":98},"flags":{},"order":71,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":240,"label":"pixels","slot_index":0},{"name":"vae","type":"VAE","link":234,"label":"vae"},{"name":"mask","type":"MASK","link":186,"label":"mask"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[187],"shape":3,"label":"LATENT","slot_index":0}],"properties":{"Node name for S&R":"VAEEncodeForInpaint"},"widgets_values":[6],"serialize_values":[null]},{"id":122,"type":"Reroute","pos":[1648.9458001796863,952.3705892167968],"size":[75,26],"flags":{},"order":56,"mode":0,"inputs":[{"name":"","type":"*","link":233,"label":""}],"outputs":[{"name":"","type":"VAE","links":[234],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":124,"type":"Reroute","pos":[1648.9458001796863,912.3705892167968],"size":[75,26],"flags":{},"order":67,"mode":0,"inputs":[{"name":"","type":"*","link":238,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[239,240],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":76,"type":"VAEDecode","pos":[2995.9458001796856,522.3705892167968],"size":{"0":210,"1":46},"flags":{},"order":76,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":154,"label":"samples"},{"name":"vae","type":"VAE","link":155,"label":"vae"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[156,241],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":77,"type":"PreviewImage","pos":[3337,525],"size":{"0":507.2615966796875,"1":695.5584106445312},"flags":{},"order":77,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":156,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":55,"type":"PreviewImage","pos":[6502,508],"size":{"0":958.258544921875,"1":1720.00927734375},"flags":{},"order":88,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":137,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":45,"type":"FaceDetailer","pos":[7991.79450861079,469.24426842758714],"size":{"0":506.4000244140625,"1":856},"flags":{},"order":91,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":267,"label":"image"},{"name":"model","type":"MODEL","link":83,"label":"model"},{"name":"clip","type":"CLIP","link":84,"label":"clip"},{"name":"vae","type":"VAE","link":85,"label":"vae"},{"name":"positive","type":"CONDITIONING","link":86,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":87,"label":"negative"},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":89,"label":"bbox_detector"},{"name":"sam_model_opt","type":"SAM_MODEL","link":373,"label":"sam_model_opt"},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null,"label":"segm_detector_opt"},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"detailer_hook"},{"name":"seed","type":"INT","link":258,"widget":{"name":"seed"},"label":"seed"},{"name":"steps","type":"INT","link":360,"widget":{"name":"steps"},"label":"steps"}],"outputs":[{"name":"image","type":"IMAGE","links":[88],"shape":3,"label":"image","slot_index":0},{"name":"cropped_refined","type":"IMAGE","links":null,"shape":6,"label":"cropped_refined"},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":null,"shape":6,"label":"cropped_enhanced_alpha"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"mask"},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":null,"shape":3,"label":"detailer_pipe"},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"cnet_images"}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[384,true,1920,220693432408867,"randomize",30,8,"dpmpp_2m_sde","karras",0.5,5,true,true,0.5,10,3,"center-1",0,0.93,0,0.7,"False",10,"",1,false],"serialize_values":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"",null,null]},{"id":15,"type":"IPAdapterApplyFaceID","pos":[1965.109385212402,-92.4822749935912],"size":{"0":315,"1":326},"flags":{},"order":39,"mode":0,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":25,"label":"ipadapter","slot_index":0},{"name":"clip_vision","type":"CLIP_VISION","link":26,"label":"clip_vision","slot_index":1},{"name":"insightface","type":"INSIGHTFACE","link":27,"label":"insightface","slot_index":2},{"name":"image","type":"IMAGE","link":28,"label":"image","slot_index":3},{"name":"model","type":"MODEL","link":364,"label":"model","slot_index":4},{"name":"attn_mask","type":"MASK","link":35,"label":"attn_mask","slot_index":5}],"outputs":[{"name":"MODEL","type":"MODEL","links":[281],"shape":3,"label":"MODEL","slot_index":0}],"properties":{"Node name for S&R":"IPAdapterApplyFaceID"},"widgets_values":[1,0,"original",0,1,true,1,false],"serialize_values":[null,null,null,null,null,null,null,null]},{"id":155,"type":"CLIPSetLastLayer","pos":[-1732.483454877512,742.6232563470395],"size":{"0":315,"1":58},"flags":{},"order":34,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":321,"label":"clip"}],"outputs":[{"name":"CLIP","type":"CLIP","links":[322,323],"shape":3,"label":"CLIP","slot_index":0}],"properties":{"Node name for S&R":"CLIPSetLastLayer"},"widgets_values":[-2],"serialize_values":[null]},{"id":145,"type":"Reroute","pos":[-1320.7897932464602,364.31577000335716],"size":[75,26],"flags":{},"order":47,"mode":0,"inputs":[{"name":"","type":"*","link":282,"label":""}],"outputs":[{"name":"","type":"MODEL","links":[337],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":123,"type":"Reroute","pos":[153,902],"size":[75,26],"flags":{},"order":66,"mode":0,"inputs":[{"name":"","type":"*","link":342,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[238],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":9,"type":"SaveImage","pos":[263,585],"size":{"0":329.09765625,"1":456.6004333496094},"flags":{},"order":65,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":341,"label":"images"}],"properties":{},"widgets_values":["ComfyUI"],"serialize_values":["ComfyUI"]},{"id":165,"type":"VAEDecode","pos":[-80,532],"size":{"0":210,"1":46},"flags":{},"order":63,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":339,"label":"samples"},{"name":"vae","type":"VAE","link":381,"label":"vae","slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[341,342],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":119,"type":"Reroute","pos":[-507,405],"size":[75,26],"flags":{},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":346,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[347],"label":"","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":167,"type":"Reroute","pos":[-506,445],"size":[75,26],"flags":{},"order":24,"mode":0,"inputs":[{"name":"","type":"*","link":348,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[349],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":125,"type":"Reroute","pos":[3193,292],"size":[75,26],"flags":{},"order":78,"mode":0,"inputs":[{"name":"","type":"*","link":241,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[243],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":126,"type":"Reroute","pos":[4310,308],"size":[75,26],"flags":{},"order":79,"mode":0,"inputs":[{"name":"","type":"*","link":243,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[244],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":137,"type":"Reroute","pos":[6472,297],"size":[75,26],"flags":{},"order":89,"mode":0,"inputs":[{"name":"","type":"*","link":265,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[266],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":171,"type":"Reroute","pos":[7855,446],"size":[75,26],"flags":{},"order":48,"mode":0,"inputs":[{"name":"","type":"*","link":359,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[360],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":103,"type":"Reroute","pos":[7855,408],"size":[75,26],"flags":{},"order":49,"mode":0,"inputs":[{"name":"","type":"*","link":209,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[258],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":30,"type":"FromBasicPipe_v2","pos":[7772,375],"size":{"0":267,"1":126},"flags":{"collapsed":true},"order":64,"mode":0,"inputs":[{"name":"basic_pipe","type":"BASIC_PIPE","link":358,"label":"basic_pipe"}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[],"shape":3,"label":"basic_pipe","slot_index":0},{"name":"model","type":"MODEL","links":[83],"shape":3,"label":"model","slot_index":1},{"name":"clip","type":"CLIP","links":[84],"shape":3,"label":"clip","slot_index":2},{"name":"vae","type":"VAE","links":[85],"shape":3,"label":"vae","slot_index":3},{"name":"positive","type":"CONDITIONING","links":[86],"shape":3,"label":"positive","slot_index":4},{"name":"negative","type":"CONDITIONING","links":[87],"shape":3,"label":"negative","slot_index":5}],"properties":{"Node name for S&R":"FromBasicPipe_v2"}},{"id":138,"type":"Reroute","pos":[7845,308],"size":[75,26],"flags":{},"order":90,"mode":0,"inputs":[{"name":"","type":"*","link":266,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[267],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":32,"type":"Reroute","pos":[7836,285],"size":[75,26],"flags":{},"order":26,"mode":0,"inputs":[{"name":"","type":"*","link":53,"label":""}],"outputs":[{"name":"","type":"BBOX_DETECTOR","links":[89],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":101,"type":"Reroute","pos":[4296,399],"size":[75,26],"flags":{},"order":38,"mode":0,"inputs":[{"name":"","type":"*","link":205,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[206,405],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":169,"type":"Reroute","pos":[4289,436],"size":[75,26],"flags":{},"order":37,"mode":0,"inputs":[{"name":"","type":"*","link":351,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[352,407],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":168,"type":"Reroute","pos":[2456,441],"size":[75,26],"flags":{},"order":30,"mode":0,"inputs":[{"name":"","type":"*","link":349,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[350,351],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":100,"type":"Reroute","pos":[2454,406],"size":[75,26],"flags":{},"order":31,"mode":0,"inputs":[{"name":"","type":"*","link":347,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[205,235],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":144,"type":"Reroute","pos":[2336,377],"size":[75,26],"flags":{},"order":44,"mode":0,"inputs":[{"name":"","type":"*","link":281,"label":""}],"outputs":[{"name":"","type":"MODEL","links":[282],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":69,"type":"FromBasicPipe_v2","pos":[1533,388],"size":{"0":267,"1":126},"flags":{"collapsed":true},"order":52,"mode":0,"inputs":[{"name":"basic_pipe","type":"BASIC_PIPE","link":345,"label":"basic_pipe"}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[193,199],"shape":3,"label":"basic_pipe","slot_index":0},{"name":"model","type":"MODEL","links":[],"shape":3,"label":"model","slot_index":1},{"name":"clip","type":"CLIP","links":[],"shape":3,"label":"clip","slot_index":2},{"name":"vae","type":"VAE","links":[233],"shape":3,"label":"vae","slot_index":3},{"name":"positive","type":"CONDITIONING","links":[177],"shape":3,"label":"positive","slot_index":4},{"name":"negative","type":"CONDITIONING","links":[141],"shape":3,"label":"negative","slot_index":5}],"properties":{"Node name for S&R":"FromBasicPipe_v2"}},{"id":173,"type":"Reroute","pos":[-163,361],"size":[75,26],"flags":{},"order":54,"mode":0,"inputs":[{"name":"","type":"*","link":362,"label":""}],"outputs":[{"name":"","type":"VAE","links":[],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":159,"type":"ToBasicPipe","pos":[-1199,377],"size":{"0":241.79998779296875,"1":106},"flags":{"collapsed":true},"order":50,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":337,"label":"model","slot_index":0},{"name":"clip","type":"CLIP","link":327,"label":"clip","slot_index":1},{"name":"vae","type":"VAE","link":326,"label":"vae","slot_index":2},{"name":"positive","type":"CONDITIONING","link":324,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":325,"label":"negative"}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[331],"shape":3,"label":"basic_pipe","slot_index":0}],"properties":{"Node name for S&R":"ToBasicPipe"}},{"id":151,"type":"CheckpointLoaderSimple","pos":[-2080.483454877512,478.623256347039],"size":{"0":315,"1":98},"flags":{},"order":7,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[365],"shape":3,"label":"MODEL","slot_index":0},{"name":"CLIP","type":"CLIP","links":[319,327],"shape":3,"label":"CLIP","slot_index":1},{"name":"VAE","type":"VAE","links":null,"shape":3,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["墨幽人造人(v1080-none)"],"serialize_values":["833_4584_5364@d196f0825b.safetensors"]},{"id":160,"type":"Reroute","pos":[-1941,-14],"size":[75,26],"flags":{},"order":33,"mode":0,"inputs":[{"name":"","type":"*","link":367,"slot_index":0,"label":""}],"outputs":[{"name":"","type":"MODEL","links":[364],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":156,"type":"VAELoader","pos":[-2089,1096],"size":{"0":315,"1":58},"flags":{},"order":8,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[326],"shape":3,"label":"VAE"}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["vae-ft-mse-840000-ema-pruned@735e4c3a44.safetensors"],"serialize_values":[null]},{"id":157,"type":"BNK_CLIPTextEncodeAdvanced","pos":[-1329.483454877512,607.623256347039],"size":{"0":400,"1":200},"flags":{},"order":40,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":322,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[324],"shape":3,"label":"CONDITIONING","slot_index":0}],"properties":{"Node name for S&R":"BNK_CLIPTextEncodeAdvanced"},"widgets_values":["best quality, masterpiece, photorealistic, 1girl, solo, full body, standing, long black straight hair, blunt bangs, looking at viewer, smile, lo dress, layered dress, long dress, lace-trimmed dress, pink dress, frills, puffy sleeves, wide sleeves, bow, jewelry, long sleeves, hat, white thighhighs, high heels, simple background, ","mean","A1111"],"serialize_values":["best quality, masterpiece, photorealistic, 1girl, solo, full body, standing, long black straight hair, blunt bangs, looking at viewer, smile, lo dress, layered dress, long dress, lace-trimmed dress, pink dress, frills, puffy sleeves, wide sleeves, bow, jewelry, long sleeves, hat, white thighhighs, high heels, simple background, ",null,null]},{"id":154,"type":"LoraLoader","pos":[-2086.483454877512,853.6232563470395],"size":{"0":315,"1":126},"flags":{},"order":28,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":366,"label":"model"},{"name":"clip","type":"CLIP","link":320,"label":"clip"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[367],"shape":3,"label":"MODEL"},{"name":"CLIP","type":"CLIP","links":[321],"shape":3,"label":"CLIP","slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["Lolita fashion dress | 洛丽塔裙子(Classic style 4)",0.65,1],"serialize_values":["241_4923_5758@4185a2af76",null,null]},{"id":153,"type":"LoraLoader","pos":[-2083.483454877512,653.623256347039],"size":{"0":315,"1":126},"flags":{},"order":21,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":365,"label":"model"},{"name":"clip","type":"CLIP","link":319,"label":"clip"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[366],"shape":3,"label":"MODEL","slot_index":0},{"name":"CLIP","type":"CLIP","links":[320],"shape":3,"label":"CLIP","slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["Add More Details - Detail Enhancer / Twe(v1)",0.5,1],"serialize_values":["3402_5137_6006@d9cf2f88de",null,null]},{"id":28,"type":"ImpactSimpleDetectorSEGS","pos":[1325.109385212402,6.517725006408796],"size":{"0":313.2889099121094,"1":310},"flags":{},"order":27,"mode":0,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":43,"label":"bbox_detector","slot_index":0},{"name":"image","type":"IMAGE","link":42,"label":"image"},{"name":"sam_model_opt","type":"SAM_MODEL","link":368,"label":"sam_model_opt","slot_index":2},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null,"label":"segm_detector_opt"}],"outputs":[{"name":"SEGS","type":"SEGS","links":[44],"shape":3,"label":"SEGS","slot_index":0}],"properties":{"Node name for S&R":"ImpactSimpleDetectorSEGS"},"widgets_values":[0.5,0,3,10,0.5,0,0,0.7,0],"serialize_values":[null,null,null,null,null,null,null,null,null]},{"id":174,"type":"SAMLoader","pos":[919,131],"size":{"0":315,"1":82},"flags":{},"order":9,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[368,369],"shape":3,"label":"SAM_MODEL","slot_index":0}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","AUTO"],"serialize_values":[null,null]},{"id":175,"type":"Reroute","pos":[1230,327],"size":[75,26],"flags":{},"order":22,"mode":0,"inputs":[{"name":"","type":"*","link":369,"label":""}],"outputs":[{"name":"","type":"SAM_MODEL","links":[370],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":177,"type":"Reroute","pos":[7841,244],"size":[75,26],"flags":{},"order":35,"mode":0,"inputs":[{"name":"","type":"*","link":372,"label":""}],"outputs":[{"name":"","type":"SAM_MODEL","links":[373],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":64,"type":"UltimateSDUpscale","pos":[6167,508],"size":{"0":315,"1":614},"flags":{},"order":87,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":416,"label":"image"},{"name":"model","type":"MODEL","link":130,"label":"model"},{"name":"positive","type":"CONDITIONING","link":135,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":134,"label":"negative"},{"name":"vae","type":"VAE","link":131,"label":"vae"},{"name":"upscale_model","type":"UPSCALE_MODEL","link":136,"label":"upscale_model"},{"name":"seed","type":"INT","link":257,"widget":{"name":"seed"},"label":"seed"},{"name":"steps","type":"INT","link":356,"widget":{"name":"steps"},"label":"steps"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[137,265],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"UltimateSDUpscale"},"widgets_values":[1.1,817246166281315,"randomize",30,8,"dpmpp_2m_sde","karras",0.2,"Chess",512,512,8,32,"Half Tile",1,64,8,16,true,false],"serialize_values":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]},{"id":180,"type":"ControlNetLoaderAdvanced","pos":[-736.0133722308346,1933.2510205514527],"size":{"0":327.6000061035156,"1":60.74545669555664},"flags":{},"order":10,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null,"label":"timestep_keyframe"}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[374],"shape":3,"label":"CONTROL_NET"}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11p_sd15_openpose.pth"],"serialize_values":[null]},{"id":183,"type":"Reroute","pos":[-86,1133],"size":[75,26],"flags":{},"order":57,"mode":0,"inputs":[{"name":"","type":"*","link":380,"label":""}],"outputs":[{"name":"","type":"VAE","links":[381],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":178,"type":"ControlNetApplyAdvanced","pos":[-742.0133722308346,1704.2510205514527],"size":{"0":325.8154602050781,"1":166},"flags":{},"order":58,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":378,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":379,"label":"negative"},{"name":"control_net","type":"CONTROL_NET","link":374,"label":"control_net","slot_index":2},{"name":"image","type":"IMAGE","link":375,"label":"image","slot_index":3}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[385],"shape":3,"label":"positive","slot_index":0},{"name":"negative","type":"CONDITIONING","links":[384],"shape":3,"label":"negative","slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[1,0,1],"serialize_values":[null,null,null]},{"id":182,"type":"FromBasicPipe_v2","pos":[-820,1154],"size":{"0":267,"1":126},"flags":{"collapsed":false},"order":53,"mode":0,"inputs":[{"name":"basic_pipe","type":"BASIC_PIPE","link":377,"label":"basic_pipe","slot_index":0}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[],"shape":3,"label":"basic_pipe","slot_index":0},{"name":"model","type":"MODEL","links":[386],"shape":3,"label":"model","slot_index":1},{"name":"clip","type":"CLIP","links":null,"shape":3,"label":"clip"},{"name":"vae","type":"VAE","links":[380],"shape":3,"label":"vae","slot_index":3},{"name":"positive","type":"CONDITIONING","links":[378],"shape":3,"label":"positive","slot_index":4},{"name":"negative","type":"CONDITIONING","links":[379],"shape":3,"label":"negative","slot_index":5}],"properties":{"Node name for S&R":"FromBasicPipe_v2"}},{"id":163,"type":"FromBasicPipe_v2","pos":[-963,371],"size":{"0":267,"1":126},"flags":{"collapsed":true},"order":51,"mode":0,"inputs":[{"name":"basic_pipe","type":"BASIC_PIPE","link":331,"label":"basic_pipe","slot_index":0}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[345,377],"shape":3,"label":"basic_pipe","slot_index":0},{"name":"model","type":"MODEL","links":[],"shape":3,"label":"model","slot_index":1},{"name":"clip","type":"CLIP","links":null,"shape":3,"label":"clip"},{"name":"vae","type":"VAE","links":[362],"shape":3,"label":"vae","slot_index":3},{"name":"positive","type":"CONDITIONING","links":[],"shape":3,"label":"positive","slot_index":4},{"name":"negative","type":"CONDITIONING","links":[],"shape":3,"label":"negative","slot_index":5}],"properties":{"Node name for S&R":"FromBasicPipe_v2"}},{"id":161,"type":"KSamplerAdvanced //Inspire","pos":[-430,532],"size":{"0":315,"1":450},"flags":{},"order":60,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":386,"label":"model"},{"name":"positive","type":"CONDITIONING","link":385,"label":"positive","slot_index":1},{"name":"negative","type":"CONDITIONING","link":384,"label":"negative"},{"name":"latent_image","type":"LATENT","link":338,"label":"latent_image"},{"name":"noise_opt","type":"NOISE","link":null,"label":"noise_opt"},{"name":"noise_seed","type":"INT","link":335,"widget":{"name":"noise_seed"},"label":"noise_seed"},{"name":"steps","type":"INT","link":336,"widget":{"name":"steps"},"label":"steps"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[339],"shape":3,"label":"LATENT","slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced //Inspire"},"widgets_values":[true,669585009150586,"randomize",30,8,"dpmpp_2m_sde","karras",0,10000,"GPU(=A1111)",false,"incremental",0,0],"serialize_values":[null,null,null,null,null,null,null,null,null,null,null,null,null,null]},{"id":83,"type":"PreviewImage","pos":[5004,515],"size":{"0":586.3237915039062,"1":849.98193359375},"flags":{},"order":81,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":169,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":80,"type":"FromBasicPipe_v2","pos":[4217,371],"size":{"0":267,"1":126},"flags":{"collapsed":true},"order":55,"mode":0,"inputs":[{"name":"basic_pipe","type":"BASIC_PIPE","link":199,"label":"basic_pipe","slot_index":0}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[399],"shape":3,"label":"basic_pipe","slot_index":0},{"name":"model","type":"MODEL","links":[163],"shape":3,"label":"model","slot_index":1},{"name":"clip","type":"CLIP","links":[164],"shape":3,"label":"clip","slot_index":2},{"name":"vae","type":"VAE","links":[165],"shape":3,"label":"vae","slot_index":3},{"name":"positive","type":"CONDITIONING","links":[166],"shape":3,"label":"positive","slot_index":4},{"name":"negative","type":"CONDITIONING","links":[167],"shape":3,"label":"negative","slot_index":5}],"properties":{"Node name for S&R":"FromBasicPipe_v2"}},{"id":133,"type":"Reroute","pos":[4909,296],"size":[75,26],"flags":{},"order":82,"mode":0,"inputs":[{"name":"","type":"*","link":259,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[400],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":192,"type":"Reroute","pos":[5452,298],"size":[75,26],"flags":{},"order":83,"mode":0,"inputs":[{"name":"","type":"*","link":400,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[409],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":193,"type":"Reroute","pos":[5443,338],"size":[75,26],"flags":{},"order":59,"mode":0,"inputs":[{"name":"","type":"*","link":399,"label":""}],"outputs":[{"name":"","type":"BASIC_PIPE","links":[402,410],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":195,"type":"Reroute","pos":[5442,380],"size":[75,26],"flags":{},"order":43,"mode":0,"inputs":[{"name":"","type":"*","link":405,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[406,411],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":194,"type":"Reroute","pos":[5438,425],"size":[75,26],"flags":{},"order":42,"mode":0,"inputs":[{"name":"","type":"*","link":407,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[408,412],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":176,"type":"Reroute","pos":[4313,267],"size":[75,26],"flags":{},"order":29,"mode":0,"inputs":[{"name":"","type":"*","link":370,"label":""}],"outputs":[{"name":"","type":"SAM_MODEL","links":[371,372,413],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":196,"type":"Reroute","pos":[5434,246],"size":[75,26],"flags":{},"order":36,"mode":0,"inputs":[{"name":"","type":"*","link":413,"label":""}],"outputs":[{"name":"","type":"SAM_MODEL","links":[414],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":189,"type":"Reroute","pos":[6111,176],"size":[75,26],"flags":{},"order":86,"mode":0,"inputs":[{"name":"","type":"*","link":389,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[416],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":47,"type":"FromBasicPipe_v2","pos":[5977,368],"size":{"0":267,"1":126},"flags":{"collapsed":true},"order":61,"mode":0,"inputs":[{"name":"basic_pipe","type":"BASIC_PIPE","link":402,"label":"basic_pipe","slot_index":0}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[358],"shape":3,"label":"basic_pipe","slot_index":0},{"name":"model","type":"MODEL","links":[130],"shape":3,"label":"model","slot_index":1},{"name":"clip","type":"CLIP","links":[],"shape":3,"label":"clip","slot_index":2},{"name":"vae","type":"VAE","links":[131],"shape":3,"label":"vae","slot_index":3},{"name":"positive","type":"CONDITIONING","links":[135],"shape":3,"label":"positive","slot_index":4},{"name":"negative","type":"CONDITIONING","links":[134],"shape":3,"label":"negative","slot_index":5}],"properties":{"Node name for S&R":"FromBasicPipe_v2"}},{"id":102,"type":"Reroute","pos":[6052,408],"size":[75,26],"flags":{},"order":46,"mode":0,"inputs":[{"name":"","type":"*","link":406,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[209,257],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":170,"type":"Reroute","pos":[6047,448],"size":[75,26],"flags":{},"order":45,"mode":0,"inputs":[{"name":"","type":"*","link":408,"label":"","widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[356,359],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":50,"type":"UpscaleModelLoader","pos":[5842,605],"size":{"0":254.2037353515625,"1":58},"flags":{},"order":11,"mode":0,"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[136],"shape":3,"label":"UPSCALE_MODEL","slot_index":0}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["4x-UltraSharp.pth"],"serialize_values":[null]},{"id":188,"type":"PreviewImage","pos":[6196,-792],"size":{"0":519.560791015625,"1":888.0610961914062},"flags":{},"order":85,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":388,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":186,"type":"FaceDetailer","pos":[5585,-794],"size":{"0":506.4000244140625,"1":856},"flags":{},"order":84,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":409,"label":"image"},{"name":"model","type":"MODEL","link":391,"label":"model"},{"name":"clip","type":"CLIP","link":390,"label":"clip"},{"name":"vae","type":"VAE","link":394,"label":"vae"},{"name":"positive","type":"CONDITIONING","link":417,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":418,"label":"negative"},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":387,"label":"bbox_detector"},{"name":"sam_model_opt","type":"SAM_MODEL","link":414,"label":"sam_model_opt","slot_index":7},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null,"label":"segm_detector_opt"},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"detailer_hook"},{"name":"seed","type":"INT","link":411,"widget":{"name":"seed"},"label":"seed"},{"name":"steps","type":"INT","link":412,"widget":{"name":"steps"},"label":"steps"}],"outputs":[{"name":"image","type":"IMAGE","links":[388,389],"shape":3,"label":"image","slot_index":0},{"name":"cropped_refined","type":"IMAGE","links":null,"shape":6,"label":"cropped_refined","slot_index":1},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":null,"shape":6,"label":"cropped_enhanced_alpha"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"mask"},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":null,"shape":3,"label":"detailer_pipe"},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"cnet_images","slot_index":5}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[384,true,1024,792735077270200,"randomize",30,8,"dpmpp_2m_sde","karras",0.5,5,true,true,0.5,10,3,"center-1",0,0.93,0,0.7,"False",10,"",1,false],"serialize_values":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"",null,null]},{"id":190,"type":"FromBasicPipe_v2","pos":[5368,-863],"size":{"0":267,"1":126},"flags":{"collapsed":true},"order":62,"mode":0,"inputs":[{"name":"basic_pipe","type":"BASIC_PIPE","link":410,"label":"basic_pipe","slot_index":0}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":null,"shape":3,"label":"basic_pipe"},{"name":"model","type":"MODEL","links":[391],"shape":3,"label":"model","slot_index":1},{"name":"clip","type":"CLIP","links":[390],"shape":3,"label":"clip","slot_index":2},{"name":"vae","type":"VAE","links":[394],"shape":3,"label":"vae","slot_index":3},{"name":"positive","type":"CONDITIONING","links":[417],"shape":3,"label":"positive","slot_index":4},{"name":"negative","type":"CONDITIONING","links":[418],"shape":3,"label":"negative","slot_index":5}],"properties":{"Node name for S&R":"FromBasicPipe_v2"}},{"id":187,"type":"UltralyticsDetectorProvider","pos":[5221,-673],"size":{"0":315,"1":78},"flags":{},"order":12,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[387],"shape":3,"label":"BBOX_DETECTOR","slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[],"shape":3,"label":"SEGM_DETECTOR"}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["segm/person_yolov8m-seg.pt"],"serialize_values":[null]},{"id":158,"type":"BNK_CLIPTextEncodeAdvanced","pos":[-1324.483454877512,849.6232563470395],"size":{"0":400,"1":200},"flags":{},"order":41,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":323,"label":"clip"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[325],"shape":3,"label":"CONDITIONING","slot_index":0}],"properties":{"Node name for S&R":"BNK_CLIPTextEncodeAdvanced"},"widgets_values":["embedding:EasyNegativeV2, embedding:ng_deepnegative_v1_75t, embedding:FixHandNegativePrompt, ","mean","A1111"],"serialize_values":["embedding:EasyNegativeV2, embedding:ng_deepnegative_v1_75t, embedding:FixHandNegativePrompt, ",null,null]},{"id":79,"type":"FaceDetailer","pos":[4410,515],"size":{"0":506.4000244140625,"1":856},"flags":{},"order":80,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":244,"label":"image"},{"name":"model","type":"MODEL","link":163,"label":"model"},{"name":"clip","type":"CLIP","link":164,"label":"clip"},{"name":"vae","type":"VAE","link":165,"label":"vae"},{"name":"positive","type":"CONDITIONING","link":166,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":167,"label":"negative"},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":168,"label":"bbox_detector"},{"name":"sam_model_opt","type":"SAM_MODEL","link":371,"label":"sam_model_opt","slot_index":7},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":419,"label":"segm_detector_opt"},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"detailer_hook"},{"name":"seed","type":"INT","link":206,"widget":{"name":"seed"},"label":"seed"},{"name":"steps","type":"INT","link":352,"widget":{"name":"steps"},"label":"steps"}],"outputs":[{"name":"image","type":"IMAGE","links":[169,259],"shape":3,"label":"image","slot_index":0},{"name":"cropped_refined","type":"IMAGE","links":null,"shape":6,"label":"cropped_refined"},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":null,"shape":6,"label":"cropped_enhanced_alpha"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"mask"},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":null,"shape":3,"label":"detailer_pipe"},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"cnet_images"}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[384,true,1024,776222273699264,"randomize",30,8,"dpmpp_2m_sde","karras",0.5,5,true,true,0.5,10,3,"center-1",0,0.93,0,0.7,"False",10,"",1,false],"serialize_values":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"",null,null]},{"id":82,"type":"UltralyticsDetectorProvider","pos":[4022,635],"size":{"0":315,"1":78},"flags":{},"order":13,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[168],"shape":3,"label":"BBOX_DETECTOR","slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[419],"shape":3,"label":"SEGM_DETECTOR","slot_index":1}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/hand_yolov8s.pt"],"serialize_values":[null]},{"id":181,"type":"LoadImage","pos":[-720.0133722308346,2266.251020551453],"size":{"0":303.0026550292969,"1":314},"flags":{},"order":14,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[376],"shape":3,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["https://bfs.esheep.com/bfs/aikobo-bfs/app/comfy/fcaf09d94299bd4aa71d45f4a1d1573799f8795b.jpg","image"],"serialize_values":[null,null]},{"id":143,"type":"CR Aspect Ratio","pos":[-438,1026],"size":{"0":324.03466796875,"1":322},"flags":{},"order":15,"mode":0,"outputs":[{"name":"width","type":"INT","links":null,"shape":3,"label":"width"},{"name":"height","type":"INT","links":null,"shape":3,"label":"height"},{"name":"upscale_factor","type":"FLOAT","links":null,"shape":3,"label":"upscale_factor"},{"name":"prescale_factor","type":"FLOAT","links":null,"shape":3,"label":"prescale_factor"},{"name":"batch_size","type":"INT","links":null,"shape":3,"label":"batch_size"},{"name":"empty_latent","type":"LATENT","links":[338],"shape":3,"label":"empty_latent","slot_index":5},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR Aspect Ratio"},"widgets_values":[910,1412,"custom","Off",1,1,1],"serialize_values":[null,null,null,null,null,null,null]},{"id":179,"type":"AV_ControlNetPreprocessor","pos":[-729,2054],"size":{"0":315,"1":150},"flags":{},"order":23,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":376,"label":"image","slot_index":0}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[375],"shape":3,"label":"IMAGE"},{"name":"CNET_NAME","type":"STRING","links":null,"shape":3,"label":"CNET_NAME"}],"properties":{"Node name for S&R":"AV_ControlNetPreprocessor"},"widgets_values":["dwpose","sd15",512,"None"],"serialize_values":[null,null,null,null]},{"id":67,"type":"MeshGraphormer-DepthMapPreprocessor","pos":[1739,900],"size":{"0":356.30108642578125,"1":186.79702758789062},"flags":{},"order":68,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":239,"label":"image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[176,194,200],"shape":3,"label":"IMAGE","slot_index":0},{"name":"INPAINTING_MASK","type":"MASK","links":[186,211],"shape":3,"label":"INPAINTING_MASK","slot_index":1}],"properties":{"Node name for S&R":"MeshGraphormer-DepthMapPreprocessor"},"widgets_values":[30,512,"based_on_depth",5,88],"serialize_values":[null,null,null,null,null]},{"id":33,"type":"PreviewImage","pos":[8613,469],"size":{"0":1089.9671630859375,"1":1734.383056640625},"flags":{},"order":92,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":88,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":164,"type":"Smart Step (mtb)","pos":[-792,694],"size":{"0":246.89353942871094,"1":146},"flags":{},"order":16,"mode":0,"outputs":[{"name":"step","type":"INT","links":[336,348],"shape":3,"label":"step","slot_index":0},{"name":"start","type":"INT","links":null,"shape":3,"label":"start"},{"name":"end","type":"INT","links":null,"shape":3,"label":"end"}],"properties":{"Node name for S&R":"Smart Step (mtb)"},"widgets_values":[30,0,0],"serialize_values":[null,null,null]},{"id":98,"type":"Seed Generator","pos":[-799,572],"size":{"0":254.76736450195312,"1":82.39279174804688},"flags":{},"order":17,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[335,346],"shape":3,"label":"INT","slot_index":0}],"properties":{"Node name for S&R":"Seed Generator"},"widgets_values":[466171175025184,"fixed"],"serialize_values":[null,null]},{"id":197,"type":"Note Plus (mtb)","pos":{"0":-3770,"1":471,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":1499.3653564453125,"1":621.4271240234375},"flags":{},"order":18,"mode":0,"inputs":[],"outputs":[],"title":"Note+ (mtb)","properties":{},"widgets_values":["# 使用流程\n\n# 1.上传一张人脸照片\n\n# 2.选择大模型和lora\n\n# 3.填写prompt\n\n# 4.负面提示词建议用embdding：\n#     embedding:EasyNegativeV2,         embedding:ng_deepnegative_v1_75t, embedding:FixHandNegativePrompt\n\n------------\n      \n# 5.图片尺寸按照比例选择或者自定义\n\n# 6.第一次采样生图的openpose参考图修过\n\n# 7. meshgraphormer hand refiner：mask_type网站上tight bboxes 容易报错或者检测不到手，本地不会\n\n# 8.facedetailer person检测非必须可以跳过\n\n# 9.放大修复由于网站限制尺寸自己调整倍数\n\n# 10.如果换脸效果不佳可以考虑roop再换脸\n\n---------\n\n# 个人仓库(个人学习整理工作流资料)\n> https://gitee.com/analyzesystem/idea_comfyui_workflow","markdown",""],"color":"#432","bgcolor":"#653","shape":1,"serialize_values":[null,null,null]}],"links":[[25,16,0,15,0,"IPADAPTER"],[26,17,0,15,1,"CLIP_VISION"],[27,18,0,15,2,"INSIGHTFACE"],[28,19,0,15,3,"IMAGE"],[32,19,0,23,0,"*"],[35,24,0,15,5,"MASK"],[42,23,0,28,1,"IMAGE"],[43,22,0,28,0,"BBOX_DETECTOR"],[44,28,0,24,0,"SEGS"],[52,22,0,31,0,"*"],[53,31,0,32,0,"*"],[83,30,1,45,1,"MODEL"],[84,30,2,45,2,"CLIP"],[85,30,3,45,3,"VAE"],[86,30,4,45,4,"CONDITIONING"],[87,30,5,45,5,"CONDITIONING"],[88,45,0,33,0,"IMAGE"],[89,32,0,45,6,"BBOX_DETECTOR"],[130,47,1,64,1,"MODEL"],[131,47,3,64,4,"VAE"],[134,47,5,64,3,"CONDITIONING"],[135,47,4,64,2,"CONDITIONING"],[136,50,0,64,5,"UPSCALE_MODEL"],[137,64,0,55,0,"IMAGE"],[141,69,5,65,1,"CONDITIONING"],[154,68,1,76,0,"LATENT"],[155,68,2,76,1,"VAE"],[156,76,0,77,0,"IMAGE"],[163,80,1,79,1,"MODEL"],[164,80,2,79,2,"CLIP"],[165,80,3,79,3,"VAE"],[166,80,4,79,4,"CONDITIONING"],[167,80,5,79,5,"CONDITIONING"],[168,82,0,79,6,"BBOX_DETECTOR"],[169,79,0,83,0,"IMAGE"],[176,67,0,65,3,"IMAGE"],[177,69,4,65,0,"CONDITIONING"],[186,67,1,84,2,"MASK"],[187,84,0,68,1,"LATENT"],[188,66,0,65,2,"CONTROL_NET"],[189,65,0,87,0,"CONDITIONING"],[190,65,1,87,1,"CONDITIONING"],[193,69,0,68,0,"BASIC_PIPE"],[194,67,0,87,3,"IMAGE"],[195,88,0,87,2,"CONTROL_NET"],[199,69,0,80,0,"BASIC_PIPE"],[200,67,0,97,0,"IMAGE"],[205,100,0,101,0,"*"],[206,101,0,79,10,"INT"],[209,102,0,103,0,"*"],[211,67,1,104,0,"MASK"],[212,104,0,105,0,"IMAGE"],[233,69,3,122,0,"*"],[234,122,0,84,1,"VAE"],[235,100,0,68,2,"INT"],[238,123,0,124,0,"*"],[239,124,0,67,0,"IMAGE"],[240,124,0,84,0,"IMAGE"],[241,76,0,125,0,"*"],[243,125,0,126,0,"*"],[244,126,0,79,0,"IMAGE"],[257,102,0,64,6,"INT"],[258,103,0,45,10,"INT"],[259,79,0,133,0,"*"],[265,64,0,137,0,"*"],[266,137,0,138,0,"*"],[267,138,0,45,0,"IMAGE"],[281,15,0,144,0,"*"],[282,144,0,145,0,"*"],[319,151,1,153,1,"CLIP"],[320,153,1,154,1,"CLIP"],[321,154,1,155,0,"CLIP"],[322,155,0,157,0,"CLIP"],[323,155,0,158,0,"CLIP"],[324,157,0,159,3,"CONDITIONING"],[325,158,0,159,4,"CONDITIONING"],[326,156,0,159,2,"VAE"],[327,151,1,159,1,"CLIP"],[331,159,0,163,0,"BASIC_PIPE"],[335,98,0,161,5,"INT"],[336,164,0,161,6,"INT"],[337,145,0,159,0,"MODEL"],[338,143,5,161,3,"LATENT"],[339,161,0,165,0,"LATENT"],[341,165,0,9,0,"IMAGE"],[342,165,0,123,0,"*"],[345,163,0,69,0,"BASIC_PIPE"],[346,98,0,119,0,"*"],[347,119,0,100,0,"*"],[348,164,0,167,0,"*"],[349,167,0,168,0,"*"],[350,168,0,68,3,"INT"],[351,168,0,169,0,"*"],[352,169,0,79,11,"INT"],[356,170,0,64,7,"INT"],[358,47,0,30,0,"BASIC_PIPE"],[359,170,0,171,0,"*"],[360,171,0,45,11,"INT"],[362,163,3,173,0,"*"],[364,160,0,15,4,"MODEL"],[365,151,0,153,0,"MODEL"],[366,153,0,154,0,"MODEL"],[367,154,0,160,0,"*"],[368,174,0,28,2,"SAM_MODEL"],[369,174,0,175,0,"*"],[370,175,0,176,0,"*"],[371,176,0,79,7,"SAM_MODEL"],[372,176,0,177,0,"*"],[373,177,0,45,7,"SAM_MODEL"],[374,180,0,178,2,"CONTROL_NET"],[375,179,0,178,3,"IMAGE"],[376,181,0,179,0,"IMAGE"],[377,163,0,182,0,"BASIC_PIPE"],[378,182,4,178,0,"CONDITIONING"],[379,182,5,178,1,"CONDITIONING"],[380,182,3,183,0,"*"],[381,183,0,165,1,"VAE"],[384,178,1,161,2,"CONDITIONING"],[385,178,0,161,1,"CONDITIONING"],[386,182,1,161,0,"MODEL"],[387,187,0,186,6,"BBOX_DETECTOR"],[388,186,0,188,0,"IMAGE"],[389,186,0,189,0,"*"],[390,190,2,186,2,"CLIP"],[391,190,1,186,1,"MODEL"],[394,190,3,186,3,"VAE"],[399,80,0,193,0,"*"],[400,133,0,192,0,"*"],[402,193,0,47,0,"BASIC_PIPE"],[405,101,0,195,0,"*"],[406,195,0,102,0,"*"],[407,169,0,194,0,"*"],[408,194,0,170,0,"*"],[409,192,0,186,0,"IMAGE"],[410,193,0,190,0,"BASIC_PIPE"],[411,195,0,186,10,"INT"],[412,194,0,186,11,"INT"],[413,176,0,196,0,"*"],[414,196,0,186,7,"SAM_MODEL"],[416,189,0,64,0,"IMAGE"],[417,190,4,186,4,"CONDITIONING"],[418,190,5,186,5,"CONDITIONING"],[419,82,1,79,8,"SEGM_DETECTOR"]],"groups":[{"title":"Group","bounding":[-865,362,1855,1193],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[871,-515,1481,864],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[5735,368,1749,1878],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[995,364,2924,1190],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[3925,367,1804,1190],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[7491,364,2254,1884],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[-2261,363,1390,922],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[-866,1564,1844,1046],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[5013,-1133,1957,1375],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{},"version":0.4}