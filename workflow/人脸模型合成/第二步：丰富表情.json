{"last_node_id":211,"last_link_id":490,"nodes":[{"id":129,"type":"LivePortraitLoadCropper","pos":[-1253,-757],"size":{"0":315,"1":106},"flags":{},"order":0,"mode":0,"outputs":[{"name":"cropper","type":"LPCROPPER","links":[],"slot_index":0,"shape":3,"label":"裁剪框架"}],"properties":{"Node name for S&R":"LivePortraitLoadCropper"},"widgets_values":["CPU",true,0.5]},{"id":134,"type":"GetImageSizeAndCount","pos":[-200,360],"size":{"0":210,"1":86},"flags":{},"order":18,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":471,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"},{"name":"count","type":"INT","links":null,"shape":3,"label":"数量"}],"properties":{"Node name for S&R":"GetImageSizeAndCount"}},{"id":78,"type":"GetImageSizeAndCount","pos":[-522,-572],"size":{"0":210,"1":86},"flags":{},"order":11,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":434,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[445,455],"slot_index":0,"shape":3,"label":"图像"},{"name":"1920 width","type":"INT","links":null,"shape":3},{"name":"1080 height","type":"INT","links":null,"shape":3},{"name":"1 count","type":"INT","links":null,"shape":3}],"properties":{"Node name for S&R":"GetImageSizeAndCount"}},{"id":182,"type":"GetImageSizeAndCount","pos":[-850,-195],"size":{"0":210,"1":86},"flags":{},"order":12,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":436,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[451,469],"slot_index":0,"shape":3,"label":"图像"},{"name":"512 width","type":"INT","links":null,"shape":3},{"name":"512 height","type":"INT","links":null,"shape":3},{"name":"935 count","type":"INT","links":null,"shape":3}],"properties":{"Node name for S&R":"GetImageSizeAndCount"}},{"id":83,"type":"CreateShapeMask","pos":[407,-876],"size":{"0":315,"1":270},"flags":{},"order":1,"mode":0,"outputs":[{"name":"mask","type":"MASK","links":[192],"slot_index":0,"shape":3,"label":"遮罩"},{"name":"mask_inverted","type":"MASK","links":null,"shape":3,"label":"反转遮罩"}],"properties":{"Node name for S&R":"CreateShapeMask"},"widgets_values":["square",1,256,256,0,512,512,480,480]},{"id":81,"type":"GrowMaskWithBlur","pos":[751,-873],"size":{"0":315,"1":246},"flags":{},"order":6,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":192,"slot_index":0,"label":"遮罩"}],"outputs":[{"name":"mask","type":"MASK","links":[187,463],"slot_index":0,"shape":3,"label":"遮罩"},{"name":"mask_inverted","type":"MASK","links":null,"shape":3,"label":"反转遮罩"}],"properties":{"Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[0,0,true,false,13.9,1,1,false]},{"id":82,"type":"MaskPreview+","pos":[1091,-873],"size":{"0":210,"1":246},"flags":{},"order":10,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":187,"label":"遮罩"}],"properties":{"Node name for S&R":"MaskPreview+"}},{"id":192,"type":"Reroute","pos":[73,-519],"size":[82,26],"flags":{},"order":15,"mode":0,"inputs":[{"name":"","type":"*","link":455}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[456,457],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":180,"type":"LivePortraitRetargeting","pos":[-386,-62],"size":{"0":430.8000183105469,"1":130},"flags":{},"order":19,"mode":0,"inputs":[{"name":"driving_crop_info","type":"CROPINFO","link":470,"slot_index":0,"label":"裁剪信息"}],"outputs":[{"name":"retargeting_info","type":"RETARGETINGINFO","links":[],"slot_index":0,"shape":3,"label":"重定向信息"}],"properties":{"Node name for S&R":"LivePortraitRetargeting"},"widgets_values":[true,1,true,1]},{"id":199,"type":"Reroute","pos":[-860,-906],"size":[115.6,26],"flags":{},"order":7,"mode":0,"inputs":[{"name":"","type":"*","link":474}],"outputs":[{"name":"LPCROPPER","type":"LPCROPPER","links":[475,476],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":190,"type":"LivePortraitProcess","pos":[34,-522],"size":{"0":430.8000183105469,"1":330},"flags":{},"order":17,"mode":0,"inputs":[{"name":"pipeline","type":"LIVEPORTRAITPIPE","link":448,"label":"LivePortrait管线"},{"name":"crop_info","type":"CROPINFO","link":449,"label":"裁剪信息"},{"name":"source_image","type":"IMAGE","link":456,"label":"原图像"},{"name":"driving_images","type":"IMAGE","link":451,"label":"驱动图像"},{"name":"opt_retargeting_info","type":"RETARGETINGINFO","link":null,"label":"重定向信息(可选)"}],"outputs":[{"name":"cropped_image","type":"IMAGE","links":[454],"slot_index":0,"shape":3,"label":"裁剪图像"},{"name":"output","type":"LP_OUT","links":[452],"slot_index":1,"shape":3,"label":"LivePOrtrait输出"}],"properties":{"Node name for S&R":"LivePortraitProcess"},"widgets_values":[false,0.03,true,1,"constant","relative",0.000003,false,1]},{"id":202,"type":"VHS_VideoInfo","pos":[356,85],"size":{"0":393,"1":206},"flags":{},"order":13,"mode":0,"inputs":[{"name":"video_info","type":"VHS_VIDEOINFO","link":480,"label":"视频信息"}],"outputs":[{"name":"source_fps🟨","type":"FLOAT","links":[481],"slot_index":0,"shape":3,"label":"初始FPS🟨"},{"name":"source_frame_count🟨","type":"INT","links":null,"shape":3,"label":"初始帧数🟨"},{"name":"source_duration🟨","type":"FLOAT","links":null,"shape":3,"label":"初始时长🟨"},{"name":"source_width🟨","type":"INT","links":null,"shape":3,"label":"初始宽度🟨"},{"name":"source_height🟨","type":"INT","links":null,"shape":3,"label":"初始高度🟨"},{"name":"loaded_fps🟦","type":"FLOAT","links":null,"shape":3,"label":"选中FPS🟦"},{"name":"loaded_frame_count🟦","type":"INT","links":null,"shape":3,"label":"选中帧数🟦"},{"name":"loaded_duration🟦","type":"FLOAT","links":null,"shape":3,"label":"选中时长🟦"},{"name":"loaded_width🟦","type":"INT","links":null,"shape":3,"label":"选中宽度🟦"},{"name":"loaded_height🟦","type":"INT","links":null,"shape":3,"label":"选中高度🟦"}],"properties":{"Node name for S&R":"VHS_VideoInfo"},"widgets_values":{}},{"id":197,"type":"LivePortraitCropper","pos":[-640,360],"size":{"0":330,"1":242},"flags":{},"order":16,"mode":0,"inputs":[{"name":"pipeline","type":"LIVEPORTRAITPIPE","link":472,"slot_index":0,"label":"LivePortrait管线"},{"name":"cropper","type":"LPCROPPER","link":476,"label":"裁剪框架"},{"name":"source_image","type":"IMAGE","link":469,"label":"原图像"}],"outputs":[{"name":"cropped_image","type":"IMAGE","links":[471],"slot_index":0,"shape":3},{"name":"crop_info","type":"CROPINFO","links":[470],"slot_index":1,"shape":3,"label":"裁剪信息"}],"properties":{"Node name for S&R":"LivePortraitCropper"},"widgets_values":[512,2.3,-0.003,-0.125,0,"large-small",false]},{"id":191,"type":"LivePortraitComposite","pos":[510,-522],"size":{"0":355.20001220703125,"1":86},"flags":{},"order":20,"mode":0,"inputs":[{"name":"source_image","type":"IMAGE","link":457,"label":"原图像"},{"name":"cropped_image","type":"IMAGE","link":454,"label":"裁剪图像"},{"name":"liveportrait_out","type":"LP_OUT","link":452,"label":"LivePOrtrait输出"},{"name":"mask","type":"MASK","link":463,"label":"遮罩"}],"outputs":[{"name":"full_images","type":"IMAGE","links":[458],"slot_index":0,"shape":3,"label":"图像"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LivePortraitComposite"}},{"id":181,"type":"GetImageSizeAndCount","pos":[904,-521],"size":{"0":210,"1":86},"flags":{},"order":21,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":458,"label":"图像"}],"outputs":[{"name":"image","type":"IMAGE","links":[478],"slot_index":0,"shape":3,"label":"图像"},{"name":"1920 width","type":"INT","links":null,"shape":3},{"name":"1080 height","type":"INT","links":null,"shape":3},{"name":"935 count","type":"INT","links":null,"shape":3}],"properties":{"Node name for S&R":"GetImageSizeAndCount"}},{"id":189,"type":"LivePortraitCropper","pos":[41,-868],"size":{"0":330,"1":242},"flags":{},"order":14,"mode":0,"inputs":[{"name":"pipeline","type":"LIVEPORTRAITPIPE","link":446,"slot_index":0,"label":"LivePortrait管线"},{"name":"cropper","type":"LPCROPPER","link":475,"slot_index":1,"label":"裁剪框架"},{"name":"source_image","type":"IMAGE","link":445,"label":"原图像"}],"outputs":[{"name":"cropped_image","type":"IMAGE","links":null,"slot_index":0,"shape":3},{"name":"crop_info","type":"CROPINFO","links":[449],"slot_index":1,"shape":3,"label":"裁剪信息"}],"properties":{"Node name for S&R":"LivePortraitCropper"},"widgets_values":[512,2.3,0,-0.125,0,"large-small",true]},{"id":1,"type":"DownloadAndLoadLivePortraitModels","pos":[-603,-869],"size":{"0":302.43463134765625,"1":82},"flags":{},"order":2,"mode":0,"outputs":[{"name":"live_portrait_pipe","type":"LIVEPORTRAITPIPE","links":[446,448,472],"slot_index":0,"shape":3,"label":"LivePortrait管线"}],"properties":{"Node name for S&R":"DownloadAndLoadLivePortraitModels"},"widgets_values":["auto","human"]},{"id":198,"type":"LivePortraitLoadMediaPipeCropper","pos":[-1246,-897],"size":{"0":315,"1":82},"flags":{},"order":3,"mode":0,"outputs":[{"name":"cropper","type":"LPCROPPER","links":[474],"shape":3,"label":"裁剪框架"}],"properties":{"Node name for S&R":"LivePortraitLoadMediaPipeCropper"},"widgets_values":["CPU",true]},{"id":196,"type":"LoadImage","pos":[-1263,-577],"size":{"0":330.4995422363281,"1":384.2416687011719},"flags":{},"order":4,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[466],"slot_index":0,"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["选中.png","image"]},{"id":165,"type":"ImageResizeKJ","pos":[-873,-573],"size":{"0":315,"1":242},"flags":{},"order":8,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":466,"label":"图像"},{"name":"get_image_size","type":"IMAGE","link":null,"label":"参考图像大小"},{"name":"width_input","type":"INT","link":null,"widget":{"name":"width_input"},"label":"宽度"},{"name":"height_input","type":"INT","link":null,"widget":{"name":"height_input"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[434],"slot_index":0,"shape":3,"label":"图像"},{"name":"width","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"ImageResizeKJ"},"widgets_values":[512,512,"lanczos",true,2,0,0]},{"id":133,"type":"PrimitiveNode","pos":[-1267,-51],"size":{"0":210,"1":82},"flags":{},"order":5,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[302],"slot_index":0,"widget":{"name":"frame_load_cap"}}],"properties":{"Run widget replace on values":false},"widgets_values":[0,"fixed"]},{"id":8,"type":"VHS_LoadVideo","pos":[-1262,118],"size":[340.1555480957031,821.1654188368055],"flags":{},"order":9,"mode":0,"inputs":[{"name":"meta_batch","type":"VHS_BatchManager","link":null,"label":"批次管理"},{"name":"vae","type":"VAE","link":null},{"name":"frame_load_cap","type":"INT","link":302,"widget":{"name":"frame_load_cap"},"label":"帧数读取上限"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[436],"slot_index":0,"shape":3,"label":"图像"},{"name":"frame_count","type":"INT","links":null,"slot_index":1,"shape":3,"label":"帧计数"},{"name":"audio","type":"VHS_AUDIO","links":[482],"slot_index":2,"shape":3,"label":"音频"},{"name":"video_info","type":"VHS_VIDEOINFO","links":[480],"slot_index":3,"shape":3,"label":"视频信息"}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"3秒.mp4","force_rate":0,"force_size":"Disabled","custom_width":512,"custom_height":512,"frame_load_cap":0,"skip_first_frames":0,"select_every_nth":1,"choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"frame_load_cap":0,"skip_first_frames":0,"force_rate":0,"filename":"3秒.mp4","type":"input","format":"video/mp4","select_every_nth":1}}}},{"id":168,"type":"VHS_VideoCombine","pos":[865,85],"size":[669.8613891601562,685.5470314025879],"flags":{},"order":22,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":478,"label":"图像"},{"name":"audio","type":"VHS_AUDIO","link":482,"label":"音频"},{"name":"meta_batch","type":"VHS_BatchManager","link":null,"label":"批次管理"},{"name":"vae","type":"VAE","link":null},{"name":"frame_rate","type":"FLOAT","link":481,"widget":{"name":"frame_rate"},"label":"帧率"}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3,"label":"文件名"}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00200-audio.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16}}}}],"links":[[187,81,0,82,0,"MASK"],[192,83,0,81,0,"MASK"],[302,133,0,8,2,"INT"],[434,165,0,78,0,"IMAGE"],[436,8,0,182,0,"IMAGE"],[445,78,0,189,2,"IMAGE"],[446,1,0,189,0,"LIVEPORTRAITPIPE"],[448,1,0,190,0,"LIVEPORTRAITPIPE"],[449,189,1,190,1,"CROPINFO"],[451,182,0,190,3,"IMAGE"],[452,190,1,191,2,"LP_OUT"],[454,190,0,191,1,"IMAGE"],[455,78,0,192,0,"*"],[456,192,0,190,2,"IMAGE"],[457,192,0,191,0,"IMAGE"],[458,191,0,181,0,"IMAGE"],[463,81,0,191,3,"MASK"],[466,196,0,165,0,"IMAGE"],[469,182,0,197,2,"IMAGE"],[470,197,1,180,0,"CROPINFO"],[471,197,0,134,0,"IMAGE"],[472,1,0,197,0,"LIVEPORTRAITPIPE"],[474,198,0,199,0,"*"],[475,199,0,189,1,"LPCROPPER"],[476,199,0,197,1,"LPCROPPER"],[478,181,0,168,0,"IMAGE"],[480,8,3,202,0,"VHS_VIDEOINFO"],[481,202,0,168,4,"FLOAT"],[482,8,2,168,1,"VHS_AUDIO"]],"groups":[{"title":"制作动态表情","bounding":[-1277,-971,2838,1920],"color":"#3f789e","font_size":24,"locked":false},{"title":"关注公众号：《AI搞钱社》  或  加微信：Madongxi1888，免费领取超多ai资料！【换脸、变声、ai绘画等等】","bounding":[-1269,-1184,3773,107],"color":"#b58b2a","font_size":80,"locked":true}],"config":{},"extra":{"ds":{"scale":0.2794145953766203,"offset":[4374.39871746328,2837.7019360264685]},"workspace_info":{"id":"QD_zQmL8HiGbPE7QZgSMg"}},"version":0.4}