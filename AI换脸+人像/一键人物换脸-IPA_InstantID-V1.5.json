{"last_node_id":558,"last_link_id":1296,"nodes":[{"id":14,"type":"Anything Everywhere3","pos":[441.68924634013143,130.62510383316285],"size":{"0":170,"1":70},"flags":{"collapsed":false},"order":113,"mode":0,"inputs":[{"name":"MODEL","type":"*","link":737,"label":"MODEL","color_on":"#B39DDB"},{"name":"CLIP","type":"*","link":738,"label":"CLIP","color_on":"#FFD500"},{"name":"VAE","type":"*","link":16,"label":"VAE","color_on":"#FF6E6E"}],"properties":{"Node name for S&R":"Anything Everywhere3","group_restricted":false,"color_restricted":false},"widgets_values":[],"serialize_values":[]},{"id":28,"type":"FaceKeypointsPreprocessor","pos":[4449.371241762515,440.35861473910325],"size":{"0":230,"1":50},"flags":{"collapsed":false},"order":133,"mode":0,"inputs":[{"name":"faceanalysis","type":"FACEANALYSIS","link":28,"label":"faceanalysis"},{"name":"image","type":"IMAGE","link":78,"label":"image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[74,75],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"FaceKeypointsPreprocessor"}},{"id":30,"type":"ControlNetLoader","pos":[4089.37124176251,410.35861473910325],"size":{"0":280,"1":80},"flags":{},"order":0,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[32],"shape":3,"label":"CONTROL_NET"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["InstantID\\diffusion_pytorch_model.safetensors"],"serialize_values":[null]},{"id":13,"type":"Prompts Everywhere","pos":[275.2206587653143,833.1193198197992],"size":{"0":210,"1":50},"flags":{"collapsed":false},"order":86,"mode":0,"inputs":[{"name":"CONDITIONING","type":"*","link":12,"color_on":"#FFA931","label":"CONDITIONING"},{"name":"CONDITIONING","type":"*","link":13,"color_on":"#FFA931","label":"CONDITIONING"}],"properties":{"Node name for S&R":"Prompts Everywhere","group_restricted":false,"color_restricted":false},"widgets_values":[],"serialize_values":[]},{"id":57,"type":"PreviewImage","pos":[3839.3363655784287,239.50131328494064],"size":{"0":220,"1":260},"flags":{"collapsed":false},"order":141,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":75,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":64,"type":"PreviewImage","pos":[3834.09421635124,708.2737017072258],"size":{"0":220,"1":250},"flags":{},"order":73,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":363,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":253,"type":"GetNode","pos":[3891.9543457031086,1012.7335476345487],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":1,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[530],"slot_index":0,"label":"IMAGE"}],"title":"Get_参考图-2","properties":{},"widgets_values":["参考图-2"],"serialize_values":[null]},{"id":27,"type":"InstantIDFaceAnalysis","pos":[4107.68831380207,304.6445024278426],"size":{"0":240,"1":60},"flags":{},"order":2,"mode":0,"outputs":[{"name":"FACEANALYSIS","type":"FACEANALYSIS","links":[28,31],"shape":3,"slot_index":0,"label":"FACEANALYSIS"}],"properties":{"Node name for S&R":"InstantIDFaceAnalysis"},"widgets_values":["CPU"],"serialize_values":[null]},{"id":26,"type":"InstantIDModelLoader","pos":[4103.688313802069,183.6445024278427],"size":{"0":240,"1":60},"flags":{},"order":3,"mode":0,"outputs":[{"name":"INSTANTID","type":"INSTANTID","links":[30],"shape":3,"slot_index":0,"label":"INSTANTID"}],"properties":{"Node name for S&R":"InstantIDModelLoader"},"widgets_values":["ip-adapter.bin"],"serialize_values":[null]},{"id":138,"type":"ConstrainImage|pysssss","pos":[4908.965325197673,1310.4956137412069],"size":{"0":320,"1":150},"flags":{},"order":123,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":525,"label":"images"},{"name":"max_width","type":"INT","link":269,"widget":{"name":"max_width"},"label":"max_width"},{"name":"max_height","type":"INT","link":270,"widget":{"name":"max_height"},"label":"max_height"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[322],"shape":6,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"ConstrainImage|pysssss"},"widgets_values":[1024,1024,0,0,"no"],"serialize_values":[null,null,null,null,null]},{"id":339,"type":"Anything Everywhere","pos":[3752.2372649576178,1253.339820754647],"size":{"0":210,"1":30},"flags":{"collapsed":true},"order":68,"mode":2,"inputs":[{"name":"INT","type":"*","link":695,"label":"INT","color_on":"#29699C"}],"properties":{"Node name for S&R":"Anything Everywhere","group_restricted":0,"color_restricted":0},"widgets_values":[],"serialize_values":[]},{"id":79,"type":"SaveImage","pos":[5567.392079587037,2040.5538374065866],"size":{"0":230,"1":270},"flags":{"collapsed":true},"order":144,"mode":2,"inputs":[{"name":"images","type":"IMAGE","link":884,"label":"images"}],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"],"serialize_values":["ComfyUI"]},{"id":132,"type":"LayerUtility: CropBoxResolve","pos":[4927.392079587037,1780.5538374065873],"size":{"0":240,"1":90},"flags":{},"order":116,"mode":0,"inputs":[{"name":"crop_box","type":"BOX","link":449,"label":"crop_box"}],"outputs":[{"name":"x","type":"INT","links":[441],"shape":3,"slot_index":0,"label":"x"},{"name":"y","type":"INT","links":[440],"shape":3,"slot_index":1,"label":"y"},{"name":"width","type":"INT","links":[269],"shape":3,"slot_index":2,"label":"width"},{"name":"height","type":"INT","links":[270],"shape":3,"slot_index":3,"label":"height"}],"properties":{"Node name for S&R":"LayerUtility: CropBoxResolve"}},{"id":247,"type":"SetNode","pos":[5757.392079587037,2040.5538374065866],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":145,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":885,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_拼合后最终图像","properties":{"previousName":"拼合后最终图像"},"widgets_values":["拼合后最终图像"],"color":"#232","bgcolor":"#353","serialize_values":[null]},{"id":17,"type":"LoraLoader","pos":[-200.23047771751658,340],"size":{"0":360,"1":150},"flags":{},"order":92,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":739,"label":"model"},{"name":"clip","type":"CLIP","link":19,"label":"clip"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[20],"shape":3,"slot_index":0,"label":"MODEL"},{"name":"CLIP","type":"CLIP","links":[21],"shape":3,"slot_index":1,"label":"CLIP"}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["IP-Adapter\\ip-adapter-faceid-plusv2_sdxl_lora.safetensors",0,0.7000000000000001],"serialize_values":[null,null,null]},{"id":18,"type":"LoraLoader","pos":[199.76952228248342,340],"size":{"0":360,"1":150},"flags":{},"order":106,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":20,"label":"model"},{"name":"clip","type":"CLIP","link":21,"label":"clip"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[737],"shape":3,"slot_index":0,"label":"MODEL"},{"name":"CLIP","type":"CLIP","links":[738],"shape":3,"slot_index":1,"label":"CLIP"}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["IP-Adapter\\ip-adapter-faceid-plus_sd15_lora.safetensors",1,1],"serialize_values":[null,null,null]},{"id":217,"type":"Reroute","pos":[4640,1120],"size":[75,26],"flags":{},"order":111,"mode":0,"inputs":[{"name":"","type":"*","link":736,"label":""}],"outputs":[{"name":"","type":"BOX","links":[449],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":373,"type":"SetNode","pos":[4090.3133915183203,1935.7734558377472],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":124,"mode":2,"inputs":[{"name":"IMAGE","type":"IMAGE","link":735,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_换脸后修复图像","properties":{"previousName":"换脸后修复图像"},"widgets_values":["换脸后修复图像"],"serialize_values":[null]},{"id":401,"type":"GetNode","pos":[3800.31339151832,1505.7734558377472],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":4,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[794],"slot_index":0,"label":"IMAGE"}],"title":"Get_裁切后人脸图像","properties":{},"widgets_values":["裁切后人脸图像"],"serialize_values":[null]},{"id":250,"type":"GetNode","pos":[4893.5557663818645,1249.1301334545753],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":5,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[525],"slot_index":0,"label":"IMAGE"}],"title":"Get_裁切换脸后最终图像","properties":{},"widgets_values":["裁切换脸后最终图像"],"serialize_values":[null]},{"id":19,"type":"SelfAttentionGuidance","pos":[219.76952228248342,160],"size":{"0":320,"1":82},"flags":{"collapsed":true},"order":71,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":251,"label":"model"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"shape":3,"slot_index":0,"label":"MODEL"}],"properties":{"Node name for S&R":"SelfAttentionGuidance"},"widgets_values":[0.5,2],"serialize_values":[null,null]},{"id":45,"type":"VAEEncode","pos":[4978.086127387137,697.64450624254],"size":{"0":210,"1":50},"flags":{"collapsed":true},"order":142,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":766,"label":"pixels"},{"name":"vae","type":"VAE","link":null,"label":"vae"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[54],"shape":3,"slot_index":0,"label":"LATENT"}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":251,"type":"GetNode","pos":[1294.7573033068334,2265.108455773634],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":6,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[527],"slot_index":0,"label":"IMAGE"}],"title":"Get_拼合后最终图像","properties":{},"widgets_values":["拼合后最终图像"],"serialize_values":[null]},{"id":249,"type":"GetNode","pos":[5153.5557663818645,1249.1301334545753],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":7,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[523],"slot_index":0,"label":"IMAGE"}],"title":"Get_人物底图-待处理","properties":{},"widgets_values":["人物底图-待处理"],"serialize_values":[null]},{"id":254,"type":"GetNode","pos":[4202.688313802071,107.64450242784277],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":8,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[531],"slot_index":0,"label":"IMAGE"}],"title":"Get_参考图-1","properties":{},"widgets_values":["参考图-1"],"serialize_values":[null]},{"id":117,"type":"PreviewImage","pos":[2104.6019574229736,697.6959729873854],"size":{"0":240,"1":260},"flags":{},"order":98,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":226,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":207,"type":"Display Int (rgthree)","pos":[3134.057912223619,226.43165813787485],"size":{"0":210,"1":80},"flags":{},"order":118,"mode":0,"inputs":[{"name":"input","type":"INT","link":617,"widget":{"name":"input"},"dir":3,"label":"input"}],"properties":{"Node name for S&R":"Display Int (rgthree)"},"widgets_values":[0,""],"serialize_values":[null,null]},{"id":208,"type":"Display Int (rgthree)","pos":[3134.057912223619,326.4316581378748],"size":{"0":210,"1":80},"flags":{},"order":121,"mode":0,"inputs":[{"name":"input","type":"INT","link":664,"widget":{"name":"input"},"dir":3,"label":"input"}],"properties":{"Node name for S&R":"Display Int (rgthree)"},"widgets_values":[0,""],"serialize_values":[null,null]},{"id":234,"type":"MaskToImage","pos":[3154.057912223619,456.4316581378748],"size":{"0":210,"1":30},"flags":{"collapsed":true},"order":102,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":498,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[665],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":118,"type":"LayerMask: MaskPreview","pos":[2394.6019574229726,707.6959729873855],"size":{"0":230,"1":250},"flags":{},"order":101,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":227,"label":"mask"}],"properties":{"Node name for S&R":"LayerMask: MaskPreview"}},{"id":416,"type":"GetNode","pos":[1130,1534.7780083550374],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":9,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[809],"slot_index":0,"label":"IMAGE"}],"title":"Get_人物底图-原始","properties":{},"widgets_values":["人物底图-原始"],"serialize_values":[null]},{"id":236,"type":"SetNode","pos":[484.75730330683484,3115.1084557736326],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":65,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":528,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":[],"label":"*","slot_index":0}],"title":"Set_人物底图-原始","properties":{"previousName":"人物底图-原始"},"widgets_values":["人物底图-原始"],"serialize_values":[null]},{"id":33,"type":"ConstrainImage|pysssss","pos":[452.07825416301415,2269.004328391566],"size":{"0":320,"1":154},"flags":{"collapsed":true},"order":63,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":238,"label":"images"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":6,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"ConstrainImage|pysssss"},"widgets_values":[2048,2048,0,0,"no"],"serialize_values":[null,null,null,null,null]},{"id":238,"type":"SetNode","pos":[4.757303306834842,3105.1084557736326],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":85,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":656,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_参考图-2","properties":{"previousName":"参考图-2"},"widgets_values":["参考图-2"],"serialize_values":[null]},{"id":237,"type":"SetNode","pos":[-15.24269669316515,2645.1084557736326],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":84,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":655,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_参考图-1","properties":{"previousName":"参考图-1"},"widgets_values":["参考图-1"],"serialize_values":[null]},{"id":440,"type":"GetNode","pos":[1774.6019574229736,927.6959729873854],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":10,"mode":0,"outputs":[{"name":"MASK","type":"MASK","links":[854],"slot_index":0,"label":"MASK"}],"title":"Get_人脸遮罩-原始","properties":{},"widgets_values":["人脸遮罩-原始"],"serialize_values":[null]},{"id":212,"type":"GetImageSize+","pos":[2804.0579122236186,236.43165813787482],"size":{"0":210,"1":50},"flags":{"collapsed":true},"order":108,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":436,"label":"image"}],"outputs":[{"name":"width","type":"INT","links":[623],"shape":3,"slot_index":0,"label":"width"},{"name":"height","type":"INT","links":[624],"shape":3,"slot_index":1,"label":"height"}],"properties":{"Node name for S&R":"GetImageSize+"}},{"id":123,"type":"ConstrainImage|pysssss","pos":[2804.0579122236186,166.43165813787485],"size":{"0":320,"1":154},"flags":{"collapsed":true},"order":99,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":242,"label":"images"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[436,616,644],"shape":6,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"ConstrainImage|pysssss"},"widgets_values":[1024,1024,0,0,"no"],"serialize_values":[null,null,null,null,null]},{"id":40,"type":"PreviewImage","pos":[3131.317116862624,716.4315052822533],"size":{"0":280,"1":250},"flags":{},"order":127,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":508,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":41,"type":"LayerMask: MaskPreview","pos":[3451.317116862624,726.4315052822533],"size":{"0":240,"1":260},"flags":{},"order":137,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":176,"label":"mask"}],"properties":{"Node name for S&R":"LayerMask: MaskPreview"}},{"id":442,"type":"Note","pos":[3037.2884928385283,131.46662182278078],"size":{"0":330,"1":60},"flags":{},"order":11,"mode":0,"properties":{"text":""},"widgets_values":["· 调整裁切后图像和遮罩的精度为8的倍数，以确保编解码时不会改变图像尺寸"],"color":"#432","bgcolor":"#653","serialize_values":[null]},{"id":114,"type":"PreviewImage","pos":[2177.7323947482496,121.466610378689],"size":{"0":240,"1":250},"flags":{},"order":77,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":547,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":434,"type":"SetNode","pos":[2197.7323947482496,441.466610378689],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":78,"mode":0,"inputs":[{"name":"MASK","type":"MASK","link":847,"label":"MASK"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_自动遮罩","properties":{"previousName":"自动遮罩"},"widgets_values":["自动遮罩"],"serialize_values":[null]},{"id":235,"type":"ImageCrop+","pos":[3417.2884928385283,391.4666218227809],"size":{"0":290,"1":150},"flags":{},"order":119,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":666,"label":"image"},{"name":"width","type":"INT","link":620,"widget":{"name":"width"},"label":"width"},{"name":"height","type":"INT","link":622,"widget":{"name":"height"},"label":"height"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[506,508],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"x","type":"INT","links":null,"shape":3,"label":"x"},{"name":"y","type":"INT","links":null,"shape":3,"label":"y"}],"properties":{"Node name for S&R":"ImageCrop+"},"widgets_values":[256,256,"top-left",0,0],"serialize_values":[null,null,null,null,null]},{"id":443,"type":"SetNode","pos":[3487.2884928385283,331.4666218227809],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":128,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":859,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_精度修正后人脸图像","properties":{"previousName":"精度修正后人脸图像"},"widgets_values":["精度修正后人脸图像"],"serialize_values":[null]},{"id":444,"type":"GetNode","pos":[684.7573033068352,2265.108455773634],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":12,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[860],"slot_index":0,"label":"IMAGE"}],"title":"Get_精度修正后人脸图像","properties":{},"widgets_values":["精度修正后人脸图像"],"serialize_values":[null]},{"id":252,"type":"GetNode","pos":[914.7573033068352,2265.108455773634],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":13,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[861],"slot_index":0,"label":"IMAGE"}],"title":"Get_裁切换脸后最终图像","properties":{},"widgets_values":["裁切换脸后最终图像"],"serialize_values":[null]},{"id":48,"type":"ConstrainImage|pysssss","pos":[-187.92174583698588,2649.0043283915647],"size":{"0":320,"1":150},"flags":{"collapsed":true},"order":62,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":679,"label":"images"},{"name":"max_width","type":"INT","link":862,"widget":{"name":"max_width"},"slot_index":1,"label":"max_width"},{"name":"max_height","type":"INT","link":863,"widget":{"name":"max_height"},"label":"max_height"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[655],"shape":6,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"ConstrainImage|pysssss"},"widgets_values":[1024,1024,0,0,"no"],"serialize_values":[null,null,null,null,null]},{"id":402,"type":"SetNode","pos":[2159.644002278633,1031.4665798611106],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":100,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":790,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_裁切后人脸图像","properties":{"previousName":"裁切后人脸图像"},"widgets_values":["裁切后人脸图像"],"serialize_values":[null]},{"id":43,"type":"Reroute","pos":[3637.2884928385283,561.4666218227809],"size":[75,26],"flags":{},"order":129,"mode":0,"inputs":[{"name":"","type":"*","link":866,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[78,802],"slot_index":0,"label":""}],"title":"目标原图","properties":{"showOutputText":false,"horizontal":false,"showTitle":true}},{"id":242,"type":"Reroute","pos":[2130,1080],"size":[75,26],"flags":{},"order":103,"mode":0,"inputs":[{"name":"","type":"*","link":511,"label":""}],"outputs":[{"name":"","type":"MASK","links":[513],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":445,"type":"Int","pos":[-180.6347503297538,2689.860540720956],"size":{"0":220,"1":60},"flags":{"collapsed":true},"order":14,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[862,863,864,865],"shape":3,"slot_index":0,"label":"INT"}],"title":"参考图放大精度","properties":{"Node name for S&R":"Int"},"widgets_values":[1024],"color":"#432","bgcolor":"#653","serialize_values":[null]},{"id":333,"type":"SUPIR_conditioner","pos":[2910,1820],"size":{"0":410,"1":210},"flags":{},"order":91,"mode":2,"inputs":[{"name":"SUPIR_model","type":"SUPIRMODEL","link":685,"slot_index":0,"label":"SUPIR_model"},{"name":"latents","type":"LATENT","link":686,"slot_index":1,"label":"latents"},{"name":"captions","type":"STRING","link":null,"widget":{"name":"captions"},"label":"captions"}],"outputs":[{"name":"positive","type":"SUPIR_cond_pos","links":[683],"shape":3,"label":"positive"},{"name":"negative","type":"SUPIR_cond_neg","links":[684],"shape":3,"slot_index":1,"label":"negative"}],"properties":{"Node name for S&R":"SUPIR_conditioner"},"widgets_values":["high quality, detailed","bad quality, blurry, messy",""],"color":"#232","bgcolor":"#353","serialize_values":[null,null,null]},{"id":447,"type":"GetNode","pos":[5130,150],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":15,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[],"slot_index":0,"label":"INT"}],"title":"Get_Seed","properties":{},"widgets_values":["Seed"],"serialize_values":[null]},{"id":408,"type":"GetNode","pos":[5660,740],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":16,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[800],"slot_index":0,"label":"IMAGE"}],"title":"Get_裁切后人脸图像","properties":{},"widgets_values":["裁切后人脸图像"],"serialize_values":[null]},{"id":477,"type":"Image Overlay","pos":[5385.8005471978395,1654.2457069137763],"size":{"0":320,"1":290},"flags":{},"order":136,"mode":0,"inputs":[{"name":"base_image","type":"IMAGE","link":875,"label":"base_image","slot_index":0},{"name":"overlay_image","type":"IMAGE","link":876,"label":"overlay_image"},{"name":"optional_mask","type":"MASK","link":null,"slot_index":2,"label":"optional_mask"},{"name":"x_offset","type":"INT","link":916,"widget":{"name":"x_offset"},"label":"x_offset"},{"name":"y_offset","type":"INT","link":923,"widget":{"name":"y_offset"},"label":"y_offset"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[883,884,885],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"Image Overlay"},"widgets_values":["None","nearest-exact",1,512,512,0,0,0,0],"color":"#223333","bgcolor":"#335555","shape":1,"serialize_values":[null,null,null,null,null,null,null,null,null]},{"id":365,"type":"GetNode","pos":[5135.8005471978395,1714.2457069137763],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":17,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[875],"slot_index":0,"label":"IMAGE"}],"title":"Get_人物底图-原始","properties":{},"widgets_values":["人物底图-原始"],"serialize_values":[null]},{"id":151,"type":"GetImageSize","pos":[1780,980],"size":{"0":210,"1":50},"flags":{"collapsed":true},"order":52,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":537,"label":"image"}],"outputs":[{"name":"width","type":"INT","links":[312],"shape":3,"slot_index":0,"label":"width"},{"name":"height","type":"INT","links":[],"shape":3,"slot_index":1,"label":"height"}],"properties":{"Node name for S&R":"GetImageSize"}},{"id":316,"type":"ImageCrop+","pos":[3410,150],"size":{"0":290,"1":150},"flags":{},"order":120,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":644,"label":"image"},{"name":"width","type":0,"link":645,"widget":{"name":"width"},"label":"width"},{"name":"height","type":0,"link":646,"widget":{"name":"height"},"label":"height"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[859,866],"shape":3,"label":"IMAGE","slot_index":0},{"name":"x","type":"INT","links":[],"shape":3,"label":"x","slot_index":1},{"name":"y","type":"INT","links":[],"shape":3,"label":"y","slot_index":2}],"properties":{"Node name for S&R":"ImageCrop+"},"widgets_values":[256,256,"top-left",0,0],"serialize_values":[null,null,null,null,null]},{"id":206,"type":"ImageResize+","pos":[2781.317116862624,316.43150528225283],"size":{"0":320,"1":190},"flags":{},"order":114,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":616,"label":"image"},{"name":"width","type":"INT","link":623,"widget":{"name":"width"},"label":"width"},{"name":"height","type":"INT","link":624,"widget":{"name":"height"},"label":"height"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"width","type":"INT","links":[617,620,645],"shape":3,"slot_index":1,"label":"width"},{"name":"height","type":"INT","links":[622,646,664],"shape":3,"slot_index":2,"label":"height"}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[512,512,"lanczos",false,"always",8],"serialize_values":[null,null,null,null,null,null]},{"id":322,"type":"ConstrainImage|pysssss","pos":[3160,510],"size":{"0":320,"1":154},"flags":{"collapsed":true},"order":109,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":665,"label":"images"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[666],"shape":6,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"ConstrainImage|pysssss"},"widgets_values":[1024,1024,0,0,"no"],"serialize_values":[null,null,null,null,null]},{"id":351,"type":"GetNode","pos":[710,140],"size":{"0":210,"1":58},"flags":{},"order":18,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[908,909],"slot_index":0,"label":"IMAGE"}],"title":"Get_人物底图-原始","properties":{},"widgets_values":["人物底图-原始"],"serialize_values":[null]},{"id":353,"type":"GetImageSize","pos":[710,300],"size":{"0":210,"1":50},"flags":{},"order":50,"mode":2,"inputs":[{"name":"image","type":"IMAGE","link":908,"label":"image"}],"outputs":[{"name":"width","type":"INT","links":[714],"shape":3,"slot_index":0,"label":"width"},{"name":"height","type":"INT","links":[717],"shape":3,"slot_index":1,"label":"height"}],"properties":{"Node name for S&R":"GetImageSize"}},{"id":359,"type":"CM_IntBinaryOperation","pos":[990,160],"size":{"0":210,"1":82},"flags":{},"order":74,"mode":2,"inputs":[{"name":"a","type":"INT","link":714,"widget":{"name":"a"},"label":"a"}],"outputs":[{"name":"INT","type":"INT","links":[715,898],"shape":3,"slot_index":0,"label":"INT"}],"title":"CM_IntBinaryOperation","properties":{"Node name for S&R":"CM_IntBinaryOperation"},"widgets_values":["Div",0,2],"serialize_values":[null,null,null]},{"id":360,"type":"CM_IntBinaryOperation","pos":[990,320],"size":{"0":210,"1":82},"flags":{},"order":75,"mode":2,"inputs":[{"name":"a","type":"INT","link":717,"widget":{"name":"a"},"label":"a"}],"outputs":[{"name":"INT","type":"INT","links":[716,899],"shape":3,"slot_index":0,"label":"INT"}],"title":"CM_IntBinaryOperation","properties":{"Node name for S&R":"CM_IntBinaryOperation"},"widgets_values":["Div",0,2],"serialize_values":[null,null,null]},{"id":438,"type":"SetNode","pos":[287.89807709640206,3115.7414530261744],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":66,"mode":0,"inputs":[{"name":"MASK","type":"MASK","link":852,"label":"MASK"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_手动遮罩-原始","properties":{"previousName":"手动遮罩-原始"},"widgets_values":["手动遮罩-原始"],"serialize_values":[null]},{"id":490,"type":"GetNode","pos":[730,490],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":19,"mode":2,"outputs":[{"name":"MASK","type":"MASK","links":[887],"slot_index":0,"label":"MASK"}],"title":"Get_手动遮罩-原始","properties":{},"widgets_values":["手动遮罩-原始"],"serialize_values":[null]},{"id":494,"type":"SetNode","pos":[750,550],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":107,"mode":2,"inputs":[{"name":"MASK","type":"MASK","link":907,"label":"MASK"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_手动遮罩","properties":{"previousName":"手动遮罩"},"widgets_values":["手动遮罩"],"serialize_values":[null]},{"id":489,"type":"CropMask","pos":[990,490],"size":{"0":210,"1":114},"flags":{"collapsed":false},"order":96,"mode":2,"inputs":[{"name":"mask","type":"MASK","link":887,"slot_index":0,"label":"mask"},{"name":"x","type":"INT","link":896,"widget":{"name":"x"},"label":"x"},{"name":"y","type":"INT","link":897,"widget":{"name":"y"},"label":"y"},{"name":"width","type":"INT","link":898,"widget":{"name":"width"},"label":"width"},{"name":"height","type":"INT","link":899,"widget":{"name":"height"},"label":"height"}],"outputs":[{"name":"MASK","type":"MASK","links":[907],"shape":3,"slot_index":0,"label":"MASK"}],"properties":{"Node name for S&R":"CropMask"},"widgets_values":[0,0,512,512],"serialize_values":[null,null,null,null]},{"id":436,"type":"GetNode","pos":[1140,1670],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":20,"mode":0,"outputs":[{"name":"MASK","type":"MASK","links":[851],"slot_index":0,"label":"MASK"}],"title":"Get_手动遮罩","properties":{},"widgets_values":["手动遮罩"],"serialize_values":[null]},{"id":354,"type":"ImageCrop+","pos":[1270,120],"size":{"0":320,"1":170},"flags":{},"order":88,"mode":2,"inputs":[{"name":"image","type":"IMAGE","link":909,"label":"image"},{"name":"width","type":"INT","link":715,"widget":{"name":"width"},"label":"width"},{"name":"height","type":"INT","link":716,"widget":{"name":"height"},"label":"height"},{"name":"position","type":"COMBO","link":872,"widget":{"name":"position"},"slot_index":3,"label":"position"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[718,810],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"x","type":"INT","links":[896,912],"shape":3,"label":"x","slot_index":1},{"name":"y","type":"INT","links":[897,913],"shape":3,"label":"y","slot_index":2}],"properties":{"Node name for S&R":"ImageCrop+"},"widgets_values":[256,256,"top-right",0,0],"serialize_values":[null,null,"top-right",null,null]},{"id":501,"type":"SetNode","pos":[1440,380],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":95,"mode":2,"inputs":[{"name":"INT","type":"INT","link":912,"label":"INT"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_裁切_X","properties":{"previousName":"裁切_X"},"widgets_values":["裁切_X"],"serialize_values":[null]},{"id":502,"type":"SetNode","pos":[1440,420],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":97,"mode":2,"inputs":[{"name":"INT","type":"INT","link":913,"label":"INT"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_裁切_Y","properties":{"previousName":"裁切_Y"},"widgets_values":["裁切_Y"],"serialize_values":[null]},{"id":417,"type":"SetNode","pos":[1410,330],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":94,"mode":2,"inputs":[{"name":"IMAGE","type":"IMAGE","link":810,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_人物底图-裁切","properties":{"previousName":"人物底图-裁切"},"widgets_values":["人物底图-裁切"],"serialize_values":[null]},{"id":361,"type":"PreviewImage","pos":[1290,480],"size":{"0":300,"1":250},"flags":{},"order":93,"mode":2,"inputs":[{"name":"images","type":"IMAGE","link":718,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":504,"type":"GetNode","pos":[4905.8005471978395,1914.2457069137763],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":21,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[914],"slot_index":0,"label":"INT"}],"title":"Get_裁切_X","properties":{},"widgets_values":["裁切_X"],"serialize_values":[null]},{"id":505,"type":"Int","pos":[4915.8005471978395,1964.2457069137763],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":22,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[915],"shape":3,"slot_index":0,"label":"INT"}],"properties":{"Node name for S&R":"Int"},"widgets_values":[0],"serialize_values":[null]},{"id":511,"type":"GetNode","pos":[5035.8005471978395,1974.2457069137763],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":23,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[921],"slot_index":0,"label":"INT"}],"title":"Get_裁切_Y","properties":{},"widgets_values":["裁切_Y"],"serialize_values":[null]},{"id":503,"type":"Any Switch (rgthree)","pos":{"0":5075.802734375,"1":1914.245361328125,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":250,"1":110},"flags":{"collapsed":true},"order":51,"mode":0,"inputs":[{"name":"any_01","type":"INT","link":914,"dir":3,"label":"any_01"},{"name":"any_02","type":"INT","link":915,"dir":3,"label":"any_02"},{"name":"any_03","type":"INT","link":null,"dir":3,"label":"any_03"},{"name":"any_04","type":"INT","link":null,"dir":3,"label":"any_04"},{"name":"any_05","type":"INT","link":null,"dir":3,"label":"any_05"}],"outputs":[{"name":"*","type":"INT","links":[916],"shape":3,"dir":4,"label":"INT","slot_index":0}],"title":"裁切坐标_X","properties":{"Node name for S&R":"Any Switch (rgthree)"},"widgets_values":[],"serialize_values":[]},{"id":510,"type":"Any Switch (rgthree)","pos":{"0":5185.802734375,"1":1974.245361328125,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":250,"1":110},"flags":{"collapsed":true},"order":55,"mode":0,"inputs":[{"name":"any_01","type":"INT","link":921,"dir":3,"label":"any_01"},{"name":"any_02","type":"INT","link":922,"dir":3,"label":"any_02"},{"name":"any_03","type":"INT","link":null,"dir":3,"label":"any_03"},{"name":"any_04","type":"INT","link":null,"dir":3,"label":"any_04"},{"name":"any_05","type":"INT","link":null,"dir":3,"label":"any_05"}],"outputs":[{"name":"*","type":"INT","links":[923],"shape":3,"dir":4,"label":"INT","slot_index":0}],"title":"裁切坐标_Y","properties":{"Node name for S&R":"Any Switch (rgthree)"},"widgets_values":[],"serialize_values":[]},{"id":256,"type":"GetNode","pos":[1500,870],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":24,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[537,538,544],"slot_index":0,"label":"IMAGE"}],"title":"Get_人物底图-待处理","properties":{},"widgets_values":["人物底图-待处理"],"serialize_values":[null]},{"id":141,"type":"Reroute","pos":[2130,1130],"size":[75,26],"flags":{},"order":104,"mode":0,"inputs":[{"name":"","type":"*","link":290,"label":""}],"outputs":[{"name":"","type":"BOX","links":[736],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":94,"type":"IPAdapterFaceID","pos":[4430,640],"size":{"0":320,"1":322},"flags":{},"order":151,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":248,"label":"model"},{"name":"ipadapter","type":"IPADAPTER","link":250,"label":"ipadapter"},{"name":"image","type":"IMAGE","link":362,"label":"image"},{"name":"image_negative","type":"IMAGE","link":null,"label":"image_negative"},{"name":"attn_mask","type":"MASK","link":186,"label":"attn_mask"},{"name":"clip_vision","type":"CLIP_VISION","link":null,"label":"clip_vision"},{"name":"insightface","type":"INSIGHTFACE","link":null,"label":"insightface","slot_index":6}],"outputs":[{"name":"MODEL","type":"MODEL","links":[759],"shape":3,"label":"MODEL","slot_index":0},{"name":"face_image","type":"IMAGE","links":null,"shape":3,"label":"face_image"}],"properties":{"Node name for S&R":"IPAdapterFaceID"},"widgets_values":[0.7000000000000001,1,"linear","concat",0,1,"V only"],"serialize_values":[null,null,null,null,null,null,null]},{"id":414,"type":"Any Switch (rgthree)","pos":{"0":1350,"1":1480,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":250,"1":110},"flags":{"collapsed":true},"order":54,"mode":0,"inputs":[{"name":"any_01","type":"IMAGE","link":808,"dir":3,"label":"any_01"},{"name":"any_02","type":"IMAGE","link":809,"dir":3,"label":"any_02"},{"name":"any_03","type":"IMAGE","link":null,"dir":3,"label":"any_03"},{"name":"any_04","type":"IMAGE","link":null,"dir":3,"label":"any_04"},{"name":"any_05","type":"IMAGE","link":null,"dir":3,"label":"any_05"}],"outputs":[{"name":"*","type":"IMAGE","links":[807],"shape":3,"dir":4,"label":"IMAGE","slot_index":0}],"title":"底图裁切开关","properties":{"Node name for S&R":"Any Switch (rgthree)"},"widgets_values":[],"serialize_values":[]},{"id":433,"type":"Any Switch (rgthree)","pos":{"0":1360,"1":1610,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":250,"1":110},"flags":{"collapsed":true},"order":56,"mode":0,"inputs":[{"name":"any_01","type":"MASK","link":848,"dir":3,"label":"any_01"},{"name":"any_02","type":"MASK","link":851,"dir":3,"label":"any_02"},{"name":"any_03","type":"MASK","link":911,"dir":3,"label":"any_03"},{"name":"any_04","type":"MASK","link":null,"dir":3,"label":"any_04"},{"name":"any_05","type":"MASK","link":null,"dir":3,"label":"any_05"}],"outputs":[{"name":"*","type":"MASK","links":[850],"shape":3,"dir":4,"label":"MASK","slot_index":0}],"title":"自动/手动遮罩开关","properties":{"Node name for S&R":"Any Switch (rgthree)"},"widgets_values":[],"serialize_values":[]},{"id":410,"type":"Any Switch (rgthree)","pos":{"0":1350,"1":1920,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":250,"1":110},"flags":{"collapsed":true},"order":58,"mode":0,"inputs":[{"name":"any_01","type":"IMAGE","link":803,"dir":3,"label":"any_01"},{"name":"any_02","type":"IMAGE","link":804,"dir":3,"label":"any_02"},{"name":"any_03","type":"IMAGE","link":null,"dir":3,"label":"any_03"},{"name":"any_04","type":"IMAGE","link":null,"dir":3,"label":"any_04"},{"name":"any_05","type":"IMAGE","link":null,"dir":3,"label":"any_05"}],"outputs":[{"name":"*","type":"IMAGE","links":[806],"shape":3,"dir":4,"label":"IMAGE","slot_index":0}],"title":"脸部高清修复开关","properties":{"Node name for S&R":"Any Switch (rgthree)"},"widgets_values":[],"serialize_values":[]},{"id":437,"type":"SetNode","pos":[1570,1610],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":80,"mode":0,"inputs":[{"name":"MASK","type":"MASK","link":850,"label":"MASK"}],"outputs":[{"name":"*","type":"*","links":[],"slot_index":0,"label":"*"}],"title":"Set_人脸遮罩-原始","properties":{"previousName":"人脸遮罩-原始"},"widgets_values":["人脸遮罩-原始"],"serialize_values":[null]},{"id":413,"type":"SetNode","pos":[1560,1480],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":79,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":807,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_人物底图-待处理","properties":{"previousName":"人物底图-待处理"},"widgets_values":["人物底图-待处理"],"serialize_values":[null]},{"id":248,"type":"SetNode","pos":[1560,1920],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":82,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":806,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":[],"label":"*","slot_index":0}],"title":"Set_裁切换脸后最终图像","properties":{"previousName":"裁切换脸后最终图像"},"widgets_values":["裁切换脸后最终图像"],"serialize_values":[null]},{"id":415,"type":"GetNode","pos":[1130,1480],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":25,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[808],"slot_index":0,"label":"IMAGE"}],"title":"Get_人物底图-裁切","properties":{},"widgets_values":["人物底图-裁切"],"serialize_values":[null]},{"id":512,"type":"Int","pos":[5055.8005471978395,2024.2457069137763],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":26,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[922],"shape":3,"slot_index":0,"label":"INT"}],"properties":{"Node name for S&R":"Int"},"widgets_values":[0],"serialize_values":[null]},{"id":166,"type":"CM_IntBinaryOperation","pos":[1780,1040],"size":{"0":210,"1":82},"flags":{"collapsed":true},"order":76,"mode":0,"inputs":[{"name":"a","type":"INT","link":312,"widget":{"name":"a"},"label":"a"}],"outputs":[{"name":"INT","type":"INT","links":[324,325,326,327],"shape":3,"slot_index":0,"label":"INT"}],"title":"CM_IntBinaryOperation","properties":{"Node name for S&R":"CM_IntBinaryOperation"},"widgets_values":["Div",100,10],"serialize_values":[null,null,null]},{"id":116,"type":"LayerUtility: CropByMask","pos":[1754.6019574229736,697.6959729873854],"size":{"0":310,"1":182},"flags":{},"order":89,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":538,"label":"image"},{"name":"mask_for_crop","type":"MASK","link":854,"label":"mask_for_crop"},{"name":"top_reserve","type":"INT","link":324,"widget":{"name":"top_reserve"},"slot_index":2,"label":"top_reserve"},{"name":"bottom_reserve","type":"INT","link":325,"widget":{"name":"bottom_reserve"},"label":"bottom_reserve"},{"name":"left_reserve","type":"INT","link":326,"widget":{"name":"left_reserve"},"label":"left_reserve"},{"name":"right_reserve","type":"INT","link":327,"widget":{"name":"right_reserve"},"label":"right_reserve"}],"outputs":[{"name":"croped_image","type":"IMAGE","links":[226,242,790],"shape":3,"slot_index":0,"label":"croped_image"},{"name":"croped_mask","type":"MASK","links":[227,498,511],"shape":3,"slot_index":1,"label":"croped_mask"},{"name":"crop_box","type":"BOX","links":[290],"shape":3,"slot_index":2,"label":"crop_box"},{"name":"box_preview","type":"IMAGE","links":[],"shape":3,"slot_index":3,"label":"box_preview"}],"properties":{"Node name for S&R":"LayerUtility: CropByMask"},"widgets_values":[false,"mask_area",60,60,60,60],"serialize_values":[null,null,null,null,null,null]},{"id":243,"type":"Reroute","pos":[4640,1070],"size":[75,26],"flags":{},"order":110,"mode":0,"inputs":[{"name":"","type":"*","link":513,"label":""}],"outputs":[{"name":"","type":"MASK","links":[515],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":349,"type":"SetNode","pos":[6090,740],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":163,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":754,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":[],"slot_index":0,"label":"*"}],"title":"Set_换脸后色彩修复图像","properties":{"previousName":"换脸后色彩修复图像"},"widgets_values":["换脸后色彩修复图像"],"serialize_values":[null]},{"id":522,"type":"SetNode","pos":[5300,380],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":157,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":939,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":null,"label":"*"}],"title":"Set_换脸后图像","properties":{"previousName":"换脸后图像"},"widgets_values":["换脸后图像"],"serialize_values":[null]},{"id":435,"type":"GetNode","pos":[1140,1620],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":27,"mode":0,"outputs":[{"name":"MASK","type":"MASK","links":[848],"slot_index":0,"label":"MASK"}],"title":"Get_自动遮罩","properties":{},"widgets_values":["自动遮罩"],"serialize_values":[null]},{"id":411,"type":"GetNode","pos":[1130,1920],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":28,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[803],"slot_index":0,"label":"IMAGE"}],"title":"Get_换脸后修复图像","properties":{},"widgets_values":["换脸后修复图像"],"serialize_values":[null]},{"id":525,"type":"GetNode","pos":[1130,1790],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":29,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[941],"slot_index":0,"label":"IMAGE"}],"title":"Get_换脸后色彩修复图像","properties":{},"widgets_values":["换脸后色彩修复图像"],"serialize_values":[null]},{"id":498,"type":"GetNode","pos":[1130,1730],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":30,"mode":0,"outputs":[{"name":"MASK","type":"MASK","links":[911],"slot_index":0,"label":"MASK"}],"title":"Get_手动遮罩-原始","properties":{},"widgets_values":["手动遮罩-原始"],"serialize_values":[null]},{"id":526,"type":"GetNode","pos":[1130,1840],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":31,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[942],"slot_index":0,"label":"IMAGE"}],"title":"Get_换脸后图像","properties":{},"widgets_values":["换脸后图像"],"serialize_values":[null]},{"id":524,"type":"Any Switch (rgthree)","pos":{"0":1360,"1":1790,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":250,"1":110},"flags":{"collapsed":true},"order":57,"mode":0,"inputs":[{"name":"any_01","type":"IMAGE","link":941,"dir":3,"label":"any_01"},{"name":"any_02","type":"IMAGE","link":942,"dir":3,"label":"any_02"},{"name":"any_03","type":"IMAGE","link":null,"dir":3,"label":"any_03"},{"name":"any_04","type":"IMAGE","link":null,"dir":3,"label":"any_04"},{"name":"any_05","type":"IMAGE","link":null,"dir":3,"label":"any_05"}],"outputs":[{"name":"*","type":"IMAGE","links":[940],"shape":3,"dir":4,"label":"IMAGE","slot_index":0}],"title":"脸部色彩修复开关","properties":{"Node name for S&R":"Any Switch (rgthree)"},"widgets_values":[],"serialize_values":[]},{"id":523,"type":"SetNode","pos":[1570,1790],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":81,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":940,"label":"IMAGE"}],"outputs":[{"name":"*","type":"*","links":[],"label":"*","slot_index":0}],"title":"Set_裁切换脸后图像","properties":{"previousName":"裁切换脸后图像"},"widgets_values":["裁切换脸后图像"],"serialize_values":[null]},{"id":412,"type":"GetNode","pos":[1120,1990],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":32,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[804],"slot_index":0,"label":"IMAGE"}],"title":"Get_裁切换脸后图像","properties":{},"widgets_values":["裁切换脸后图像"],"serialize_values":[null]},{"id":223,"type":"Reroute","pos":[5428.086127387137,237.64450624254002],"size":[75,26],"flags":{},"order":156,"mode":0,"inputs":[{"name":"","type":"*","link":750,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[466,928,943,946],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":340,"type":"Image Comparer (rgthree)","pos":{"0":4330,"1":1510,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":430,"1":530},"flags":{},"order":125,"mode":2,"inputs":[{"name":"image_a","type":"IMAGE","link":797,"dir":3,"label":"image_a"},{"name":"image_b","type":"IMAGE","link":798,"dir":3,"label":"image_b"}],"outputs":[],"properties":{"comparer_mode":"Slide","Node name for S&R":"Image Comparer (rgthree)"},"widgets_values":[[]],"serialize_values":[null]},{"id":346,"type":"Reroute","pos":[2790,1440],"size":[75,26],"flags":{},"order":59,"mode":2,"inputs":[{"name":"","type":"*","link":710,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[699,798],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":350,"type":"GetNode","pos":[2540,1470],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":33,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[710],"slot_index":0,"label":"IMAGE"}],"title":"Get_裁切换脸后图像","properties":{},"widgets_values":["裁切换脸后图像"],"serialize_values":[null]},{"id":392,"type":"DifferentialDiffusion","pos":[4890,150],"size":{"0":210,"1":30},"flags":{},"order":152,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":759,"label":"model"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[760],"shape":3,"slot_index":0,"label":"MODEL"}],"properties":{"Node name for S&R":"DifferentialDiffusion"},"color":"#233","bgcolor":"#355"},{"id":15,"type":"FreeU_V2","pos":[209.76952228248342,170],"size":{"0":210,"1":130},"flags":{"collapsed":false},"order":87,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":749,"label":"model"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[739],"shape":3,"slot_index":0,"label":"MODEL"}],"properties":{"Node name for S&R":"FreeU_V2"},"widgets_values":[1,1,1,1],"serialize_values":[null,null,null,null]},{"id":126,"type":"IPAdapterUnifiedLoaderFaceID","pos":[4074.0942163512395,648.2737017072258],"size":{"0":320,"1":130},"flags":{},"order":148,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":249,"label":"model"},{"name":"ipadapter","type":"IPADAPTER","link":null,"label":"ipadapter"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[248],"shape":3,"slot_index":0,"label":"MODEL"},{"name":"ipadapter","type":"IPADAPTER","links":[250],"shape":3,"slot_index":1,"label":"ipadapter"}],"title":"IPAdapterUnifiedLoaderFaceID","properties":{"Node name for S&R":"IPAdapterUnifiedLoaderFaceID"},"widgets_values":["FACEID PLUS V2",0.7000000000000001,"CPU"],"serialize_values":[null,null,null]},{"id":395,"type":"Reroute","pos":[4860,550],"size":[75,26],"flags":{},"order":146,"mode":0,"inputs":[{"name":"","type":"*","link":768,"label":""}],"outputs":[{"name":"","type":"MASK","links":[958],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":394,"type":"Reroute","pos":[4868.086127387137,667.64450624254],"size":[75,26],"flags":{},"order":134,"mode":0,"inputs":[{"name":"","type":"*","link":802,"label":""}],"outputs":[{"name":"","type":"IMAGE","links":[766],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":46,"type":"SetLatentNoiseMask","pos":[4948.086127387137,557.64450624254],"size":{"0":210,"1":50},"flags":{"collapsed":false},"order":149,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":54,"label":"samples"},{"name":"mask","type":"MASK","link":958,"label":"mask"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[962],"shape":3,"slot_index":0,"label":"LATENT"}],"properties":{"Node name for S&R":"SetLatentNoiseMask"}},{"id":29,"type":"ApplyInstantID","pos":[4439.336365578433,119.50131328494065],"size":{"0":320,"1":270},"flags":{},"order":140,"mode":0,"inputs":[{"name":"instantid","type":"INSTANTID","link":30,"label":"instantid"},{"name":"insightface","type":"FACEANALYSIS","link":31,"label":"insightface"},{"name":"control_net","type":"CONTROL_NET","link":32,"slot_index":2,"label":"control_net"},{"name":"image","type":"IMAGE","link":531,"label":"image"},{"name":"model","type":"MODEL","link":null,"label":"model"},{"name":"positive","type":"CONDITIONING","link":null,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":null,"label":"negative"},{"name":"image_kps","type":"IMAGE","link":74,"label":"image_kps"},{"name":"mask","type":"MASK","link":null,"label":"mask"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[249],"shape":3,"slot_index":0,"label":"MODEL"},{"name":"positive","type":"CONDITIONING","links":[963],"shape":3,"slot_index":1,"label":"positive"},{"name":"negative","type":"CONDITIONING","links":[964],"shape":3,"slot_index":2,"label":"negative"}],"properties":{"Node name for S&R":"ApplyInstantID"},"widgets_values":[0.8,0,1],"serialize_values":[null,null,null]},{"id":47,"type":"InpaintModelConditioning","pos":[5240,580],"size":{"0":220,"1":110},"flags":{},"order":34,"mode":2,"inputs":[{"name":"positive","type":"CONDITIONING","link":null,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":null,"label":"negative"},{"name":"vae","type":"VAE","link":null,"label":"vae"},{"name":"pixels","type":"IMAGE","link":null,"label":"pixels"},{"name":"mask","type":"MASK","link":null,"label":"mask"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[],"shape":3,"slot_index":0,"label":"positive"},{"name":"negative","type":"CONDITIONING","links":[],"shape":3,"slot_index":1,"label":"negative"},{"name":"latent","type":"LATENT","links":[],"shape":3,"slot_index":2,"label":"latent"}],"properties":{"Node name for S&R":"InpaintModelConditioning"}},{"id":397,"type":"LayerFilter: SkinBeauty","pos":[5630,180],"size":{"0":280,"1":130},"flags":{},"order":159,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":943,"label":"image"}],"outputs":[{"name":"image","type":"IMAGE","links":[799],"shape":3,"slot_index":0,"label":"image"},{"name":"beauty_mask","type":"MASK","links":null,"shape":3,"label":"beauty_mask"}],"properties":{"Node name for S&R":"LayerFilter: SkinBeauty"},"widgets_values":[20,0,75],"serialize_values":[null,null,null]},{"id":528,"type":"Image Comparer (rgthree)","pos":{"0":5970,"1":330,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":280,"1":360},"flags":{},"order":164,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":968,"dir":3,"label":"image_a"},{"name":"image_b","type":"IMAGE","link":946,"dir":3,"label":"image_b"}],"outputs":[],"properties":{"comparer_mode":"Slide","Node name for S&R":"Image Comparer (rgthree)"},"widgets_values":[[]],"serialize_values":[null]},{"id":61,"type":"Reroute","pos":[3160,610],"size":[75,26],"flags":{},"order":138,"mode":0,"inputs":[{"name":"","type":"*","link":975,"label":""}],"outputs":[{"name":"","type":"MASK","links":[186,768],"slot_index":0,"label":""}],"title":"脸部遮罩","properties":{"showOutputText":false,"horizontal":false,"showTitle":true},"color":"#432","bgcolor":"#653"},{"id":239,"type":"ImageToMask","pos":[2801.317116862624,726.4315052822533],"size":{"0":270,"1":60},"flags":{},"order":126,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":506,"label":"image"}],"outputs":[{"name":"MASK","type":"MASK","links":[906,976],"shape":3,"label":"MASK","slot_index":0}],"title":"ImageToMask","properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"],"serialize_values":[null]},{"id":536,"type":"Reroute","pos":[3160,1010],"size":[75,26],"flags":{},"order":132,"mode":0,"inputs":[{"name":"","type":"*","link":976,"label":""}],"outputs":[{"name":"","type":"MASK","links":[977],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":255,"type":"Reroute","pos":[5470,1000],"size":[75,26],"flags":{},"order":139,"mode":0,"inputs":[{"name":"","type":"*","link":977,"label":""}],"outputs":[{"name":"","type":"MASK","links":[972],"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":535,"type":"LayerMask: MaskGrow","pos":[5650,860],"size":{"0":280,"1":110},"flags":{},"order":147,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":972,"label":"mask"}],"outputs":[{"name":"mask","type":"MASK","links":[974,978],"shape":3,"label":"mask","slot_index":0}],"properties":{"Node name for S&R":"LayerMask: MaskGrow"},"widgets_values":[false,-20,10],"serialize_values":[null,null,null]},{"id":37,"type":"PreviewImage","pos":[5220,450],"size":{"0":280,"1":330},"flags":{},"order":155,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":36,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":136,"type":"PreviewImage","pos":[5793.5557663818645,1239.1301334545753],"size":{"0":350,"1":310},"flags":{},"order":135,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":267,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":82,"type":"LayerMask: MaskGrow","pos":[2800,870],"size":{"0":280,"1":110},"flags":{},"order":131,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":906,"label":"mask"},{"name":"grow","type":"INT","link":983,"widget":{"name":"grow"},"label":"grow"},{"name":"blur","type":"INT","link":982,"widget":{"name":"blur"},"slot_index":2,"label":"blur"}],"outputs":[{"name":"mask","type":"MASK","links":[176,975],"shape":3,"label":"mask","slot_index":0}],"properties":{"Node name for S&R":"LayerMask: MaskGrow"},"widgets_values":[false,20,5],"serialize_values":[null,null,null]},{"id":540,"type":"ImpactInt","pos":[670,1670],"size":{"0":210,"1":60},"flags":{"pinned":true},"order":35,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[982,991],"shape":3,"slot_index":0,"label":"INT"}],"title":"遮罩模糊","properties":{"Node name for S&R":"ImpactInt"},"widgets_values":[5],"color":"#432","bgcolor":"#653","serialize_values":[null]},{"id":539,"type":"ImpactInt","pos":[670,1520],"size":{"0":210,"1":60},"flags":{"pinned":true},"order":36,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[983,990],"shape":3,"slot_index":0,"label":"INT"}],"title":"遮罩扩展","properties":{"Node name for S&R":"ImpactInt"},"widgets_values":[20],"color":"#432","bgcolor":"#653","serialize_values":[null]},{"id":464,"type":"PrimitiveNode","pos":[280,1520],"size":{"0":210,"1":106},"flags":{"pinned":true},"order":37,"mode":0,"outputs":[{"name":"COMBO","type":"COMBO","links":[872],"slot_index":0,"widget":{"name":"position"},"label":"COMBO"}],"title":"裁切区域","properties":{"Run widget replace on values":false},"widgets_values":["top-right","fixed",""],"color":"#432","bgcolor":"#653","serialize_values":[null,null,null]},{"id":542,"type":"Seed Everywhere","pos":[280,1750],"size":{"0":300,"1":82},"flags":{"pinned":true},"order":38,"mode":0,"outputs":[{"name":"INT","type":"INT","links":null,"shape":3,"label":"INT"}],"properties":{"Node name for S&R":"Seed Everywhere","group_restricted":0,"color_restricted":0},"widgets_values":[2,"fixed"],"color":"#432","bgcolor":"#653","serialize_values":[null,null]},{"id":409,"type":"Fast Groups Muter (rgthree)","pos":{"0":-190,"1":1500,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":400,"1":430},"flags":{"pinned":true},"order":39,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null,"label":"OPT_CONNECTION"}],"properties":{"matchColors":"","matchTitle":"","showNav":true,"sort":"position","customSortAlphabet":"","toggleRestriction":"default"},"color":"#322","bgcolor":"#533"},{"id":49,"type":"ConstrainImage|pysssss","pos":[-172.75387070907018,3100.25266004054],"size":{"0":320,"1":150},"flags":{"collapsed":true},"order":67,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":59,"label":"images"},{"name":"max_width","type":"INT","link":864,"widget":{"name":"max_width"},"label":"max_width"},{"name":"max_height","type":"INT","link":865,"widget":{"name":"max_height"},"label":"max_height"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[656],"shape":6,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"ConstrainImage|pysssss"},"widgets_values":[1024,1024,0,0,"no"],"serialize_values":[null,null,null,null,null]},{"id":407,"type":"ColorMatch","pos":[5630,380],"size":{"0":280,"1":80},"flags":{"collapsed":false},"order":160,"mode":0,"inputs":[{"name":"image_ref","type":"IMAGE","link":800,"slot_index":0,"label":"image_ref"},{"name":"image_target","type":"IMAGE","link":799,"label":"image_target"}],"outputs":[{"name":"image","type":"IMAGE","links":[930],"shape":3,"slot_index":0,"label":"image"}],"properties":{"Node name for S&R":"ColorMatch"},"widgets_values":["mkl"],"serialize_values":[null]},{"id":225,"type":"LayerColor: Brightness & Contrast","pos":[5630,550],"size":{"0":280,"1":110},"flags":{},"order":161,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":930,"label":"image"}],"outputs":[{"name":"image","type":"IMAGE","links":[931],"shape":3,"slot_index":0,"label":"image"}],"properties":{"Node name for S&R":"LayerColor: Brightness & Contrast"},"widgets_values":[1,1,1],"serialize_values":[null,null,null]},{"id":36,"type":"VAEDecode","pos":[5240,270],"size":{"0":210,"1":50},"flags":{"collapsed":false},"order":154,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":35,"label":"samples"},{"name":"vae","type":"VAE","link":null,"label":"vae"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[36,750,939],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":534,"type":"MaskPreview+","pos":[6000,800],"size":{"0":230,"1":250},"flags":{},"order":150,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":974,"label":"mask"}],"properties":{"Node name for S&R":"MaskPreview+"}},{"id":184,"type":"PrepImageForClipVision","pos":[4074.0942163512395,858.2737017072258],"size":{"0":320,"1":110},"flags":{},"order":48,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":530,"label":"image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[362,363],"shape":3,"slot_index":0,"label":"IMAGE"}],"title":"PrepImageForClipVision","properties":{"Node name for S&R":"PrepImageForClipVision"},"widgets_values":["LANCZOS","center",0],"serialize_values":[null,null,null]},{"id":228,"type":"LayerUtility: ImageBlend","pos":[5966.906402896137,128.87678165628444],"size":{"0":280,"1":150},"flags":{},"order":162,"mode":0,"inputs":[{"name":"background_image","type":"IMAGE","link":466,"label":"background_image"},{"name":"layer_image","type":"IMAGE","link":931,"label":"layer_image"},{"name":"layer_mask","type":"MASK","link":978,"label":"layer_mask"}],"outputs":[{"name":"image","type":"IMAGE","links":[754,968],"shape":3,"slot_index":0,"label":"image"}],"properties":{"Node name for S&R":"LayerUtility: ImageBlend"},"widgets_values":[false,"normal",100],"serialize_values":[null,null,null]},{"id":39,"type":"Image Comparer (rgthree)","pos":{"0":717.9859619140625,"1":2328.1943359375,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":590,"1":750},"flags":{"pinned":false},"order":49,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":861,"dir":3,"label":"image_a"},{"name":"image_b","type":"IMAGE","link":860,"dir":3,"label":"image_b"}],"outputs":[],"title":"裁切换脸图对比","properties":{"comparer_mode":"Slide","Node name for S&R":"Image Comparer (rgthree)"},"widgets_values":[[]],"serialize_values":[null]},{"id":77,"type":"Image Comparer (rgthree)","pos":{"0":1357.986083984375,"1":2328.1943359375,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":610,"1":750},"flags":{"pinned":false},"order":64,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":527,"dir":3,"label":"image_a"},{"name":"image_b","type":"IMAGE","link":281,"dir":3,"label":"image_b"}],"outputs":[],"title":"最终图像对比","properties":{"comparer_mode":"Slide","Node name for S&R":"Image Comparer (rgthree)"},"widgets_values":[[]],"serialize_values":[null]},{"id":135,"type":"Image Overlay","pos":[5390,1270],"size":{"0":320,"1":290},"flags":{},"order":130,"mode":0,"inputs":[{"name":"base_image","type":"IMAGE","link":523,"label":"base_image","slot_index":0},{"name":"overlay_image","type":"IMAGE","link":322,"label":"overlay_image"},{"name":"optional_mask","type":"MASK","link":1010,"slot_index":2,"label":"optional_mask"},{"name":"x_offset","type":"INT","link":441,"widget":{"name":"x_offset"},"label":"x_offset"},{"name":"y_offset","type":"INT","link":440,"widget":{"name":"y_offset"},"label":"y_offset"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[267,876],"shape":3,"slot_index":0,"label":"IMAGE"}],"properties":{"Node name for S&R":"Image Overlay"},"widgets_values":["None","nearest-exact",1,512,512,0,0,0,0],"color":"#223333","bgcolor":"#335555","shape":1,"serialize_values":[null,null,null,null,null,null,null,null,null]},{"id":482,"type":"PreviewImage","pos":[5780,1600],"size":{"0":370,"1":400},"flags":{},"order":143,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":883,"label":"images"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":338,"type":"ColorMatch","pos":[4010,1780],"size":{"0":260,"1":80},"flags":{"collapsed":false},"order":117,"mode":2,"inputs":[{"name":"image_ref","type":"IMAGE","link":794,"slot_index":0,"label":"image_ref"},{"name":"image_target","type":"IMAGE","link":694,"label":"image_target"}],"outputs":[{"name":"image","type":"IMAGE","links":[735,797],"shape":3,"slot_index":0,"label":"image"}],"properties":{"Node name for S&R":"ColorMatch"},"widgets_values":["mkl"],"serialize_values":[null]},{"id":317,"type":"InvertMask","pos":[5150,1500],"size":{"0":210,"1":30},"flags":{"collapsed":true},"order":122,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":652,"label":"mask"}],"outputs":[{"name":"MASK","type":"MASK","links":[1010],"shape":3,"slot_index":0,"label":"MASK"}],"properties":{"Node name for S&R":"InvertMask"}},{"id":545,"type":"Reroute","pos":[930,1670],"size":[75,26],"flags":{},"order":60,"mode":0,"inputs":[{"name":"","type":"*","link":991,"label":""}],"outputs":[{"name":"","type":"INT","links":null,"slot_index":0,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":544,"type":"Reroute","pos":[920,1520],"size":[75,26],"flags":{},"order":61,"mode":0,"inputs":[{"name":"","type":"*","link":990,"label":""}],"outputs":[{"name":"","type":"INT","links":null,"label":""}],"properties":{"showOutputText":false,"horizontal":false}},{"id":31,"type":"LoadImage","pos":[-177.92174583698588,2279.004328391565],"size":{"0":250,"1":320},"flags":{"collapsed":false},"order":40,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[679],"shape":3,"slot_index":0,"label":"IMAGE"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"InstantID参考图","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["微信图片_20240503134014 (3).jpg","image"],"color":"#232","bgcolor":"#353","serialize_values":[null,null]},{"id":38,"type":"LoadImage","pos":[120,2320],"size":{"0":550,"1":750},"flags":{},"order":41,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[238,281,528],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":[852],"shape":3,"label":"MASK","slot_index":1}],"title":"人物底图","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["微信图片_20240503234643.jpg","image"],"color":"#332922","bgcolor":"#593930","serialize_values":[null,null]},{"id":23,"type":"LoadImage","pos":[-183.35248051645775,2735.779845420963],"size":{"0":260,"1":330},"flags":{},"order":42,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[59],"shape":3,"label":"IMAGE","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"MASK"}],"title":"IPA-FaceID参考图","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["微信图片_20240503134026 (2).jpg","image"],"color":"#232","bgcolor":"#353","serialize_values":[null,null]},{"id":10,"type":"CLIPTextEncode","pos":[277,682],"size":{"0":210,"1":54},"flags":{"collapsed":true},"order":69,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":null,"label":"clip","slot_index":0},{"name":"text","type":"STRING","link":1033,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[12],"slot_index":0,"label":"CONDITIONING"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"serialize_values":[""]},{"id":11,"type":"CLIPTextEncode","pos":[277,732],"size":{"0":210,"1":54},"flags":{"collapsed":true},"order":70,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":null,"label":"clip"},{"name":"text","type":"STRING","link":1034,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[13],"slot_index":0,"label":"CONDITIONING"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark"],"serialize_values":["text, watermark"]},{"id":244,"type":"LayerMask: MaskGrow","pos":[4920,1560],"size":{"0":320,"1":110},"flags":{},"order":115,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":515,"label":"mask"}],"outputs":[{"name":"mask","type":"MASK","links":[652],"shape":3,"label":"mask","slot_index":0}],"properties":{"Node name for S&R":"LayerMask: MaskGrow"},"widgets_values":[false,30,10],"color":"#432","bgcolor":"#653","serialize_values":[null,null,null]},{"id":20,"type":"KSampler","pos":[4880,240],"size":{"0":320,"1":260},"flags":{},"order":153,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":760,"label":"model"},{"name":"positive","type":"CONDITIONING","link":963,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":964,"label":"negative"},{"name":"latent_image","type":"LATENT","link":962,"label":"latent_image"},{"name":"seed","type":"INT","link":null,"widget":{"name":"seed"},"label":"seed"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[35],"slot_index":0,"label":"LATENT"}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[3,"fixed",8,1.5,"dpmpp_sde","karras",0.8],"serialize_values":[null,null,null,null,null,null,null]},{"id":390,"type":"LayerFilter: Sharp & Soft","pos":[5640,120],"size":{"0":280,"1":60},"flags":{"collapsed":true},"order":158,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":928,"label":"images"}],"outputs":[{"name":"image","type":"IMAGE","links":[],"shape":3,"slot_index":0,"label":"image"}],"properties":{"Node name for S&R":"LayerFilter: Sharp & Soft"},"widgets_values":["sharp"],"serialize_values":[null]},{"id":335,"type":"SUPIR_model_loader_v2","pos":[2910,1260],"size":{"0":400,"1":170},"flags":{},"order":43,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":null,"slot_index":0,"label":"model"},{"name":"clip","type":"CLIP","link":null,"label":"clip"},{"name":"vae","type":"VAE","link":null,"label":"vae"}],"outputs":[{"name":"SUPIR_model","type":"SUPIRMODEL","links":[681,685],"shape":3,"slot_index":0,"label":"SUPIR_model"},{"name":"SUPIR_VAE","type":"SUPIRVAE","links":[680,687],"shape":3,"slot_index":1,"label":"SUPIR_VAE"}],"title":"SUPIR_model_loader_v2","properties":{"Node name for S&R":"SUPIR_model_loader_v2"},"widgets_values":["Supir\\SUPIR-v0Q.ckpt",true,"bf16",false],"serialize_values":[null,null,null,null]},{"id":336,"type":"ImpactInt","pos":[3490,1260],"size":{"0":210,"1":60},"flags":{},"order":44,"mode":2,"outputs":[{"name":"INT","type":"INT","links":[695],"shape":3,"slot_index":0,"label":"INT"}],"title":"TileSize","properties":{"Node name for S&R":"ImpactInt"},"widgets_values":[512],"color":"#432","bgcolor":"#653","serialize_values":[null]},{"id":332,"type":"SUPIR_sample","pos":[3602.2372649576178,1583.339820754647],"size":{"0":320,"1":450},"flags":{},"order":105,"mode":2,"inputs":[{"name":"SUPIR_model","type":"SUPIRMODEL","link":681,"slot_index":0,"label":"SUPIR_model"},{"name":"latents","type":"LATENT","link":682,"label":"latents"},{"name":"positive","type":"SUPIR_cond_pos","link":683,"slot_index":2,"label":"positive"},{"name":"negative","type":"SUPIR_cond_neg","link":684,"label":"negative"},{"name":"sampler_tile_size","type":"INT","link":null,"widget":{"name":"sampler_tile_size"},"label":"sampler_tile_size"}],"outputs":[{"name":"latent","type":"LATENT","links":[688],"shape":3,"slot_index":0,"label":"latent"}],"properties":{"Node name for S&R":"SUPIR_sample"},"widgets_values":[1,"fixed",10,1.2,1.2,5,1.002,1,0.98,1,1,false,"RestoreDPMPP2MSampler",1024,256],"color":"#233","bgcolor":"#355","serialize_values":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]},{"id":331,"type":"SUPIR_first_stage","pos":[2912.2372649576178,1583.339820754647],"size":{"0":290,"1":142},"flags":{},"order":83,"mode":2,"inputs":[{"name":"SUPIR_VAE","type":"SUPIRVAE","link":680,"slot_index":0,"label":"SUPIR_VAE"},{"name":"image","type":"IMAGE","link":699,"label":"image","slot_index":1},{"name":"encoder_tile_size","type":"INT","link":null,"widget":{"name":"encoder_tile_size"},"label":"encoder_tile_size"},{"name":"decoder_tile_size","type":"INT","link":null,"widget":{"name":"decoder_tile_size"},"label":"decoder_tile_size"}],"outputs":[{"name":"SUPIR_VAE","type":"SUPIRVAE","links":[692],"shape":3,"slot_index":0,"label":"SUPIR_VAE"},{"name":"denoised_image","type":"IMAGE","links":[693],"shape":3,"slot_index":1,"label":"denoised_image"},{"name":"denoised_latents","type":"LATENT","links":[686],"shape":3,"slot_index":2,"label":"denoised_latents"}],"properties":{"Node name for S&R":"SUPIR_first_stage"},"widgets_values":[false,512,512,"bf16"],"color":"#233","bgcolor":"#355","serialize_values":[null,null,null,null]},{"id":337,"type":"SUPIR_encode","pos":[3312.237264957617,1583.339820754647],"size":{"0":220,"1":130},"flags":{"collapsed":false},"order":90,"mode":2,"inputs":[{"name":"SUPIR_VAE","type":"SUPIRVAE","link":692,"label":"SUPIR_VAE"},{"name":"image","type":"IMAGE","link":693,"label":"image"},{"name":"encoder_tile_size","type":"INT","link":null,"widget":{"name":"encoder_tile_size"},"label":"encoder_tile_size"}],"outputs":[{"name":"latent","type":"LATENT","links":[682],"shape":3,"slot_index":0,"label":"latent"}],"properties":{"Node name for S&R":"SUPIR_encode"},"widgets_values":[false,512,"bf16"],"serialize_values":[null,null,null]},{"id":334,"type":"SUPIR_decode","pos":[4000,1580],"size":{"0":260,"1":100},"flags":{"collapsed":false},"order":112,"mode":2,"inputs":[{"name":"SUPIR_VAE","type":"SUPIRVAE","link":687,"slot_index":0,"label":"SUPIR_VAE"},{"name":"latents","type":"LATENT","link":688,"label":"latents"},{"name":"decoder_tile_size","type":"INT","link":null,"widget":{"name":"decoder_tile_size"},"label":"decoder_tile_size"}],"outputs":[{"name":"image","type":"IMAGE","links":[694],"shape":3,"slot_index":0,"label":"image"}],"properties":{"Node name for S&R":"SUPIR_decode"},"widgets_values":[false,512],"serialize_values":[null,null]},{"id":145,"type":"LayerMask: PersonMaskUltra V2","pos":[1757.7323947482505,131.466610378689],"size":{"0":320,"1":370},"flags":{"collapsed":false},"order":53,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":544,"label":"images"}],"outputs":[{"name":"image","type":"IMAGE","links":[547],"shape":3,"slot_index":0,"label":"image"},{"name":"mask","type":"MASK","links":[847],"shape":3,"slot_index":1,"label":"mask"}],"properties":{"Node name for S&R":"LayerMask: PersonMaskUltra V2"},"widgets_values":[true,false,false,false,false,false,0.3,"PyMatting",6,6,0.01,0.99,true],"serialize_values":[null,null,null,null,null,null,null,null,null,null,null,null,null]},{"id":557,"type":"SDXLPromptStyler","pos":[-204,671],"size":{"0":403.171630859375,"1":292.05474853515625},"flags":{},"order":45,"mode":0,"outputs":[{"name":"text_positive","type":"STRING","links":[1033],"shape":3,"label":"text_positive","slot_index":0},{"name":"text_negative","type":"STRING","links":[1034],"shape":3,"label":"text_negative","slot_index":1}],"properties":{"Node name for S&R":"SDXLPromptStyler"},"widgets_values":["portrait of a person","","ads-advertising",true,true,true],"color":"#232","bgcolor":"#353","serialize_values":[null,null,null,null,null,null]},{"id":372,"type":"Note","pos":[-1030,1510],"size":{"0":650,"1":400},"flags":{},"order":46,"mode":0,"properties":{"text":""},"widgets_values":["说明：\n\n1. 缺省模式：首选自动遮罩，不启用裁切底图，默认未开启脸部高清修复；\n\n2. 裁切底图：当脸部极小无法自动抠出脸部遮罩，或底图尺寸过大爆显存时，可启用裁切底图；缺省是将底图长宽分别缩小一半从中部裁剪。如果裁切后脸部不在区域内，则可通过调节裁剪方位来使脸部落在裁切区域内。\n\n3. 手动遮罩：如果想启用手动涂抹生成遮罩，则关闭自动生成遮罩模式。\n\n4. 参数调节：由于每张底图、参考图的差异性，如想达到最佳效果，还需根据情况调整相关参数，如当脸部有遮挡采用手动遮罩模式情况下，需缩小遮罩扩展/模糊范围参数。\n\n5. 模型首选juggernautXL_v9-Lightning_4S或HelloWorld 新世界v3.2 AutoDPO，切换模型需根据模型特点调整相应步数、采样器等参数。"],"color":"#432","bgcolor":"#653","serialize_values":[null]},{"id":16,"type":"CheckpointLoaderSimple","pos":[-210.23047771751658,130],"size":{"0":380,"1":130},"flags":{},"order":47,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[251,748],"shape":3,"slot_index":0,"label":"MODEL"},{"name":"CLIP","type":"CLIP","links":[19],"shape":3,"slot_index":1,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[16],"shape":3,"slot_index":2,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["juggernautXL_v9Rdphoto2Lightning(V9)"],"serialize_values":["6775_8945_10339@c8df560d29.safetensors"]},{"id":384,"type":"PerturbedAttentionGuidance","pos":[200,120],"size":{"0":220,"1":60},"flags":{"collapsed":true},"order":72,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":748,"label":"model"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[749],"shape":3,"slot_index":0,"label":"MODEL"}],"properties":{"Node name for S&R":"PerturbedAttentionGuidance"},"widgets_values":[3],"serialize_values":[null]}],"links":[[12,10,0,13,0,"CONDITIONING"],[13,11,0,13,1,"CONDITIONING"],[16,16,2,14,2,"VAE"],[19,16,1,17,1,"CLIP"],[20,17,0,18,0,"MODEL"],[21,17,1,18,1,"CLIP"],[28,27,0,28,0,"FACEANALYSIS"],[30,26,0,29,0,"INSTANTID"],[31,27,0,29,1,"FACEANALYSIS"],[32,30,0,29,2,"CONTROL_NET"],[35,20,0,36,0,"LATENT"],[36,36,0,37,0,"IMAGE"],[54,45,0,46,0,"LATENT"],[59,23,0,49,0,"IMAGE"],[74,28,0,29,7,"IMAGE"],[75,28,0,57,0,"IMAGE"],[78,43,0,28,1,"IMAGE"],[176,82,0,41,0,"MASK"],[186,61,0,94,4,"MASK"],[205,56,0,64,0,"IMAGE"],[226,116,0,117,0,"IMAGE"],[227,116,1,118,0,"MASK"],[238,38,0,33,0,"IMAGE"],[242,116,0,123,0,"IMAGE"],[248,126,0,94,0,"MODEL"],[249,29,0,126,0,"MODEL"],[250,126,1,94,1,"IPADAPTER"],[251,16,0,19,0,"MODEL"],[267,135,0,136,0,"IMAGE"],[269,132,2,138,1,"INT"],[270,132,3,138,2,"INT"],[281,38,0,77,1,"IMAGE"],[290,116,2,141,0,"*"],[312,151,0,166,0,"INT"],[322,138,0,135,1,"IMAGE"],[324,166,0,116,2,"INT"],[325,166,0,116,3,"INT"],[326,166,0,116,4,"INT"],[327,166,0,116,5,"INT"],[362,184,0,94,2,"IMAGE"],[363,184,0,64,0,"IMAGE"],[436,123,0,212,0,"IMAGE"],[440,132,1,135,4,"INT"],[441,132,0,135,3,"INT"],[449,217,0,132,0,"BOX"],[466,223,0,228,0,"IMAGE"],[484,16,1,10,0,"CLIP"],[485,16,1,11,0,"CLIP"],[486,15,0,29,4,"MODEL"],[487,10,0,29,5,"CONDITIONING"],[488,11,0,29,6,"CONDITIONING"],[489,16,2,45,1,"VAE"],[490,16,2,36,1,"VAE"],[491,16,1,10,0,"CLIP"],[492,16,1,11,0,"CLIP"],[493,15,0,29,4,"MODEL"],[494,10,0,29,5,"CONDITIONING"],[495,11,0,29,6,"CONDITIONING"],[496,16,2,45,1,"VAE"],[497,16,2,36,1,"VAE"],[498,116,1,234,0,"MASK"],[506,235,0,239,0,"IMAGE"],[508,235,0,40,0,"IMAGE"],[511,116,1,242,0,"*"],[513,242,0,243,0,"*"],[515,243,0,244,0,"MASK"],[523,249,0,135,0,"IMAGE"],[525,250,0,138,0,"IMAGE"],[527,251,0,77,0,"IMAGE"],[528,38,0,236,0,"*"],[530,253,0,184,0,"IMAGE"],[531,254,0,29,3,"IMAGE"],[537,256,0,151,0,"IMAGE"],[538,256,0,116,0,"IMAGE"],[544,256,0,145,0,"IMAGE"],[547,145,0,114,0,"IMAGE"],[616,123,0,206,0,"IMAGE"],[617,206,1,207,0,"INT"],[620,206,1,235,1,"INT"],[622,206,2,235,2,"INT"],[623,212,0,206,1,"INT"],[624,212,1,206,2,"INT"],[644,123,0,316,0,"IMAGE"],[645,206,1,316,1,"INT"],[646,206,2,316,2,"INT"],[652,244,0,317,0,"MASK"],[655,48,0,237,0,"IMAGE"],[656,49,0,238,0,"IMAGE"],[664,206,2,208,0,"INT"],[665,234,0,322,0,"IMAGE"],[666,322,0,235,0,"IMAGE"],[679,31,0,48,0,"IMAGE"],[680,335,1,331,0,"SUPIRVAE"],[681,335,0,332,0,"SUPIRMODEL"],[682,337,0,332,1,"LATENT"],[683,333,0,332,2,"SUPIR_cond_pos"],[684,333,1,332,3,"SUPIR_cond_neg"],[685,335,0,333,0,"SUPIRMODEL"],[686,331,2,333,1,"LATENT"],[687,335,1,334,0,"SUPIRVAE"],[688,332,0,334,1,"LATENT"],[692,331,0,337,0,"SUPIRVAE"],[693,331,1,337,1,"IMAGE"],[694,334,0,338,1,"IMAGE"],[695,336,0,339,0,"INT"],[699,346,0,331,1,"IMAGE"],[710,350,0,346,0,"*"],[714,353,0,359,0,"INT"],[715,359,0,354,1,"INT"],[716,360,0,354,2,"INT"],[717,353,1,360,0,"INT"],[718,354,0,361,0,"IMAGE"],[735,338,0,373,0,"*"],[736,141,0,217,0,"*"],[737,18,0,14,0,"MODEL"],[738,18,1,14,1,"CLIP"],[739,15,0,17,0,"MODEL"],[748,16,0,384,0,"MODEL"],[749,384,0,15,0,"MODEL"],[750,36,0,223,0,"*"],[754,228,0,349,0,"IMAGE"],[759,94,0,392,0,"MODEL"],[760,392,0,20,0,"MODEL"],[766,394,0,45,0,"IMAGE"],[768,61,0,395,0,"*"],[790,116,0,402,0,"*"],[794,401,0,338,0,"IMAGE"],[797,338,0,340,0,"IMAGE"],[798,346,0,340,1,"IMAGE"],[799,397,0,407,1,"IMAGE"],[800,408,0,407,0,"IMAGE"],[802,43,0,394,0,"*"],[803,411,0,410,0,"*"],[804,412,0,410,1,"IMAGE"],[806,410,0,248,0,"*"],[807,414,0,413,0,"*"],[808,415,0,414,0,"IMAGE"],[809,416,0,414,1,"IMAGE"],[810,354,0,417,0,"*"],[847,145,1,434,0,"*"],[848,435,0,433,0,"*"],[850,433,0,437,0,"*"],[851,436,0,433,1,"MASK"],[852,38,1,438,0,"*"],[854,440,0,116,1,"MASK"],[859,316,0,443,0,"*"],[860,444,0,39,1,"IMAGE"],[861,252,0,39,0,"IMAGE"],[862,445,0,48,1,"INT"],[863,445,0,48,2,"INT"],[864,445,0,49,1,"INT"],[865,445,0,49,2,"INT"],[866,316,0,43,0,"*"],[872,464,0,354,3,"COMBO"],[875,365,0,477,0,"IMAGE"],[876,135,0,477,1,"IMAGE"],[883,477,0,482,0,"IMAGE"],[884,477,0,79,0,"IMAGE"],[885,477,0,247,0,"IMAGE"],[887,490,0,489,0,"MASK"],[896,354,1,489,1,"INT"],[897,354,2,489,2,"INT"],[898,359,0,489,3,"INT"],[899,360,0,489,4,"INT"],[906,239,0,82,0,"MASK"],[907,489,0,494,0,"MASK"],[908,351,0,353,0,"IMAGE"],[909,351,0,354,0,"IMAGE"],[911,498,0,433,2,"MASK"],[912,354,1,501,0,"*"],[913,354,2,502,0,"*"],[914,504,0,503,0,"*"],[915,505,0,503,1,"INT"],[916,503,0,477,3,"INT"],[921,511,0,510,0,"INT"],[922,512,0,510,1,"INT"],[923,510,0,477,4,"INT"],[928,223,0,390,0,"IMAGE"],[930,407,0,225,0,"IMAGE"],[931,225,0,228,1,"IMAGE"],[939,36,0,522,0,"*"],[940,524,0,523,0,"*"],[941,525,0,524,0,"IMAGE"],[942,526,0,524,1,"IMAGE"],[943,223,0,397,0,"IMAGE"],[946,223,0,528,1,"IMAGE"],[958,395,0,46,1,"MASK"],[962,46,0,20,3,"LATENT"],[963,29,1,20,1,"CONDITIONING"],[964,29,2,20,2,"CONDITIONING"],[968,228,0,528,0,"IMAGE"],[972,255,0,535,0,"MASK"],[974,535,0,534,0,"MASK"],[975,82,0,61,0,"*"],[976,239,0,536,0,"*"],[977,536,0,255,0,"*"],[978,535,0,228,2,"MASK"],[982,540,0,82,2,"INT"],[983,539,0,82,1,"INT"],[990,539,0,544,0,"*"],[991,540,0,545,0,"*"],[1010,317,0,135,2,"MASK"],[1011,16,1,10,0,"CLIP"],[1012,16,1,11,0,"CLIP"],[1013,336,0,331,2,"INT"],[1014,336,0,331,3,"INT"],[1015,336,0,337,2,"INT"],[1016,16,2,45,1,"VAE"],[1017,336,0,334,2,"INT"],[1018,336,0,503,2,"INT"],[1019,336,0,503,3,"INT"],[1020,336,0,503,4,"INT"],[1021,336,0,510,2,"INT"],[1022,336,0,510,3,"INT"],[1023,336,0,510,4,"INT"],[1024,336,0,332,4,"INT"],[1025,16,0,29,4,"MODEL"],[1026,10,0,29,5,"CONDITIONING"],[1027,11,0,29,6,"CONDITIONING"],[1028,16,0,335,0,"MODEL"],[1029,16,1,335,1,"CLIP"],[1030,16,2,335,2,"VAE"],[1031,16,2,36,1,"VAE"],[1032,542,0,20,4,"INT"],[1033,557,0,10,1,"STRING"],[1034,557,1,11,1,"STRING"],[1035,336,0,331,2,"INT"],[1036,336,0,331,3,"INT"],[1037,336,0,337,2,"INT"],[1038,16,2,45,1,"VAE"],[1039,336,0,334,2,"INT"],[1040,336,0,503,2,"INT"],[1041,336,0,503,3,"INT"],[1042,336,0,503,4,"INT"],[1043,336,0,510,2,"INT"],[1044,336,0,510,3,"INT"],[1045,336,0,510,4,"INT"],[1046,336,0,332,4,"INT"],[1047,16,0,29,4,"MODEL"],[1048,10,0,29,5,"CONDITIONING"],[1049,11,0,29,6,"CONDITIONING"],[1050,16,0,335,0,"MODEL"],[1051,16,1,335,1,"CLIP"],[1052,16,2,335,2,"VAE"],[1053,16,2,36,1,"VAE"],[1054,542,0,20,4,"INT"],[1055,16,1,10,0,"CLIP"],[1056,16,1,11,0,"CLIP"],[1057,16,2,45,1,"VAE"],[1058,16,0,29,4,"MODEL"],[1059,10,0,29,5,"CONDITIONING"],[1060,11,0,29,6,"CONDITIONING"],[1061,16,2,36,1,"VAE"],[1062,542,0,20,4,"INT"],[1063,16,1,10,0,"CLIP"],[1064,16,1,11,0,"CLIP"],[1065,16,2,45,1,"VAE"],[1066,16,0,29,4,"MODEL"],[1067,10,0,29,5,"CONDITIONING"],[1068,11,0,29,6,"CONDITIONING"],[1069,16,2,36,1,"VAE"],[1070,542,0,20,4,"INT"],[1071,16,1,10,0,"CLIP"],[1072,16,1,11,0,"CLIP"],[1073,16,2,45,1,"VAE"],[1074,16,0,29,4,"MODEL"],[1075,10,0,29,5,"CONDITIONING"],[1076,11,0,29,6,"CONDITIONING"],[1077,16,2,36,1,"VAE"],[1078,16,1,10,0,"CLIP"],[1079,16,1,11,0,"CLIP"],[1080,542,0,20,4,"INT"],[1083,16,2,45,1,"VAE"],[1084,336,0,503,2,"INT"],[1085,336,0,503,3,"INT"],[1086,336,0,503,4,"INT"],[1087,336,0,510,2,"INT"],[1088,336,0,510,3,"INT"],[1089,336,0,510,4,"INT"],[1090,16,0,29,4,"MODEL"],[1091,10,0,29,5,"CONDITIONING"],[1092,11,0,29,6,"CONDITIONING"],[1093,16,2,36,1,"VAE"],[1094,16,1,10,0,"CLIP"],[1095,16,1,11,0,"CLIP"],[1096,542,0,20,4,"INT"],[1097,16,0,335,0,"MODEL"],[1098,16,1,335,1,"CLIP"],[1099,16,2,335,2,"VAE"],[1100,336,0,332,4,"INT"],[1101,336,0,331,2,"INT"],[1102,336,0,331,3,"INT"],[1103,336,0,337,2,"INT"],[1104,336,0,334,2,"INT"],[1105,16,2,45,1,"VAE"],[1106,336,0,503,2,"INT"],[1107,336,0,503,3,"INT"],[1108,336,0,503,4,"INT"],[1109,336,0,510,2,"INT"],[1110,336,0,510,3,"INT"],[1111,336,0,510,4,"INT"],[1112,16,0,29,4,"MODEL"],[1113,10,0,29,5,"CONDITIONING"],[1114,11,0,29,6,"CONDITIONING"],[1115,16,2,36,1,"VAE"],[1116,16,1,10,0,"CLIP"],[1117,16,1,11,0,"CLIP"],[1118,542,0,20,4,"INT"],[1119,16,0,335,0,"MODEL"],[1120,16,1,335,1,"CLIP"],[1121,16,2,335,2,"VAE"],[1122,336,0,332,4,"INT"],[1123,336,0,331,2,"INT"],[1124,336,0,331,3,"INT"],[1125,336,0,337,2,"INT"],[1126,336,0,334,2,"INT"],[1127,16,2,45,1,"VAE"],[1128,336,0,503,2,"INT"],[1129,336,0,503,3,"INT"],[1130,336,0,503,4,"INT"],[1131,336,0,510,2,"INT"],[1132,336,0,510,3,"INT"],[1133,336,0,510,4,"INT"],[1134,16,0,29,4,"MODEL"],[1135,10,0,29,5,"CONDITIONING"],[1136,11,0,29,6,"CONDITIONING"],[1137,16,2,36,1,"VAE"],[1138,16,1,10,0,"CLIP"],[1139,16,1,11,0,"CLIP"],[1140,542,0,20,4,"INT"],[1141,16,0,335,0,"MODEL"],[1142,16,1,335,1,"CLIP"],[1143,16,2,335,2,"VAE"],[1144,336,0,332,4,"INT"],[1145,336,0,331,2,"INT"],[1146,336,0,331,3,"INT"],[1147,336,0,337,2,"INT"],[1148,336,0,334,2,"INT"],[1149,16,2,45,1,"VAE"],[1150,336,0,503,2,"INT"],[1151,336,0,503,3,"INT"],[1152,336,0,503,4,"INT"],[1153,336,0,510,2,"INT"],[1154,336,0,510,3,"INT"],[1155,336,0,510,4,"INT"],[1156,16,0,29,4,"MODEL"],[1157,10,0,29,5,"CONDITIONING"],[1158,11,0,29,6,"CONDITIONING"],[1159,16,2,36,1,"VAE"],[1160,16,1,10,0,"CLIP"],[1161,16,1,11,0,"CLIP"],[1162,542,0,20,4,"INT"],[1163,16,0,335,0,"MODEL"],[1164,16,1,335,1,"CLIP"],[1165,16,2,335,2,"VAE"],[1166,336,0,332,4,"INT"],[1167,336,0,331,2,"INT"],[1168,336,0,331,3,"INT"],[1169,336,0,337,2,"INT"],[1170,336,0,334,2,"INT"],[1171,16,2,45,1,"VAE"],[1172,336,0,503,2,"INT"],[1173,336,0,503,3,"INT"],[1174,336,0,503,4,"INT"],[1175,336,0,510,2,"INT"],[1176,336,0,510,3,"INT"],[1177,336,0,510,4,"INT"],[1178,16,0,29,4,"MODEL"],[1179,10,0,29,5,"CONDITIONING"],[1180,11,0,29,6,"CONDITIONING"],[1181,16,2,36,1,"VAE"],[1182,16,1,10,0,"CLIP"],[1183,16,1,11,0,"CLIP"],[1184,542,0,20,4,"INT"],[1185,16,0,335,0,"MODEL"],[1186,16,1,335,1,"CLIP"],[1187,16,2,335,2,"VAE"],[1188,336,0,332,4,"INT"],[1189,336,0,331,2,"INT"],[1190,336,0,331,3,"INT"],[1191,336,0,337,2,"INT"],[1192,336,0,334,2,"INT"],[1193,16,2,45,1,"VAE"],[1194,336,0,503,2,"INT"],[1195,336,0,503,3,"INT"],[1196,336,0,503,4,"INT"],[1197,336,0,510,2,"INT"],[1198,336,0,510,3,"INT"],[1199,336,0,510,4,"INT"],[1200,16,0,29,4,"MODEL"],[1201,10,0,29,5,"CONDITIONING"],[1202,11,0,29,6,"CONDITIONING"],[1203,16,2,36,1,"VAE"],[1204,16,1,10,0,"CLIP"],[1205,16,1,11,0,"CLIP"],[1206,542,0,20,4,"INT"],[1207,16,0,335,0,"MODEL"],[1208,16,1,335,1,"CLIP"],[1209,16,2,335,2,"VAE"],[1210,336,0,332,4,"INT"],[1211,336,0,331,2,"INT"],[1212,336,0,331,3,"INT"],[1213,336,0,337,2,"INT"],[1214,336,0,334,2,"INT"],[1215,16,2,45,1,"VAE"],[1216,336,0,503,2,"INT"],[1217,336,0,503,3,"INT"],[1218,336,0,503,4,"INT"],[1219,336,0,510,2,"INT"],[1220,336,0,510,3,"INT"],[1221,336,0,510,4,"INT"],[1222,16,0,29,4,"MODEL"],[1223,10,0,29,5,"CONDITIONING"],[1224,11,0,29,6,"CONDITIONING"],[1225,16,2,36,1,"VAE"],[1226,16,1,10,0,"CLIP"],[1227,16,1,11,0,"CLIP"],[1228,542,0,20,4,"INT"],[1229,16,0,335,0,"MODEL"],[1230,16,1,335,1,"CLIP"],[1231,16,2,335,2,"VAE"],[1232,336,0,332,4,"INT"],[1233,336,0,331,2,"INT"],[1234,336,0,331,3,"INT"],[1235,336,0,337,2,"INT"],[1236,336,0,334,2,"INT"],[1237,16,2,45,1,"VAE"],[1238,336,0,503,2,"INT"],[1239,336,0,503,3,"INT"],[1240,336,0,503,4,"INT"],[1241,336,0,510,2,"INT"],[1242,336,0,510,3,"INT"],[1243,336,0,510,4,"INT"],[1244,384,0,29,4,"MODEL"],[1245,10,0,29,5,"CONDITIONING"],[1246,11,0,29,6,"CONDITIONING"],[1247,16,2,36,1,"VAE"],[1248,16,1,10,0,"CLIP"],[1249,16,1,11,0,"CLIP"],[1250,542,0,20,4,"INT"],[1251,384,0,335,0,"MODEL"],[1252,16,1,335,1,"CLIP"],[1253,16,2,335,2,"VAE"],[1254,336,0,332,4,"INT"],[1255,336,0,331,2,"INT"],[1256,336,0,331,3,"INT"],[1257,336,0,337,2,"INT"],[1258,336,0,334,2,"INT"],[1259,16,2,45,1,"VAE"],[1260,336,0,503,2,"INT"],[1261,336,0,503,3,"INT"],[1262,336,0,503,4,"INT"],[1263,336,0,510,2,"INT"],[1264,336,0,510,3,"INT"],[1265,336,0,510,4,"INT"],[1266,384,0,29,4,"MODEL"],[1267,10,0,29,5,"CONDITIONING"],[1268,11,0,29,6,"CONDITIONING"],[1269,16,2,36,1,"VAE"],[1270,16,1,10,0,"CLIP"],[1271,16,1,11,0,"CLIP"],[1272,542,0,20,4,"INT"],[1273,384,0,335,0,"MODEL"],[1274,16,1,335,1,"CLIP"],[1275,16,2,335,2,"VAE"],[1276,336,0,332,4,"INT"],[1277,336,0,331,2,"INT"],[1278,336,0,331,3,"INT"],[1279,336,0,337,2,"INT"],[1280,336,0,334,2,"INT"],[1281,16,2,45,1,"VAE"],[1282,384,0,29,4,"MODEL"],[1283,10,0,29,5,"CONDITIONING"],[1284,11,0,29,6,"CONDITIONING"],[1285,16,2,36,1,"VAE"],[1286,16,1,10,0,"CLIP"],[1287,16,1,11,0,"CLIP"],[1288,542,0,20,4,"INT"],[1289,16,2,45,1,"VAE"],[1290,384,0,29,4,"MODEL"],[1291,10,0,29,5,"CONDITIONING"],[1292,11,0,29,6,"CONDITIONING"],[1293,16,2,36,1,"VAE"],[1294,16,1,10,0,"CLIP"],[1295,16,1,11,0,"CLIP"],[1296,542,0,20,4,"INT"]],"groups":[{"title":"0.2 提示词","bounding":[-226,581,840,411],"color":"#3f789e","font_size":24,"locked":false},{"title":"0.1 模型 & Lora","bounding":[-221,40,839,476],"color":"#3f789e","font_size":24,"locked":false},{"title":"7. 采样降噪（脸部局部重绘）","bounding":[4857,50,659,749],"color":"#3f789e","font_size":24,"locked":false},{"title":"6. IPA - FaceID","bounding":[3815,570,954,486],"color":"#3f789e","font_size":24,"locked":false},{"title":"5. InstantID","bounding":[3819,49,948,479],"color":"#3f789e","font_size":24,"locked":false},{"title":"4. 裁切的图像及遮罩精度处理","bounding":[2737,47,992,1013],"color":"#3f789e","font_size":24,"locked":false},{"title":"0. 输入 & 输出","bounding":[-214,2185,2212,946],"color":"#3f789e","font_size":24,"locked":false},{"title":"3. 头像裁切","bounding":[1716,587,936,475],"color":"#3f789e","font_size":24,"locked":false},{"title":"11. 头像拼贴","bounding":[4865,1171,1431,888],"color":"#3f789e","font_size":24,"locked":false},{"title":"8. 人脸磨皮、色彩修复、饱和度调节","bounding":[5588,53,702,999],"color":"#3f789e","font_size":24,"locked":false},{"title":"10. 脸部高清修复（SUPIR）","bounding":[2517,1170,2259,889],"color":"#3f789e","font_size":24,"locked":false},{"title":"1. 裁切底图（脸部极小时启用）","bounding":[688,42,944,744],"color":"#3f789e","font_size":24,"locked":false},{"title":"功能开关处理区","bounding":[-218,1364,2215,677],"color":"#3f789e","font_size":24,"locked":false},{"title":"2. 自动生成遮罩（关掉后则启用手动遮罩）","bounding":[1719,45,935,481],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"workspace_info":{"id":"ZfLoB232pQCcbdOvugA5X","name":"一键人物换脸-IPA_InstantID-V1.4（人脸优化）"},"ds":{"scale":1,"offset":[1130,-7.644502427842767]}},"version":0.4}